!function(t,e){var n,i;"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(n=t.Ractive,i=e(),(t.Ractive=i).noConflict=function(){return t.Ractive=n,i})}(this,function(){"use strict";function v(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function s(t){var e,n=[];for(e in t=void 0===t?{}:t)v(t,e)&&n.push([e,t[e]]);return n}Object.assign||(Object.assign=function(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),r=e.length,s=0;s<r;s++){var a,o=e[s];for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])}return i});var t,e=Object,u=e.assign,A=e.create,f=e.defineProperty,a=e.defineProperties,b=e.keys,n=Object.prototype.toString,w=Array.isArray;function h(t,e){return null===t&&null===e||!y(t)&&!y(e)&&t===e}function l(t){return!isNaN(parseFloat(t))&&isFinite(t)}function x(t){return t&&"[object Object]"===n.call(t)}function c(t){return t&&(y(t)||k(t))}function y(t){return"object"==typeof t}function k(t){return"function"==typeof t}function C(t){return"string"==typeof t}function d(t){return"number"==typeof t}function _(t){return void 0===t}Array.prototype.find||f(Array.prototype,"find",{value:function(t,e){if(null===this||_(this))throw new TypeError("Array.prototype.find called on null or undefined");if(!k(t))throw new TypeError(t+" is not a function");for(var n=Object(this),i=n.length>>>0,r=0;r<i;r++)if(v(n,r)&&t.call(e,n[r],r,n))return n[r]},configurable:!0,writable:!0}),"undefined"!=typeof window&&window.Node&&window.Node.prototype&&!window.Node.prototype.contains&&(Node.prototype.contains=function(t){if(!t)throw new TypeError("node required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1}),"undefined"!=typeof window&&window.performance&&!window.performance.now&&(window.performance=window.performance||{},t=Date.now(),window.performance.now=function(){return Date.now()-t});var p,i,r,m,g,E,S,o,O="undefined"!=typeof window?window:null,N=O?document:null,j=!!N,T="undefined"!=typeof global?global:O,V="undefined"!=typeof console&&k(console.warn)&&k(console.warn.apply),P=!!N&&N.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),M=["o","ms","moz","webkit"];T.Promise||(p={},i={},r={},(m=T.Promise=function(t){var a,o=[],h=[],u=p,e=function(e){return function(t){u===p&&(a=E((u=e)===i?o:h,t),g(a))}},n=e(i),e=e(r);try{t(n,e)}catch(t){e(t)}return{then:function(e,n){var s=new m(function(i,r){function t(e,t,n){k(e)?t.push(function(t){try{S(s,e(t),i,r)}catch(t){r(t)}}):t.push(n)}t(e,o,i),t(n,h,r),u!==p&&g(a)});return s},catch:function(t){return this.then(null,t)},finally:function(e){return this.then(function(t){return e(),t},function(t){throw e(),t})}}}).all=function(e){return new m(function(n,i){var t,r=[];if(e.length)for(var s=t=e.length;t--;)!function(t,e){t&&k(t.then)?t.then(function(t){r[e]=t,--s||n(r)},i):(r[e]=t,--s||n(r))}(e[t],t);else n(r)})},m.race=function(a){return new m(function(e,n){var i=!0;function t(t){i&&(i=!1,e(t))}function r(t){i&&(i=!1,n(t))}for(var s=0;s<a.length;s++)a[s]&&k(a[s].then)&&a[s].then(t,r)})},m.resolve=function(e){return e&&k(e.then)?e:new m(function(t){t(e)})},m.reject=function(n){return n&&k(n.then)?n:new m(function(t,e){e(n)})},g=function(t){setTimeout(t,0)},E=function(e,n){return function(){for(var t=void 0;t=e.shift();)t(n)}},S=function(e,t,n,i){var r;if(t===e)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(t instanceof m)t.then(n,i);else if(t&&(y(t)||k(t))){try{r=t.then}catch(t){return void i(t)}if(k(r)){var s;try{r.call(t,function(t){s||(s=!0,S(e,t,n,i))},function(t){s||(s=!0,i(t))})}catch(t){if(!s)return i(t),void(s=!0)}}else n(t)}else n(t)}),"undefined"==typeof window||window.requestAnimationFrame&&window.cancelAnimationFrame||(o=0,window.requestAnimationFrame=function(t){var e=Date.now(),n=Math.max(0,16-(e-o)),i=window.setTimeout(function(){t(e+n)},n);return o=e+n,i},window.cancelAnimationFrame=function(t){clearTimeout(t)});var I={el:void 0,append:!1,delegate:!0,enhance:!1,template:null,allowExpressions:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],staticDelimiters:["[[","]]"],staticTripleDelimiters:["[[[","]]]"],csp:!0,interpolate:!1,preserveWhitespace:!1,preserveStandaloneSections:!1,sanitize:!1,stripComments:!0,contextLines:0,data:A(null),helpers:A(null),computed:A(null),syncComputedChildren:!1,resolveInstanceMembers:!1,warnAboutAmbiguity:!1,adapt:[],isolated:!0,twoway:!0,lazy:!1,noIntro:!1,noOutro:!1,transitionsEnabled:!0,complete:void 0,nestedTransitions:!0,css:null,noCSSTransform:!1},R={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}};function B(){}var K,L,D,F,z={};function U(t,e){return t.replace(/%s/g,function(){return e.shift()})}function $(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];throw t=U(t,e),new Error(t)}function q(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];t=U(t,e),D(t,e)}function H(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];t=U(t,e),z[t]||(z[t]=!0,D(t,e))}function Z(){Il.DEBUG&&q.apply(null,arguments)}function W(){Il.DEBUG&&H.apply(null,arguments)}V?(K=["%cRactive.js %c1.4.0-edge %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"],L=function(){var t,e;L=(!1!==Il.WELCOME_MESSAGE&&(t="WELCOME_MESSAGE"in Il?Il.WELCOME_MESSAGE:"You're running Ractive 1.4.0-edge in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://ractive.js.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n",(e=!!console.groupCollapsed)&&console.groupCollapsed.apply(console,K),console.log(t),e&&console.groupEnd(K)),B)},D=function(t,e){var n,i,r;L(),!y(e[e.length-1])||(r=(n=e.pop())?n.ractive:null)&&(r.component&&(i=r.component.name)&&(t="<"+i+"> "+t),(r=n.node||r.fragment&&r.fragment.rendered&&r.find("*"))&&e.push(r)),console.warn.apply(console,["%cRactive.js: %c"+t,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(e))},F=function(){console.log.apply(console,arguments)}):D=F=L=B;function G(t,e){return'Missing "'+t+'" '+e+" plugin. You may need to download a plugin via http://ractive.js.org/integrations/#"+e+"s"}var Q='A function was specified for "%s" %s, but no %s was returned';function Y(t,e,n){e=J(t,e,n);return e?e[t][n]:null}function J(t,e,n){for(;e;){if(n in e[t])return e;if(e.isolated)return null;e=e.parent}}function X(t,e,n,i){if(t===e)return null;if(i){n=Y("interpolators",n,i);if(n)return n(t,e)||null;$(G(i,"interpolator"))}return tt.number(t,e)||tt.array(t,e)||tt.object(t,e)||null}var tt={number:function(e,t){if(!l(e)||!l(t))return null;var n=(t=+t)-(e=+e);return n?function(t){return e+t*n}:function(){return e}},array:function(t,e){var n;if(!w(t)||!w(e))return null;for(var i=[],r=[],s=n=Math.min(t.length,e.length);s--;)r[s]=X(t[s],e[s]);for(s=n;s<t.length;s+=1)i[s]=t[s];for(s=n;s<e.length;s+=1)i[s]=e[s];return function(t){for(var e=n;e--;)i[e]=r[e](t);return i}},object:function(e,n){if(!x(e)||!x(n))return null;var t,i,r=[],s={},a={};for(t in e)!function(t){v(e,t)&&(v(n,t)?(r.push(t),a[t]=X(e[t],n[t])||function(){return n[t]}):s[t]=e[t])}(t);for(i in n)v(n,i)&&!v(e,i)&&(s[i]=n[i]);var o=r.length;return function(t){for(var e=o;e--;){var n=r[e];s[n]=a[n](t)}return s}}},et=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,nt=/([^\\](?:\\\\)*)\./,it=/\\|\./g,rt=/((?:\\)+)\1|\\(\.)/g;function st(t){return C(t)?t.replace(it,"\\$&"):t}function at(t){return t?t.replace(et,".$1"):""}function ot(t){var e=[];for(t=at(t);n=nt.exec(t);){var n=n.index+n[1].length;e.push(t.substr(0,n)),t=t.substr(n+1)}return e.push(t),e}function ht(t){return C(t)?t.replace(rt,"$1$2"):t}function ut(t,e){-1===t.indexOf(e)&&t.push(e)}function lt(t){return C(t)?[t]:_(t)?[]:t}function ct(t){return t[t.length-1]}function dt(t,e){!t||-1!==(e=t.indexOf(e))&&t.splice(e,1)}function ft(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n=t.concat.apply([],t),i=n.length;i--;){var r=n.indexOf(n[i]);~r&&r<i&&n.splice(i,1)}return n}function pt(t){for(var e=[],n=t.length;n--;)e[n]=t[n];return e}function mt(t,e){for(var n=t.length,i=0;i<n;i++){var r=e(t[i]);if(r)return r}}function gt(t,e,n){var t=t,i=e;n&&(t=t.map(n),i=i.map(n));var r=t.length,s={},a=0,o=t.map(function(t){var e,n=a;do{if(-1===(e=i.indexOf(t,n)))return-1}while(n=e+1,!0===s[e]&&n<r);return e===a&&(a+=1),s[e]=!0,e}),h=o.oldLen=t.length;if(o.newLen=i.length,h===o.newLen){for(var u=0;u<h&&o[u]===u;u++);u===h&&(o.same=!0)}return o}var vt=Function.prototype.bind;function yt(t,e){if(!/this/.test(t.toString()))return t;var n,i=vt.call(t,e);for(n in t)i[n]=t[n];return i}var bt={early:[],mark:[]},wt={early:[],mark:[]},xt={virtual:!1},kt=function(t){this.deps=[],this.children=[],this.childByKey={},this.links=[],this.bindings=[],t&&(this.parent=t,this.root=t.root)},_t=kt.prototype;function Et(t,e,n){return n&&k(e)&&t.parent&&t.parent.isRoot?(t.boundValue||(t.boundValue=yt(e._r_unbound||e,t.parent.ractive)),t.boundValue):e}function St(t){t.updateFromBindings(!0)}function At(t){if(t){var e=bt[t];bt[t]=[];for(var n=e.length;n--;)e[n]();var i=wt[t];for(wt[t]=[],n=i.length;n--;)i[n].model.register(i[n].item)}else At("early"),At("mark")}function Ct(t,e,n,i){t.shuffling=!0;for(var r=e.length;r--;){var s=e[r];r!==s&&r in t.childByKey&&t.childByKey[r].rebind(~s?t.joinKey(s):void 0,t.childByKey[r],!i)}var a=t.source().length!==t.source().value.length;for(t.links.forEach(function(t){return t.shuffle(e)}),n||At("early"),r=t.deps.length;r--;)t.deps[r].shuffle&&t.deps[r].shuffle(e);t[n?"marked":"mark"](),n||At("mark"),a&&t.notifyUpstream(),t.shuffling=!1}function Ot(t,e){e!==t.dataModel&&(e&&e.viewmodel&&e.viewmodel.isRoot&&t.childByKey.data?(t.childByKey.data.link(e.viewmodel,"data"),t.dataModel=e):t.dataModel&&(t.childByKey.data.unlink(),t.dataModel=!0))}_t.addShuffleTask=function(t,e){bt[e=void 0===e?"early":e].push(t)},_t.addShuffleRegister=function(t,e){wt[e=void 0===e?"early":e].push({model:this,item:t})},_t.downstreamChanged=function(){},_t.findMatches=function(t){for(var n,e=t.length,i=[this],r=0;r<e;r+=1)!function(){var e=t[r];"*"===e?(n=[],i.forEach(function(t){n.push.apply(n,t.getValueChildren(t.get()))})):n=i.map(function(t){return t.joinKey(e)}),i=n}();return n},_t.getKeypath=function(t){return t!==this.ractive&&this._link?this._link.target.getKeypath(t):(this.keypath||(e=this.parent&&this.parent.getKeypath(t),this.keypath=e?this.parent.getKeypath(t)+"."+st(this.key):st(this.key)),this.keypath);var e},_t.getValueChildren=function(t){var n,i=this;w(t)?(n=[],"length"in this&&this.length!==t.length&&n.push(this.joinKey("length")),t.forEach(function(t,e){n.push(i.joinKey(e))})):x(t)||k(t)?n=b(t).map(function(t){return i.joinKey(st(t))}):null!=t&&(n=[]);t=this.computed;return t&&n.push.apply(n,b(t).map(function(t){return i.joinKey(t)})),n},_t.getVirtual=function(t){var e=this.get(t,{virtual:!1});if(c(e)){for(var n=w(e)?[]:A(null),i=b(e),r=i.length;r--;){var s=this.childByKey[i[r]];s?s._link?n[i[r]]=s._link.getVirtual():n[i[r]]=s.getVirtual():n[i[r]]=e[i[r]]}for(r=this.children.length;r--;){var a=this.children[r];a.key in n||!a._link||(n[a.key]=a._link.getVirtual())}if(this.computed)for(r=(i=b(this.computed)).length;r--;)n[i[r]]=this.computed[i[r]].get();return n}return e},_t.has=function(t){var e=this;if(this._link)return this._link.has(t);var n=this.get(!1,xt);if(!n)return!1;if(t=ht(t),(k(n)||x(n))&&t in n)return!0;var i=this.computed;return!!(i&&t in this.computed)||((i=this.root.ractive&&this.root.ractive.computed)&&b(i).forEach(function(t){if(i[t].pattern&&i[t].pattern.test(e.getKeypath()))return!0}),!1)},_t.joinAll=function(t,e){for(var n=this,i=0;i<t.length;i+=1){if(e&&!1===e.lastLink&&i+1===t.length&&n.childByKey[t[i]]&&n.childByKey[t[i]]._link)return n.childByKey[t[i]];n=n.joinKey(t[i],e)}return n},_t.notifyUpstream=function(t){for(var e=this,n=this.parent,i=t||[this.key];n;)n.patterns&&n.patterns.forEach(function(t){return t.notify(i.slice())}),i.unshift(n.key),n.links.forEach(function(t){return t.notifiedUpstream(i,e.root)}),n.deps.forEach(function(t){return t.handleChange(i)}),n.downstreamChanged(t),n=n.parent},_t.rebind=function(t,e,n){var i=this;if(this._link&&this._link.rebind(t,e,!1),t!==this){for(var r=this.deps.length;r--;)i.deps[r].rebind&&i.deps[r].rebind(t,e,n);for(r=this.links.length;r--;){var s=i.links[r];s.owner&&s.owner._link&&s.relinking(t,n)}for(r=this.children.length;r--;){var a=i.children[r];a.rebind(t?t.joinKey(a.key):void 0,a._link||a,n),i.dataModel&&i.addShuffleTask(function(){return Ot(i,i.retrieve())},"early")}for(r=this.bindings.length;r--;)i.bindings[r].rebind(t,e,n)}},_t.reference=function(){"refs"in this?this.refs++:this.refs=1},_t.register=function(t){this.deps.push(t)},_t.registerLink=function(t){ut(this.links,t)},_t.registerPatternObserver=function(t){(this.patterns||(this.patterns=[])).push(t),this.register(t)},_t.registerTwowayBinding=function(t){this.bindings.push(t)},_t.unreference=function(){"refs"in this&&this.refs--},_t.unregister=function(t){dt(this.deps,t)},_t.unregisterLink=function(t){dt(this.links,t)},_t.unregisterPatternObserver=function(t){dt(this.patterns,t),this.unregister(t)},_t.unregisterTwowayBinding=function(t){dt(this.bindings,t)},_t.updateFromBindings=function(t){for(var e,n=this.bindings.length;n--;){var i=this.bindings[n].getValue();i!==this.value&&this.set(i)}this.bindings.length||(e=function(t){var e=t.length;for(;e--;)if(t[e].bound){var n=t[e].owner;if(n)return{value:"checked"===n.name?n.node.checked:n.node.value}}}(this.deps))&&e.value!==this.value&&this.set(e.value),t&&(this.children.forEach(St),this.links.forEach(St),this._link&&this._link.updateFromBindings(t))};var Nt,jt=[];function Tt(){jt.push(Nt=[])}function Vt(){var t=jt.pop();return Nt=jt[jt.length-1],t}function Pt(t){Nt&&ut(Nt,t)}function Mt(t){t.bind()}function It(t){t.cancel()}function Rt(t){t.destroyed()}function Bt(t){t.handleChange()}function Kt(t){t.mark()}function Lt(t){t.mark(!0)}function Dt(t){t.marked()}function Ft(t){t.markedAll()}function zt(t){t.render()}function Ut(t){t.shuffled()}function $t(t){t.teardown()}function qt(t){t.unbind()}function Ht(t){t.unrender()}function Zt(t){t.update()}function Wt(t){return t.toString()}function Gt(t){return t.toString(!0)}function Qt(t,e,n,i){t=t.r||t;if(!t||!C(t))return e;if("."===t||"@"===t[0]||(e||n).isKey||(e||n).isKeypath)return e;for(var t=t.split("/"),r=ot(t[t.length-1]),t=r[r.length-1],s=e||n,a=(r=s&&1===r.length&&t!==s.key&&i?function(t,e){for(;e;){var n=e.aliases;if(n&&n[t]){for(var i=(e.owner.iterations?e.owner:e).owner.template.z,r=0;r<i.length;r++)if(i[r].n===t){var s=i[r].x;if(!s.r)return!1;s=s.r.split("/");return ot(s[s.length-1])}return}e=e.componentParent||e.parent}}(t,i)||r:r).length,o=!0,h=!1;s&&a--;)s.shuffling&&(h=!0),r[a]!=s.key&&(o=!1),s=s.parent;return!e&&o&&h||e&&!o&&h?n:e}var Yt={key:"@missing",animate:B,applyValue:B,get:B,getKeypath:function(){return this.key},joinAll:function(){return this},joinKey:function(){return this},mark:B,registerLink:B,shufle:B,set:B,unregisterLink:B};Yt.parent=Yt;var Jt=function(r){function n(t,e,n,i){r.call(this,t),this.owner=e,this.target=n,this.key=_(i)?e.key:i,e&&e.isLink&&(this.sourcePath=e.sourcePath+"."+this.key),n&&n.registerLink(this),t&&(this.isReadonly=t.isReadonly),this.isLink=!0}r&&(n.__proto__=r);var t=n.prototype=Object.create(r&&r.prototype);return t.constructor=n,t.animate=function(t,e,n,i){return this.target.animate(t,e,n,i)},t.applyValue=function(t){this.boundValue&&(this.boundValue=null),this.target.applyValue(t)},t.attach=function(t){t=Mr(t,this.key);t?this.relinking(t,!1):this.owner.unlink()},t.detach=function(){this.relinking(Yt,!1)},t.get=function(t,e){void 0===e&&(e={}),t&&(Pt(this),e.unwrap=!("unwrap"in e)||e.unwrap);t=!("shouldBind"in e)||e.shouldBind;return e.shouldBind=this.mapping&&this.target.parent&&this.target.parent.isRoot,Et(this,this.target.get(!1,e),t)},t.getKeypath=function(t){return t&&t!==this.root.ractive?this.target.getKeypath(t):r.prototype.getKeypath.call(this,t)},t.handleChange=function(){this.deps.forEach(Bt),this.links.forEach(Bt),this.notifyUpstream()},t.isDetached=function(){return this.virtual&&this.target===Yt},t.joinKey=function(t){return _(t)||""===t?this:(v(this.childByKey,t)||(e=new n(this,this,this.target.joinKey(t),t),this.children.push(e),this.childByKey[t]=e),this.childByKey[t]);var e},t.mark=function(t){this.target.mark(t)},t.marked=function(){this.boundValue&&(this.boundValue=null),this.links.forEach(Dt),this.deps.forEach(Bt)},t.markedAll=function(){this.children.forEach(Ft),this.marked()},t.notifiedUpstream=function(e,t){var n,i,r=this;this.links.forEach(function(t){return t.notifiedUpstream(e,r.root)}),this.deps.forEach(Bt),e&&this.rootLink&&(n=this.parent,this.root!==t?((t=e.slice(1)).unshift(this.key),this.notifyUpstream(t)):n&&n!==this.target&&(i=[n.key,this.key],n.links.forEach(function(t){return t.notifiedUpstream(i,n.root)}),n.deps.forEach(function(t){return t.handleChange(i)}),n.notifyUpstream(i)))},t.relinked=function(){this.target.registerLink(this),this.children.forEach(function(t){return t.relinked()})},t.relinking=function(e,n){var t=this;(e=this.rootLink&&this.sourcePath?Qt(this.sourcePath,e,this.target):e)&&this.target!==e&&(this.target&&this.target.unregisterLink(this),this.target=e,this.children.forEach(function(t){t.relinking(e.joinKey(t.key),n)}),n||(this.keypath=void 0),this.rootLink&&this.addShuffleTask(function(){t.relinked(),n||(t.markedAll(),t.notifyUpstream())}))},t.set=function(t){this.boundValue&&(this.boundValue=null),this.target.set(t)},t.shuffle=function(t){this.shuffling||(this.target.shuffling?Ct(this,t,!0):this.target.shuffle?this.target.shuffle(t):this.target.mark())},t.source=function(){return this.target.source?this.target.source():this.target},t.teardown=function(){this._link&&this._link.teardown(),this.target.unregisterLink(this),this.children.forEach($t)},n}(kt);function Xt(t,e){void 0===e&&(e=0);for(var n=new Array(e);e--;)n[e]="_"+e;return new Function([],"return function ("+n.join(",")+"){return("+t+");};")()}kt.prototype.link=function(t,e,n){var i=this._link||new Jt(this.parent,this,t,this.key);return i.implicit=n&&n.implicit,i.mapping=n&&n.mapping,i.sourcePath=e,i.rootLink=!0,this._link&&this._link.relinking(t,!1),this.rebind(i,this,!1),At(),(this._link=i).markedAll(),this.notifyUpstream(),i},kt.prototype.unlink=function(){var t;this._link&&(t=this._link,this._link=void 0,t.rebind(this,t,!1),At(),t.teardown(),this.notifyUpstream())};var te=A(null);function ee(t,e){return te[t]||(te[t]=(t=t,e=e,lr(Xt,"new expression function",hr),Xt(t,e)))}function ne(t){var e;!t||(e=t.e)&&b(e).forEach(function(t){te[t]||(te[t]=e[t])})}function ie(t){this.name="ParseError",this.message=t;try{throw new Error(t)}catch(t){this.stack=t.stack}}var re=4,se=/^\s+/;ie.prototype=Error.prototype;function ae(t,e){var n,i=0;this.str=t,this.options=e||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(t){t=i+t.length+1;return i=t},0),this.init&&this.init(t,e);for(var r=[];this.pos<this.str.length&&(n=this.read());)r.push(n);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(r,e):r}ae.prototype={read:function(t){var e;t=t||this.converters;for(var n=this.pos,i=t.length,r=0;r<i;r+=1)if(this.pos=n,e=t[r](this))return e;return null},getContextMessage:function(t,e){var n=this.getLinePos(t),i=n[0],r=n[1];if(-1===this.options.contextLines)return[i,r,e+" at line "+i+" character "+r];var s=this.lines[i-1],a="",t="";this.options.contextLines&&(n=i-1-this.options.contextLines<0?0:i-1-this.options.contextLines,(a=this.lines.slice(n,i-1-n).join("\n").replace(/\t/g,"  "))&&(a+="\n"),t=(t=this.lines.slice(i,i+this.options.contextLines).join("\n").replace(/\t/g,"  "))&&"\n"+t);var o=0,t=a+s.replace(/\t/g,function(t,e){return e<r&&(o+=1),"  "})+"\n"+new Array(r+o).join(" ")+"^----"+t;return[i,r,e+" at line "+i+" character "+r+":\n"+t]},getLinePos:function(t){for(var e=0,n=0;t>=this.lineEnds[e];)n=this.lineEnds[e],e+=1;return[e+1,1+(t-n),t]},error:function(t){var e,n=this.getContextMessage(this.pos,t),i=n[0],r=n[1],n=n[2];throw(e=new ie(n)).line=i,e.character=r,e.shortMessage=t,e},matchString:function(t){if(this.str.substr(this.pos,t.length)===t)return this.pos+=t.length,t},matchPattern:function(t){if(t=t.exec(this.remaining()))return this.pos+=t[0].length,t[1]||t[0]},sp:function(){this.matchPattern(se)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)},warn:function(t){Z(this.getContextMessage(this.pos,t)[2])}},ae.extend=function(t){function e(t,e){ae.call(this,t,e)}for(var n in e.prototype=A(this.prototype),t)v(t,n)&&(e.prototype[n]=t[n]);return e.extend=ae.extend,e};var oe=2,he=3,ue=4,le=5,ce=6,de=7,fe=8,pe=9,me=10,ge=11,ve=13,ye=14,be=15,we=16,xe=20,ke=21,_e=22,Ee=23,Se=24,Ae=25,Ce=26,Oe=27,Ne=30,je=31,Te=32,Ve=33,Pe=34,Me=35,Ie=36,Re=40,Be=53,Ke=70,Le=71,De=72,Fe=73,ze=/^[^\s=]+/,Ue=/^\s+/;var $e=/^(\/(?:[^\n\r\u2028\u2029/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/;function qe(t){return(t=t.matchPattern($e))?{t:Ae,v:t}:null}var He=/[-/\\^$*+?.()|[\]{}]/g;function Ze(t){return t.replace(He,"\\$&")}var We={};function Ge(t,e){return t.search(We[e.join()]||(We[e.join()]=new RegExp(e.map(Ze).join("|"))))}var Qe={allowfullscreen:1,async:1,autofocus:1,autoplay:1,checked:1,compact:1,controls:1,declare:1,default:1,defaultchecked:1,defaultmuted:1,defaultselected:1,defer:1,disabled:1,enabled:1,formnovalidate:1,hidden:1,indeterminate:1,inert:1,ismap:1,itemscope:1,loop:1,multiple:1,muted:1,nohref:1,noresize:1,noshade:1,novalidate:1,nowrap:1,open:1,pauseonexit:1,readonly:1,required:1,reversed:1,scoped:1,seamless:1,selected:1,sortable:1,translate:1,truespeed:1,typemustmatch:1,visible:1},Ye={area:1,base:1,br:1,col:1,command:1,doctype:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},Je={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Xe=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],tn=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+b(Je).join("|")+"));?","g"),en=k(String.fromCodePoint),nn=en?String.fromCodePoint:String.fromCharCode;function rn(t){return t.replace(tn,function(t,e){e="#"!==e[0]?Je[e]:"x"===e[1]?parseInt(e.substring(2),16):parseInt(e.substring(1),10);return e?nn(function(t){if(!t)return hn;if(10===t)return 32;if(t<128)return t;if(t<=159)return Xe[t-128];if(t<55296)return t;if(t<=57343)return hn;{if(t<=65535)return t;if(!en)return hn}if(65536<=t&&t<=131071)return t;if(131072<=t&&t<=196607)return t;return hn}(e)):t})}var sn=/</g,an=/>/g,on=/&/g,hn=65533;function un(t){return t.replace(on,"&amp;").replace(sn,"&lt;").replace(an,"&gt;")}var ln="Expected a JavaScript expression",cn="Expected closing paren",dn=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;function fn(t){return(t=t.matchPattern(dn))?{t:xe,v:t}:null}var pn=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,mn=/^\\(?:[`'"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,gn=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;function vn(r){return function(t){for(var e,n='"',i=!1;!i;)(e=t.matchPattern(pn)||t.matchPattern(mn)||t.matchString(r))?n+='"'===e?'\\"':"\\'"===e?"'":e:(e=t.matchPattern(gn))?n+="\\u"+("000"+e.charCodeAt(1).toString(16)).slice(-4):i=!0;return n+='"',JSON.parse(n)}}var yn=vn('"'),bn=vn("'");function wn(t){var e=t.pos,n=t.matchString("'")||t.matchString('"');if(n){var i=("'"===n?yn:bn)(t);return t.matchString(n)?{t:ke,v:i}:(t.pos=e,null)}return null}var xn=/^[^`"\\\$]+?(?:(?=[`"\\\$]))/,kn=/[\r\n\t\b\f]/g;function _n(t){return JSON.parse('"'+t.replace(kn,En)+'"')}function En(t){switch(t){case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\b":return"\\b";case"\f":return"\\f"}}var Sn=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,An=/^\s*\.{3}/,Cn=/^(?:[a-zA-Z$_0-9]|\\\.)+(?:(?:\.(?:[a-zA-Z$_0-9]|\\\.)+)|(?:\[[0-9]+\]))*/,On=/^[a-zA-Z_$][-\/a-zA-Z_$0-9]*(?:\.(?:[a-zA-Z_$][-\/a-zA-Z_$0-9]*))*/,Nn=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function jn(t){var e;return(e=wn(t))?Nn.test(e.v)?e.v:'"'+e.v.replace(/"/g,'\\"')+'"':(e=fn(t))?e.v:(e=t.matchPattern(Sn))?e:null}function Tn(t){var e=t.pos,n=function(t){var e,n=t.pos;t.sp();var i="'"!==t.nextChar()&&'"'!==t.nextChar(),r=((e=i?t.matchPattern(An):e)?$n:jn)(t);if(null===r)return t.pos=n,null;if(t.sp(),!i||","!==t.nextChar()&&"}"!==t.nextChar())return t.matchString(":")?(t.sp(),null===(s=$n(t))?(t.pos=n,null):{t:Oe,k:r,v:s}):(t.pos=n,null);e||Sn.test(r)||t.error("Expected a valid reference, but found '"+r+"' instead.");var s={t:Oe,k:r,v:{t:Ne,n:r}};return e&&(s.p=!0),s}(t);if(null===n)return null;var i=[n];if(t.matchString(",")){n=Tn(t);return n?i.concat(n):(t.pos=e,null)}return i}function Vn(t){return fn(t)||("true"===(n=(e=t).remaining()).substr(0,4)?(e.pos+=4,{t:Se,v:"true"}):"false"===n.substr(0,5)?(e.pos+=5,{t:Se,v:"false"}):null)||wn(t)||function(t){if(!t.matchString("`"))return null;for(var e,n,i="",r=!1,s=[];!r;)(n=t.matchPattern(xn)||t.matchPattern(mn)||t.matchString("$")||t.matchString('"'))?'"'===n?i+='\\"':"\\`"===n?i+="`":"$"===n?t.matchString("{")?(s.push({t:ke,v:_n(i)}),i="",t.sp(),(e=$n(t))||t.error("Expected valid expression"),s.push({t:Pe,x:e}),t.sp(),t.matchString("}")||t.error("Expected closing '}' after interpolated expression")):i+="$":i+=n:(n=t.matchPattern(gn))?i+="\\u"+("000"+n.charCodeAt(1).toString(16)).slice(-4):r=!0;if(i.length&&s.push({t:ke,v:_n(i)}),t.matchString("`")||t.error("Expected closing '`'"),s.length){if(1===s.length)return s[0];for(var a,o=s.pop();a=s.pop();)o={t:Ie,s:"+",o:[a,o]};return{t:Pe,x:o}}return{t:ke,v:""}}(t)||function(t){var e=t.pos;if(t.sp(),!t.matchString("{"))return t.pos=e,null;var n=Tn(t);return t.sp(),t.matchString("}")?{t:Ee,m:n}:(t.pos=e,null)}(t)||function(t){var e=t.pos;if(t.sp(),!t.matchString("["))return t.pos=e,null;var n=qn(t,!0);return t.matchString("]")?{t:_e,m:n}:(t.pos=e,null)}(t)||qe(t);var e,n}var Pn,Mn=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null|Object|Number|String|Boolean)\b/,In=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/,Rn=/^(?:\@\.|\@|~\/|(?:\^\^\/(?:\^\^\/)*(?:\.\.\/)*)|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/,Bn=/^(key|index|keypath|rootpath|this|global|shared|context|event|node|local|style|helpers|last|macro)/;function Kn(t){var e,n=t.pos,i=t.matchPattern(Rn)||"",r=!i&&t.relaxedNames&&t.matchPattern(On)||t.matchPattern(Cn),s=i.length+(r&&r.length||0);if("@."===i&&(i="@",r=r?"this."+r:"this"),!r&&i&&(r=i,i=""),!r)return null;if("@"===i)if(Bn.test(r))if(r.indexOf("event")&&r.indexOf("node")||t.inEvent){if(!r.indexOf("context"))return t.pos=t.pos-(r.length-7),{t:Pe,x:{t:Ne,n:"@context"}}}else t.error("@event and @node are only valid references within an event directive");else t.error("Unrecognized special reference @"+r);return i||t.relaxedNames||!In.test(r)?!i&&Mn.test(r)?(e=Mn.exec(r)[0],t.pos=n+e.length,{t:Ce,v:e}):(e=(i||"")+at(r),t.matchString("(")&&(-1!==(i=e.lastIndexOf("."))&&"]"!==r[r.length-1]?0===i?(e=".",t.pos=n):(r=e.length,e=e.substr(0,i),t.pos=n+(s-(r-i))):--t.pos),{t:Ne,n:e.replace(/^this\./,"./").replace(/^this$/,".")}):(t.pos=n,null)}function Ln(t){return Vn(t)||Kn(t)||function(t){if(!t.matchString("("))return null;t.sp();var e=$n(t);return e||t.error(ln),t.sp(),t.matchString(")")||t.error(cn),{t:Pe,x:e}}(t)}function Dn(t){var e=Ln(t);if(!e)return null;for(;e;){var n=function(t){if(t.strictRefinement||t.sp(),t.matchString(".")){t.sp();var e=t.matchPattern(Sn);if(e)return{t:je,n:e};t.error("Expected a property name")}if(t.matchString("[")){t.sp();e=$n(t);return e||t.error(ln),t.sp(),t.matchString("]")||t.error("Expected ']'"),{t:je,x:e}}return null}(t);if(n)e={t:Te,x:e,r:n};else{if(!t.matchString("("))break;t.sp();n=qn(t,!0);t.sp(),t.matchString(")")||t.error(cn),e={t:Re,x:e},n&&(e.o=n)}}return e}!function(){for(var t="! ~ + - typeof".split(" "),e=Dn,n=0,i=t.length;n<i;n+=1)e=function(n,i){return function(t){var e;return(e=i(t))?e:t.matchString(n)?(t.sp(),(e=$n(t))||t.error(ln),{s:n,o:e,t:Ve}):null}}(t[n],e);Pn=e}();var Fn,zn=Pn;!function(){for(var t="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),e=zn,n=0,i=t.length;n<i;n+=1)e=function(r,s){return function(t){if(t.inUnquotedAttribute&&(">"===r||"/"===r))return s(t);var e,n,i=s(t);if(!i)return null;for(;;){if(e=t.pos,t.sp(),!t.matchString(r))return t.pos=e,i;if("in"===r&&/[a-zA-Z_$0-9]/.test(t.remaining().charAt(0)))return t.pos=e,i;if(t.sp(),!(n=s(t)))return t.pos=e,i;i={t:Ie,s:r,o:[i,n]}}}}(t[n],e);Fn=e}();var Un=Fn;function $n(t){if(!1!==t.allowExpressions)return function(t){var e=Un(t);if(!e)return null;var n=t.pos;if(t.sp(),!t.matchString("?"))return t.pos=n,e;t.sp();var i=$n(t);return i||t.error(ln),t.sp(),t.matchString(":")||t.error('Expected ":"'),t.sp(),(n=$n(t))||t.error(ln),{t:Me,o:[e,i,n]}}(t);var e=Kn(t);return t.sp(),e}function qn(t,e){var n,i=[],r=t.pos;do{t.sp(),e&&(n=t.matchPattern(An));var s=$n(t);if(null===s&&i.length)t.error(ln);else if(null===s)return t.pos=r,null}while(n&&(s.p=!0),i.push(s),t.sp(),t.matchString(","));return i}function Hn(t,e){var n=t.pos,i=$n(t);if(!i){var r=t.matchPattern(/^(\w+)/);return r?{t:Ne,n:r}:null}for(var s=0;s<e.length;s+=1)if(t.remaining().substr(0,e[s].length)===e[s])return i;return t.pos=n,Kn(t)}function Zn(t){var n,i=0;!function t(e,n){e.t===Ne&&C(e.n)&&(~n.indexOf(e.n)||n.unshift(e.n));var i=e.o||e.m;if(i)if(x(i))t(i,n);else for(var r=i.length;r--;)t(i[r],n);e.k&&e.t===Oe&&!C(e.k)&&t(e.k,n);e.x&&t(e.x,n);e.r&&t(e.r,n);e.v&&t(e.v,n)}(t,n=[]);t=r(t);return{r:n,s:function(t){for(var e=[],n=i-1;0<=n;n--)e.push("x$"+n);return e.length?"(function(){var "+e.join(",")+";return("+t+");})()":t}(t)};function r(t){if(C(t))return t;switch(t.t){case Se:case Ce:case xe:case Ae:return t.v;case ke:return JSON.stringify(String(t.v));case _e:return t.m&&Wn(t.m)?"[].concat("+a(t.m,"[","]",r)+")":"["+(t.m?t.m.map(r).join(","):"")+"]";case Ee:return t.m&&Wn(t.m)?"Object.assign({},"+a(t.m,"{","}",s)+")":"{"+(t.m?t.m.map(function(t){return t.k+":"+r(t.v)}).join(","):"")+"}";case Ve:return("typeof"===t.s?"typeof ":t.s)+r(t.o);case Ie:return r(t.o[0])+("in"===t.s.substr(0,2)?" "+t.s+" ":t.s)+r(t.o[1]);case Re:if(t.o&&Wn(t.o)){var e=i++;return"(x$"+e+"="+r(t.x)+").apply(x$"+e+","+r({t:_e,m:t.o})+")"}return r(t.x)+"("+(t.o?t.o.map(r).join(","):"")+")";case Pe:return"("+r(t.x)+")";case Te:return r(t.x)+r(t.r);case je:return t.n?"."+t.n:"["+r(t.x)+"]";case Me:return r(t.o[0])+"?"+r(t.o[1])+":"+r(t.o[2]);case Ne:return"_"+n.indexOf(t.n);default:throw new Error("Expected legal JavaScript")}}function s(t){return t.p?r(t.k):t.k+":"+r(t.v)}function a(t,n,i,r){t=t.reduce(function(t,e){return e.p?t.str+=(t.open?i+",":t.str.length?",":"")+r(e):t.str+=""+(t.str.length?t.open?",":","+n:n)+r(e),t.open=!e.p,t},{open:!1,str:""});return t.open&&(t.str+=i),t.str}}function Wn(t){for(var e=0;e<t.length;e++)if(t[e].p)return 1}function Gn(t,e){var n;if(t){for(;t.t===Pe&&t.x;)t=t.x;return t.t===Ne?~t.n.indexOf("@context")?e.x=Zn(t):e.r=t.n:(n=function(t){var e,n=[];for(;t.t===Te&&t.r.t===je;)(e=t.r).x?e.x.t===Ne?n.unshift(e.x):n.unshift(Zn(e.x)):n.unshift(e.n),t=t.x;return t.t===Ne?{r:t.n,m:n}:null}(t))?e.rx=n:e.x=Zn(t),e}}var Qn=/^[^\s"'>\/=(]+/,Yn=/^on/,Jn=/^on-([a-zA-Z\*\.$_]((?:[a-zA-Z\*\.$_0-9\-]|\\-)+))$/,Xn=/^(?:change|reset|teardown|update|construct|config|init|render|complete|unrender|detach|insert|destruct|attachchild|detachchild)$/,ti=/^as-([a-z-A-Z][-a-zA-Z_0-9]*)$/,ei=/^([a-zA-Z](?:(?!-in-out)[-a-zA-Z_0-9])*)-(in|out|in-out)$/,ni=/^((bind|class)-(([-a-zA-Z0-9_])+))$/,ii={lazy:{t:Fe,v:"l"},twoway:{t:Fe,v:"t"},"no-delegation":{t:74}},ri=/^[^\s"'=<>\/`]+/,si=/^[^\s"'=<>@\[\]()]*/,ai=/^\s+/,oi=/\\/g;function hi(t){var e=t.pos;if(/[=\/>\s]/.test(t.nextChar())||t.error("Expected `=`, `/`, `>` or whitespace"),t.sp(),!t.matchString("="))return t.pos=e,null;t.sp();var n=t.pos,i=t.sectionDepth,e=li(t,"'")||li(t,'"')||function(t){t.inAttribute=!0;var e=[],n=mi(t)||ui(t);for(;n;)e.push(n),n=mi(t)||ui(t);return e.length?(t.inAttribute=!1,e):null}(t);return null===e&&t.error("Expected valid attribute value"),t.sectionDepth!==i&&(t.pos=n,t.error("An attribute value must contain as many opening section tags as closing section tags")),e.length?1===e.length&&C(e[0])?rn(e[0]):e:""}function ui(t){var e,n=t.pos,i=t.matchPattern(ri);return i?(-1!==(e=Ge(i,t.tags.map(function(t){return t.open})))&&(i=i.substr(0,e),t.pos=n+i.length),i):null}function li(t,e){var n=t.pos;if(!t.matchString(e))return null;t.inAttribute=e;for(var i=[],r=mi(t)||ci(t,e);null!==r;)i.push(r),r=mi(t)||ci(t,e);return t.matchString(e)?(t.inAttribute=!1,i):(t.pos=n,null)}function ci(t,e){var n=t.remaining(),i=t.tags.map(function(t){return t.open});i.push(e);i=Ge(n,i);return-1===i&&t.error("Quoted attribute value must have a closing quote"),i?(t.pos+=i,n.substr(0,i)):null}function di(t){var e=function(t){var e,n,i,r;if(t.sp(),!(e=t.matchPattern(Qn)))return null;for(i=e.length,n=0;n<t.tags.length;n++)~(r=e.indexOf(t.tags[n].open))&&r<i&&(i=r);return i<e.length&&(t.pos-=e.length-i,!(e=e.substr(0,i)))?null:{n:e}}(t);if(!e)return null;if(n=ii[e.n])e.t=n.t,n.v&&(e.v=n.v),delete e.n,t.sp(),"="===t.nextChar()&&(e.f=hi(t));else if(i=ti.exec(e.n))e.n=i[1],e.t=Le,fi(t,e);else if(i=ei.exec(e.n))e.n=i[1],e.t=De,fi(t,e),e.v="in-out"===i[2]?"t0":"in"===i[2]?"t1":"t2";else if(i=Jn.exec(e.n))e.n=function(t){for(var e=[],n=0,i=0;i<t.length;i++)"-"===t[i]&&"\\"!==t[i-1]&&(e.push(t.substring(n,i).replace(oi,"")),n=i+1);return e.push(t.substring(n).replace(oi,"")),e}(i[1]),e.t=Ke,t.matchString("(")&&(e.a=Zn({t:_e,m:qn(t)}),t.matchString(")")||t.error("Expected closing ')'")),t.inEvent=!0,!function(t,e){var n=t.pos;t.matchString("=")||t.error("Missing required directive arguments");var i=t.matchString("'")||t.matchString('"');t.sp();var r=t.matchPattern(si);if(void 0!==r)if(i){if(t.sp(),t.matchString(i))return(e.f=r)||!0;t.pos=n}else{if(t.matchPattern(ai))return(e.f=r)||!0;t.pos=n}else t.pos=n}(t,e)?fi(t,e,!0):Xn.test(e.f)&&(t.pos-=e.f.length,t.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, complete, detach, insert, destruct, attachchild, detachchild)")),t.inEvent=!1;else if(i=ni.exec(e.n)){var n="bind"===i[2];e.n=n?i[3]:i[1],e.t=ve,fi(t,e,!1,!0),!e.f&&n&&(e.f=[{t:oe,r:i[3]}])}else{t.sp();var i="="===t.nextChar()?hi(t):null;if(e.f=null!=i?i:e.f,t.sanitizeEventAttributes&&Yn.test(e.n))return{exclude:!0};e.f=e.f||(""===e.f?"":0),e.t=ve}return e}function fi(t,e,n,i){var r,s,a;void 0===n&&(n=!1),void 0===i&&(i=!1),t.sp(),t.matchString("=")?(t.sp(),r=t.matchString('"')||t.matchString("'"),s=t.spreadArgs,t.spreadArgs=!0,t.inUnquotedAttribute=!r,a=i?Hn(t,[r||" ","/",">"]):{m:qn(t),t:_e},t.inUnquotedAttribute=!1,t.spreadArgs=s,r&&(t.sp(),t.matchString(r)!==r&&t.error("Expected matching quote '"+r+"'")),i?(Gn(a,i={t:oe}),e.f=[i]):e.f=Zn(a)):n&&t.error("Missing required directive arguments")}var pi={t:me,exclude:!0};function mi(t){var e,n;if(!1===t.interpolate[t.inside])return null;for(n=0;n<t.tags.length;n+=1)if(e=function(t,e){var n,i,r,s=t.pos;if(t.matchString("\\"+e.open)){if(0===s||"\\"!==t.str[s-1])return e.open}else if(!t.matchString(e.open))return null;if(n=function(t){if(!t.matchString("="))return null;var e=t.pos;t.sp();var n=t.matchPattern(ze);if(!n)return t.pos=e,null;if(!t.matchPattern(Ue))return null;var i=t.matchPattern(ze);return i?(t.sp(),t.matchString("=")?[n,i]:(t.pos=e,null)):(t.pos=e,null)}(t))return t.matchString(e.close)?(e.open=n[0],e.close=n[1],t.sortMustacheTags(),pi):null;if(t.sp(),t.matchString("/")){--t.pos;var a=t.pos;if(qe(t))t.pos=a;else{if(t.pos=a-e.close.length,t.inAttribute)return t.pos=s,null;t.error("Attempted to close a section that wasn't open")}}for(r=0;r<e.readers.length;r+=1)if(i=e.readers[r],n=i(t,e))return e.isStatic&&(n.s=1),t.includeLinePositions&&(n.q=t.getLinePos(s)),n;return t.pos=s,null}(t,t.tags[n]))return e;return t.inTag&&!t.inAttribute&&(e=di(t))?(t.sp(),e):void 0}var gi=/^(?:[a-zA-Z$_0-9]|\\\.)+(?:(?:(?:[a-zA-Z$_0-9]|\\\.)+)|(?:\[[0-9]+\]))*/,vi=/^as/i;function yi(t){var e,n=[],i=t.pos;if(t.sp(),e=bi(t)){for(e.x=Gn(e.x,{}),n.push(e),t.sp();t.matchString(",");)(e=bi(t))||t.error("Expected another alias."),e.x=Gn(e.x,{}),n.push(e),t.sp();return n}return t.pos=i,null}function bi(t){var e=t.pos;t.sp();var n=$n(t);if(!n)return t.pos=e,null;t.sp(),t.matchPattern(vi),t.sp();var i=t.matchPattern(gi);return i?{n:i,x:n}:(t.pos=e,null)}function wi(t,e){var n=t.pos;if(!t.matchString(e.open))return null;if(t.sp(),!t.matchString("/"))return t.pos=n,null;t.sp();var i=t.remaining(),r=i.indexOf(e.close);if(-1===r)return t.pos=n,null;i={t:ce,r:i.substr(0,r).split(" ")[0]};return t.pos+=r,t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),i}var xi={else:/^\s*else\s*/,elseif:/^\s*elseif\s+/,then:/^\s*then\s*/,catch:/^\s*catch\s*/},ki={else:60,elseif:61,then:62,catch:63};function _i(t,e,n){var i=t.pos;if(!t.matchString(e.open))return null;if(!t.matchPattern(xi[n]))return t.pos=i,null;i={t:ki[n]};return"elseif"===n?i.x=$n(t):"catch"!==n&&"then"!==n||(n=t.matchPattern(Sn))&&(i.n=n),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),i}var Ei={each:52,if:50,with:54,unless:51},Si=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,Ai=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,Ci=new RegExp("^("+b(Ei).join("|")+")\\b");var Oi=/^[ \t\f\r\n]*\r?\n/,Ni=/\r?\n[ \t\f\r\n]*$/;function ji(t,e){for(var n,i,r,s,a,o=1;o<t.length;o+=1)n=t[o],i=t[o-1],r=t[o-2],C(n)&&((a=i).t===pe||a.t===me)&&C(r)&&Ni.test(r)&&Oi.test(n)&&(t[o-2]=r.replace(Ni,"\n"),t[o]=n.replace(Oi,"")),e||(Ti(n)&&C(i)&&Ni.test(i)&&C(n.f[0])&&Oi.test(n.f[0])&&(t[o-1]=i.replace(Ni,"\n"),n.f[0]=n.f[0].replace(Oi,"")),C(n)&&Ti(i)&&C(s=ct(i.f))&&Ni.test(s)&&Oi.test(n)&&(i.f[i.f.length-1]=s.replace(Ni,"\n"),t[o]=n.replace(Oi,"")));return t}function Ti(t){return(t.t===ue||t.t===le)&&t.f}function Vi(t,e,n){var i;e&&C(i=t[0])&&((i=i.replace(e,""))?t[0]=i:t.shift()),n&&C(i=ct(t))&&((i=i.replace(n,""))?t[t.length-1]=i:t.pop())}var Pi=/[ \t\f\r\n]+/g,Mi=/^[ \t\f\r\n]+/,Ii=/[ \t\f\r\n]+$/,Ri=/^(?:\r\n|\r|\n)/,Bi=/(?:\r\n|\r|\n)$/,Ki=/(\n)?[ \t]*$/,Li=/[ \t]*\n/;function Di(t,e,n,i,r,s,a){if(!C(t)){var o,h;for(ji(t,a),o=t.length;o--;)((f=t[o]).exclude||e&&f.t===pe)&&t.splice(o,1);for(Vi(t,i?Mi:null,r?Ii:null),o=t.length;o--;){var u,l,c,d,f,p=h=!1;(f=t[o]).w&&(c=t[o-1],u=!0,"string"==typeof c&&(t[o-1]=c.replace(Ki,"$1")),f.f&&("string"==typeof f.f[0]&&(f.f[0]=f.f[0].replace(Li,"")),d=f.f.length-1,"string"==typeof f.f[d]&&(f.f[d]=f.f[d].replace(Ki,function(t,e){return(u=e)||""}))),l=t[o+1],u&&"string"==typeof l&&(t[o+1]=l.replace(Li,""))),f.f&&(c=f.t===de&&(s[f.e.toLowerCase()]||s[f.e]),d=n||c,!n&&c&&Vi(f.f,Ri,Bi),d||(l=t[o-1],c=t[o+1],(!l||C(l)&&Ii.test(l))&&(p=!0),(!c||C(c)&&Mi.test(c))&&(h=!0)),Di(f.f,e,d,p,h,s)),f.l&&(f.w&&f.l.forEach(function(t){return t.w=1}),Di(f.l,e,n,p,h,s),f.l.forEach(function(t){return t.l=1}),f.l.unshift(o+1,0),t.splice.apply(t,f.l),delete f.l),f.m&&(Di(f.m,e,n,p,h,s),f.m.length<1&&delete f.m),delete f.w}for(o=t.length;o--;)C(t[o])&&(C(t[o+1])&&(t[o]=t[o]+t[o+1],t.splice(o+1,1)),n||(t[o]=t[o].replace(Pi," ")),""===t[o]&&t.splice(o,1))}}var Fi=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/;function zi(t){return t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()})}var Ui=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,$i=/^[a-zA-Z_$][-a-zA-Z0-9_$]*/,qi=/^[\s\n\/>]/,Hi=/;\s*$/,Zi={exclude:!0},Wi={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]};var Gi=/^\s*(elseif|else|then|catch)\s*/;var Qi=/^\s*#\s*partial\s+/;function Yi(r,s){b(r).forEach(function(t){if(n=r,"s"===t&&w(n.r))return e=s,n=(i=r).s,i=r.r,void(e[n]||(e[n]=Xt(n,i.length)));var e,n,i=r[t];(w(t=i)||x(t))&&Yi(i,s)})}var Ji={},Xi=[function(t,e){var n,i=t.matchString(">")||t.matchString("yield"),r={t:">"===i?fe:we};if(!i)return null;if(t.sp(),">"===i||!(n=t.matchString("with"))){t.relaxedNames=t.strictRefinement=!0;var s=$n(t);if(t.relaxedNames=t.strictRefinement=!1,!s&&">"===i)return null;s&&(Gn(s,r),t.sp(),">"!==i&&(n=t.matchString("with")))}return t.sp(),!n&&">"!==i||((n=yi(t))&&n.length?r.z=n:((s=$n(t))&&(r.c={},Gn(s,r.c)),t.matchString(",")&&(n=yi(t))&&n.length&&(r.z=n)),">"===i||r.c||r.z||t.error("Expected a context or one or more aliases")),t.sp(),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),r},function(t,e){if(!t.matchString("&"))return null;t.sp();var n=$n(t);return n?(t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),Gn(n,e={t:he}),e):null},function(t,e){var n,i,r,s,a,o,h,u,l,c,d,f,p,m,g,v,y=!1,b=t.pos;if(t.matchString("^")){if(t.matchString("^/"))return t.pos=b,null;n={t:ue,f:[],n:51}}else{if(!t.matchString("#"))return null;n={t:ue,f:[]},t.matchString("partial")&&(t.pos=b-t.standardDelimiters[0].length,t.error("Partial definitions can only be at the top level of the template, or immediately inside components")),(a=t.matchString("await"))?(l=a,n.t=55):(a=t.matchPattern(Ci))&&(l=a,n.n=Ei[a])}t.sp(),"with"===a?(p=yi(t))&&(y=!0,n.z=p,n.t=19):"each"!==a||(p=bi(t))&&(n.z=[{n:p.n,x:{r:"."}}],v=p.x),y||((v=v||$n(t))||t.error("Expected expression"),"each"!==a||!t.matchString(",")||(m=yi(t))&&(n.z&&m.unshift(n.z[0]),n.z=m),"each"!==a&&a||!(u=t.matchPattern(Si))?"await"===a&&t.matchString("then")&&(t.sp(),c=!0,f=(f=t.matchPattern(Sn))||!0):(m=t.matchPattern(Ai))?n.i=u+","+m:n.i=u,!a&&v.n&&(l=v.n)),t.sp(),t.matchString("-")&&(n.w=1),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),t.sectionDepth+=1,r=n.f;do{if(g=t.pos,i=wi(t,e))l&&i.r!==l&&(a?(t.pos=g,t.error("Expected "+e.open+"/"+l+e.close)):i.r&&t.warn("Expected "+e.open+"/"+l+e.close+" but found "+e.open+"/"+i.r+e.close)),--t.sectionDepth,h=!0;else if(!y&&((i=_i(t,e,"elseif"))||(i=_i(t,e,"else"))||"await"===a&&((i=_i(t,e,"then"))||(i=_i(t,e,"catch"))))){51===n.n&&t.error("{{else}} not allowed in {{#unless}}"),s&&(60===i.t?t.error("there can only be one {{else}} block, at the end of a section"):61===i.t&&t.error("illegal {{elseif...}} after {{else}}")),o||!f&&c||d||("await"===a?(n.f=[w={f:r}],f?(w.t=62,!0!==f&&(w.n=f)):w.t=ue):o=[]);var w={t:ue,f:r=[]};60===i.t?("await"===a?(n.f.push(w),w.t=60):(w.n=51,o.push(w)),s=!0):61===i.t?(w.n=50,Gn(i.x,w),o.push(w)):62===i.t?(s&&t.error("{{then}} block must appear before any {{else}} block"),d&&t.error("{{then}} block must appear before any {{catch}} block"),c&&t.error("there can only be one {{then}} block per {{#await}}"),w.t=62,c=!0,i.n&&(w.n=i.n),n.f.push(w)):63===i.t&&(s&&t.error("{{catch}} block must appear before any {{else}} block"),d&&t.error("there can only be one {{catch}} block per {{#await}}"),w.t=63,d=!0,w.n=i.n,n.f.push(w))}else{if(!(i=t.read(er)))break;r.push(i)}}while(!h);return o&&(n.l=o),y||Gn(v,n),"await"!==a||!f&&c||d||s||(v={f:n.f},n.f=[v],f?(v.t=62,!0!==f&&(v.n=f)):v.t=ue),n.f.length||delete n.f,n},function(t,e){var n,i,r=t.pos;try{n=Hn(t,[e.close])}catch(t){i=t}if(!n){if("!"===t.str.charAt(r))return t.pos=r,null;if(i)throw i}if(!t.matchString(e.close)&&(t.error("Expected closing delimiter '"+e.close+"' after reference"),!n)){if("!"===t.nextChar())return null;t.error("Expected expression or legal reference")}return Gn(n,t={t:oe}),t},function(t,e){if(!t.matchString("!"))return null;var n=t.remaining().indexOf(e.close);return-1!==n?(t.pos+=n+e.close.length,{t:pe}):void 0}],tr=[function(t,e){var n=$n(t);return n?(t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),Gn(n,e={t:he}),e):null}],er=[mi,function(t){var e=t.pos;if(t.textOnlyMode||!t.matchString("\x3c!--"))return null;var n=t.remaining(),i=n.indexOf("--\x3e");return-1===i&&t.error("Illegal HTML - expected closing comment sequence ('--\x3e')"),n=n.substr(0,i),t.pos+=i+3,n={t:pe,c:n},t.includeLinePositions&&(n.q=t.getLinePos(e)),n},function(t){var e,n,i,r,s,a,o,h=t.pos;if(t.inside||t.inAttribute||t.textOnlyMode)return null;if(!t.matchString("<"))return null;if("/"===t.nextChar())return null;var u={};if(t.includeLinePositions&&(u.q=t.getLinePos(h)),t.matchString("!"))return u.t=18,t.matchPattern(/^doctype/i)||t.error("Expected DOCTYPE declaration"),u.a=t.matchPattern(/^(.+?)>/),u;if(o=t.matchString("#"))t.sp(),u.t=ge,u.n=t.matchPattern($i);else if(u.t=de,u.e=t.matchPattern(Ui),!u.e)return null;for(qi.test(t.nextChar())||t.error("Illegal tag name"),t.sp(),t.inTag=!0;e=mi(t);)!1!==e&&(u.m||(u.m=[]),u.m.push(e)),t.sp();if(t.inTag=!1,t.sp(),t.matchString("/")&&(n=!0),!t.matchString(">"))return null;var l,c,d,f,p,m,g,v=(u.e||u.n).toLowerCase(),y=t.preserveWhitespace;if(!n&&(o||!Ye[u.e.toLowerCase()])){o||(t.elementStack.push(v),v in t.interpolate&&(t.inside=v)),i=[],r=A(null);do{if(a=t.pos,!(g=t.remaining())){if("script"===t.inside){l=!0;break}t.error("Missing end "+(1<t.elementStack.length?"tags":"tag")+" ("+t.elementStack.reverse().map(function(t){return"</"+t+">"}).join("")+")")}o||function(t,e){e=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(e),t=Wi[t];return!e||!t||!~t.indexOf(e[1].toLowerCase())}(v,g)?!o&&(g=m=void 0,g=(p=t).pos,p=p.matchString("</")?(m=p.matchPattern(Fi))?p.inside&&m!==p.inside?(p.pos=g,null):{t:ye,e:m}:(p.pos-=2,void p.error("Illegal closing tag")):null)?(l=!0,(c=p.e.toLowerCase())!==v&&(t.pos=a,~t.elementStack.indexOf(c)||(d="Unexpected closing tag",Ye[c.toLowerCase()]&&(d+=" (<"+c+"> is a void element - it cannot contain children)"),t.error(d)))):o&&(c=t,d=u.n,f=void 0,f=c.pos,c.matchString("</")?(c.matchString("#"),c.sp(),c.matchString(d)?(c.sp(),!!c.matchString(">")||(c.pos=f,null)):(c.pos=f,null)):null)?l=!0:wi(t,f={open:t.standardDelimiters[0],close:t.standardDelimiters[1]})||function(t,e){var n=t.pos;if(t.matchString(e.open)){if(t.matchPattern(Gi))return!0;t.pos=n}}(t,f)?(l=!0,t.pos=a):(f=t.read(nr))?(r[f.n]&&(t.pos=a,t.error("Duplicate partial definition")),Di(f.f,t.stripComments,y,!y,!y,t.whiteSpaceElements),r[f.n]=f.f,s=!0):(f=t.read(er))?i.push(f):l=!0:l=!0}while(!l);i.length&&(u.f=i),s&&(u.p=r),t.elementStack.pop()}if(t.inside=null,t.sanitizeElements&&-1!==t.sanitizeElements.indexOf(v))return Zi;if(u.m&&"input"!==v&&"select"!==v&&"textarea"!==v&&"option"!==v){for(var b,w,x,k,_,E=u.m,S=0;S<E.length;)(_=E[S]).t===ve?0!==_.n.indexOf("class-")||_.f?0===_.n.indexOf("style-")&&C(_.f)?((w=w||[]).push(zi(_.n.slice(6))+": "+_.f+";"),E.splice(S,1)):"class"===_.n&&C(_.f)?((b=b||[]).push(_.f),E.splice(S,1)):"style"===_.n&&C(_.f)?((w=w||[]).push(_.f+(Hi.test(_.f)?"":";")),E.splice(S,1)):("class"===_.n?x=_:"style"===_.n?k=_:!~_.n.indexOf(":")&&"value"!==_.n&&"contenteditable"!==_.n&&C(_.f)&&(_.g=1),S++):((b=b||[]).push(_.n.slice(6)),E.splice(S,1)):S++;b?x&&C(x.f)?x.f+=" "+b.join(" "):E.unshift({t:ve,n:"class",f:b.join(" "),g:1}):x&&C(x.f)&&(x.g=1),w?k&&C(k.f)?k.f+="; "+w.join(" "):E.unshift({t:ve,n:"style",f:w.join(" "),g:1}):k&&C(k.f)&&(k.g=1)}return u},function(t){var e,n=t.remaining(),i=t.textOnlyMode?Ge(n,i=(i=t.tags.map(function(t){return t.open})).concat(t.tags.map(function(t){return"\\"+t.open}))):(e=t.inside?"</"+t.inside:"<",t.inside&&!t.interpolate[t.inside]?n.indexOf(e):(i=(i=t.tags.map(function(t){return t.open})).concat(t.tags.map(function(t){return"\\"+t.open})),!0===t.inAttribute?i.push('"',"'","=","<",">","`"):t.inAttribute?i.push(t.inAttribute):i.push(e),Ge(n,i)));return i?(-1===i&&(i=n.length),t.pos+=i,t.inside&&"textarea"!==t.inside||t.textOnlyMode?n.substr(0,i):rn(n.substr(0,i))):null}],nr=[function(t){var e,n,i=t.pos,r=t.standardDelimiters;if(!t.matchString(r[0]))return null;if(!t.matchPattern(Qi))return t.pos=i,null;(i=t.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-\/]*/))||t.error("expected legal partial name"),t.sp(),t.matchString(r[1])||t.error("Expected closing delimiter '"+r[1]+"'");for(var s=[],a=r[0],o=r[1];(e=wi(t,{open:a,close:o}))?("partial"!==e.r&&t.error("Expected "+a+"/partial"+o),n=!0):((e=t.read(er))||t.error("Expected "+a+"/partial"+o),s.push(e)),!n;);return{t:17,n:i,f:s}}],ir={pre:1,script:1,style:1,textarea:1},rr={textarea:!0,script:!0,style:!0,template:!0},sr=ae.extend({init:function(t,e){var n=e.tripleDelimiters||Ji.defaults.tripleDelimiters,i=e.staticDelimiters||Ji.defaults.staticDelimiters,r=e.staticTripleDelimiters||Ji.defaults.staticTripleDelimiters;this.standardDelimiters=e.delimiters||Ji.defaults.delimiters,this.tags=[{isStatic:!1,isTriple:!1,open:this.standardDelimiters[0],close:this.standardDelimiters[1],readers:Xi},{isStatic:!1,isTriple:!0,open:n[0],close:n[1],readers:tr},{isStatic:!0,isTriple:!1,open:i[0],close:i[1],readers:Xi},{isStatic:!0,isTriple:!0,open:r[0],close:r[1],readers:tr}],this.contextLines=e.contextLines||Ji.defaults.contextLines,this.sortMustacheTags(),this.sectionDepth=0,this.elementStack=[],this.interpolate=u({},rr,Ji.defaults.interpolate,e.interpolate),!0===e.sanitize&&(e.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),this.stripComments=!1!==e.stripComments,this.preserveWhitespace=!y(e.preserveWhitespace)&&e.preserveWhitespace,this.sanitizeElements=e.sanitize&&e.sanitize.elements,this.sanitizeEventAttributes=e.sanitize&&e.sanitize.eventAttributes,this.includeLinePositions=e.includeLinePositions,this.textOnlyMode=e.textOnlyMode,this.csp=e.csp,this.allowExpressions=e.allowExpressions,this.preserveStandaloneSections=this.preserveWhitespace&&e.preserveStandaloneSections,e.expression&&(this.converters=[$n]),e.attributes&&(this.inTag=!0),this.whiteSpaceElements=u({},e.preserveWhitespace,ir)},postProcess:function(t,e){var n=t[0];if(e.expression){e=Zn(n);return e.e=Xt(e.s,e.r.length),e}return t.length?(0<this.sectionDepth&&this.error("A section was left open"),Di(n.t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace,this.whiteSpaceElements,this.preserveStandaloneSections),!1!==this.csp&&(Yi(n.t,t={}),Yi(n.p||{},t),b(t).length&&(n.e=t)),n):{t:[],v:re}},converters:[function(t){for(var e=[],n=A(null),i=!1,r=t.preserveWhitespace;t.pos<t.str.length;){var s,a=t.pos;(s=t.read(nr))?(n[s.n]&&(t.pos=a,t.error("Duplicated partial definition")),Di(s.f,t.stripComments,r,!r,!r,t.whiteSpaceElements),n[s.n]=s.f,i=!0):(s=t.read(er))?e.push(s):t.error("Unexpected template content")}var o={v:re,t:e};return i&&(o.p=n),o}],sortMustacheTags:function(){this.tags.sort(function(t,e){return e.open.length-t.open.length})}});function ar(t,e){return new sr(t,e||{}).result}var or=["delimiters","tripleDelimiters","staticDelimiters","staticTripleDelimiters","csp","interpolate","preserveWhitespace","preserveStandaloneSections","sanitize","stripComments","contextLines","allowExpressions","attributes"],hr="Either preparse or use a ractive runtime source that includes the parser. ",ur="Either include a version of Ractive that can parse or convert your computation strings to functions.";function lr(t,e,n){t||$("Missing Ractive.parse - cannot parse "+e+". "+n)}function cr(t,e){lr(ar,'compution string "${str}"',ur);var n=ar(t,{expression:!0});return function(){return n.e.apply(e,n.r.map(function(t){return e.get(t)}))}}var dr={fromId:function(t,e){if(!N){if(e&&e.noThrow)return;throw new Error("Cannot retrieve template #"+t+" as Ractive is not running in a browser.")}var n;if(t=t&&t.replace(/^#/,""),!(n=N.getElementById(t))){if(e&&e.noThrow)return;throw new Error("Could not find template element with id #"+t)}if("SCRIPT"===n.tagName.toUpperCase())return"textContent"in n?n.textContent:n.innerHTML;if(!e||!e.noThrow)throw new Error("Template element with id #"+t+", must be a <script> element")},isParsed:function(t){return!C(t)},getParseOptions:function(n){return n.defaults&&(n=n.defaults),or.reduce(function(t,e){return t[e]=n[e],t},{})},parse:function(t,e){lr(ar,"template",hr);e=ar(t,e);return ne(e),e},parseFor:function(t,e){return this.parse(t,this.getParseOptions(e))}};function fr(t,e,n){var i,r,s,a,o;return k(n)&&(i=yt(n,t),s=n.toString(),a=!0),C(n)&&(i=cr(n,t),s=n),y(n)&&(C(n.get)?(i=cr(n.get,t),s=n.get):k(n.get)?(i=yt(n.get,t),s=n.get.toString(),a=!0):$("`%s` computation must have a `get()` method",e),k(n.set)&&(r=yt(n.set,t),o=n.set.toString())),{getter:i,setter:r,getterString:s,setterString:o,getterUseStack:a}}function pr(t,e){this.callback=t,this.parent=e,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.outrosComplete=!1,this.id=gr++,e&&e.addChild(this)}var mr,gr=0,vr=pr.prototype;function yr(t){!t.started||t.outros.length||t.outroChildren||(t.outrosComplete||(t.outrosComplete=!0,t.parent&&t.parent.decrementOutros(t),function t(e){return!e||e.outrosComplete&&t(e.parent)}(t)&&t.detachNodes()),t.intros.length||t.totalChildren||(k(t.callback)&&t.callback(),t.parent&&!t.notifiedTotal&&(t.notifiedTotal=!0,t.parent.decrementTotal())))}vr.add=function(t){var e=t.isIntro?this.intros:this.outros;t.starting=!0,e.push(t)},vr.addChild=function(t){this.children.push(t),this.totalChildren+=1,this.outroChildren+=1},vr.checkStart=function(){this.parent&&this.parent.started&&this.start()},vr.decrementOutros=function(){--this.outroChildren,yr(this)},vr.decrementTotal=function(){--this.totalChildren,yr(this)},vr.detachNodes=function(){for(var t=this.detachQueue.length,e=0;e<t;e++)this.detachQueue[e].detach();for(var t=this.children.length,n=0;n<t;n++)this.children[n].detachNodes();this.detachQueue=[]},vr.ready=function(){this.detachQueue.length&&function(t){var e,n,i=t.detachQueue,r=function t(e,n){var i=n;{if(i){for(var r=e.children.length;r--;)i=t(e.children[r],i);return i=e.outros.length?i.concat(e.outros):i}i=[];for(var s=e;s.parent;)s=s.parent;return t(s,i)}}(t);if(r.length){var s=i.length,a=0,o=t.detachQueue=[];t:for(;s--;){for(e=i[s].node,a=r.length;a--;)if((n=r[a].element.node)===e||n.contains(e)||e.contains(n)){o.push(i[s]);continue t}i[s].detach()}}else t.detachNodes()}(this)},vr.remove=function(t){dt(t.isIntro?this.intros:this.outros,t),yr(this)},vr.start=function(){this.started=!0,this.children.forEach(function(t){return t.start()}),this.intros.concat(this.outros).forEach(function(t){return t.start()}),yr(this)};var br={active:function(){return!!mr},start:function(){var e,t=new Promise(function(t){return e=t});return mr={previousBatch:mr,transitionManager:new pr(e,mr&&mr.transitionManager),fragments:[],tasks:[],immediateObservers:[],deferredObservers:[],promise:t},t},end:function(){!function t(){var e=mr.immediateObservers;mr.immediateObservers=[];e.forEach(wr);var n=mr.fragments.length;e=mr.fragments;mr.fragments=[];for(;n--;)e[n].update();mr.transitionManager.ready();e=mr.deferredObservers;mr.deferredObservers=[];e.forEach(wr);var i=mr.tasks;mr.tasks=[];for(n=0;n<i.length;n+=1)i[n]();if(mr.fragments.length||mr.immediateObservers.length||mr.deferredObservers.length||mr.tasks.length)return t()}(),mr.previousBatch?mr.transitionManager.checkStart():mr.transitionManager.start(),mr=mr.previousBatch},addFragment:function(t){ut(mr.fragments,t)},addFragmentToRoot:function(t){if(mr){for(var e=mr;e.previousBatch;)e=e.previousBatch;ut(e.fragments,t)}},addObserver:function(t,e){mr?ut(e?mr.deferredObservers:mr.immediateObservers,t):t.dispatch()},registerTransition:function(t){t._manager=mr.transitionManager,mr.transitionManager.add(t)},detachWhenReady:function(t){mr.transitionManager.detachQueue.push(t)},scheduleTask:function(t,e){var n;if(mr){for(n=mr;e&&n.previousBatch;)n=n.previousBatch;n.tasks.push(t)}else t()},promise:function(){if(!mr)return Promise.resolve();for(var t=mr;t.previousBatch;)t=t.previousBatch;return t.promise||Promise.resolve()}};function wr(t){t.dispatch()}var xr=[],kr=!1;function _r(){br.start();for(var t=performance.now(),e=0;e<xr.length;e+=1)xr[e].tick(t)||xr.splice(e--,1);br.end(),xr.length?requestAnimationFrame(_r):kr=!1}function Er(t){this.duration=t.duration,this.step=t.step,this.complete=t.complete,this.easing=t.easing,this.start=performance.now(),this.end=this.start+this.duration,this.running=!0,xr.push(this),kr||requestAnimationFrame(_r)}var Sr=Er.prototype;Sr.tick=function(t){if(!this.running)return!1;if(t>this.end)return this.step&&this.step(1),this.complete&&this.complete(1),!1;t-=this.start,t=this.easing(t/this.duration);return this.step&&this.step(t),!0},Sr.stop=function(){this.abort&&this.abort(),this.running=!1};var Ar={};function Cr(i){var r;return Ar[i]||(r=i?i+".":"",Ar[i]=function(t,e){var n;return C(t)?((n={})[r+t]=e,n):y(t)?r?function(t,e){var n,i={};if(!e)return t;for(n in e+=".",t)v(t,n)&&(i[e+n]=t[n]);return i}(t,i):t:void 0}),Ar[i]}var Or={},Nr=function(n){function o(t,e){n.call(this,t),this.ticker=null,t&&(this.key=ht(e),this.isReadonly=t.isReadonly,t.value&&(this.value=t.value[this.key],w(this.value)&&(this.length=this.value.length),this.adapt()))}n&&(o.__proto__=n);var t=o.prototype=Object.create(n&&n.prototype);return t.constructor=o,t.adapt=function(){var t=this,e=this.root.adaptors,n=e.length;if(this.rewrap=!1,0!==n){var i,r,s=this.wrapper?"newWrapperValue"in this?this.newWrapperValue:this.wrapperValue:this.value,a=this.root.ractive,o=this.getKeypath();if(this.wrapper){if(!(this.wrapperValue!==s&&(!this.wrapper.reset||!1===this.wrapper.reset(s))))return delete this.newWrapperValue,void(this.value=this.wrapper.get());this.wrapper.teardown(),delete this.wrapper,delete this.wrapperValue,delete this.newWrapperValue,void 0!==this.value&&((i=this.parent.value||this.parent.createBranch(this.key))[this.key]!==s&&(i[this.key]=s),this.value=s)}for(r=0;r<n;r+=1){var h=e[r];if(h.filter(s,o,a)){t.wrapper=h.wrap(a,s,o,Cr(o)),t.wrapperValue=s,(t.wrapper.__model=t).value=t.wrapper.get();break}}}},t.animate=function(t,e,n,i){var r,s=this;this.ticker&&this.ticker.stop();var a=new Promise(function(t){return r=t});return this.ticker=new Er({duration:n.duration,easing:n.easing,step:function(t){var e=i(t);s.applyValue(e),n.step&&n.step(t,e)},complete:function(){s.applyValue(e),n.complete&&n.complete(e),s.ticker=null,r(e)}}),a.stop=this.ticker.stop,a},t.applyValue=function(t,e){if(void 0===e&&(e=!0),!h(t,this.value)){if(this.boundValue&&(this.boundValue=null),this.parent.wrapper&&this.parent.wrapper.set)this.parent.wrapper.set(this.key,t),this.parent.value=this.parent.wrapper.get(),this.value=this.parent.value[this.key],this.wrapper&&(this.newWrapperValue=this.value),this.adapt();else if(this.wrapper)this.newWrapperValue=t,this.adapt();else{var n=this.parent.value||this.parent.createBranch(this.key);if(!c(n))return void Z("Attempted to set a property of a non-object '"+this.getKeypath()+"'");n[this.key]=t,this.value=t,this.adapt()}(this.dataModel||t&&t.viewmodel&&t.viewmodel.isRoot)&&Ot(this,t),w(t)?(this.length=t.length,this.isArray=!0):this.isArray=!1,this.links.forEach(Bt),this.children.forEach(Kt),this.deps.forEach(Bt),e&&this.notifyUpstream(),this.parent.isArray&&("length"===this.key?this.parent.length=t:this.parent.joinKey("length").mark())}},t.compute=function(t,e){var n=this.computed||(this.computed={});return n[t]?(n[t].signature=fr(this.root.ractive,t,e),n[t].mark()):n[t]=new Or.Computation(this,fr(this.root.ractive,t,e),t),n[t]},t.createBranch=function(t){t=l(t)?[]:{};return this.applyValue(t,!1),t},t.get=function(t,e){return this._link?this._link.get(t,e):(t&&Pt(this),e&&e.virtual?this.getVirtual(!1):Et(this,(e&&"unwrap"in e?!1!==e.unwrap:t)&&this.wrapper?this.wrapperValue:this.value,!e||!1!==e.shouldBind))},t.joinKey=function(t,e){var n,i,r;if(this._link)return e&&!1!==e.lastLink&&(_(t)||""===t)?this:this._link.joinKey(t);if(_(t)||""===t)return this;if(!(r=v(this.childByKey,t)?this.childByKey[t]:this.computed&&this.computed[t]))if(this.isRoot&&this.ractive&&(n=this.ractive.computed[t]))r=this.compute(t,n);else if(!this.isRoot&&this.root.ractive){var s,a=this.root.ractive.computed;for(s in a)(n=a[s]).pattern&&n.pattern.test(this.getKeypath()+"."+t)&&(r=this.compute(t,n))}return r||(r=new o(this,t),this.children.push(r),this.childByKey[t]=r,"data"!==t||(i=this.retrieve())&&i.viewmodel&&i.viewmodel.isRoot&&(r.link(i.viewmodel,"data"),this.dataModel=i)),!r._link||e&&!1===e.lastLink?r:r._link},t.mark=function(t){if(this._link)return this._link.mark(t);var e=this.value,n=this.retrieve();(this.dataModel||n&&n.viewmodel&&n.viewmodel.isRoot)&&Ot(this,n),!t&&h(n,e)||(this.value=n,this.boundValue&&(this.boundValue=null),e===n&&!this.rewrap||(this.wrapper&&(this.newWrapperValue=n),this.adapt()),w(n)?(this.length=n.length,this.isArray=!0):this.isArray=!1,this.children.forEach(t?Lt:Kt),this.links.forEach(Dt),this.deps.forEach(Bt))},t.merge=function(t,e){e=gt(this.value===t?function(t){for(var e=[],n=0;n<t.length;n++)e[n]=(t.childByKey[n]||{}).value;return e}(this):this.value,t,e);this.parent.value[this.key]=t,this.shuffle(e,!0)},t.retrieve=function(){return this.parent.value?this.parent.value[this.key]:void 0},t.set=function(t){this.ticker&&this.ticker.stop(),this.applyValue(t)},t.shuffle=function(t,e){Ct(this,t,!1,e)},t.source=function(){return this},t.teardown=function(){var e=this;this._link&&(this._link.teardown(),this._link=null),this.children.forEach($t),this.wrapper&&this.wrapper.teardown(),this.computed&&b(this.computed).forEach(function(t){return e.computed[t].teardown()})},o}(kt);var jr={},Tr=function(i){function t(t,e,n){i.call(this,null,"@"+e),this.key="@"+e,this.value=t,this.isRoot=!0,(this.root=this).adaptors=[],this.ractive=n}i&&(t.__proto__=i);var e=t.prototype=Object.create(i&&i.prototype);return e.constructor=t,e.getKeypath=function(){return this.key},e.retrieve=function(){return this.value},t}(Nr),Vr=new Tr(jr,"shared"),Pr=new Tr(T,"global");function Mr(t,e){var n=t;if("."===e)return t.findContext();if("~"===e[0])return t.ractive.viewmodel.joinAll(ot(e.slice(2)));if("."===e[0]||"^"===e[0]){for(var i=t,r=e.split("/"),s="^^"===r[0];i&&!i.context;)i=Ir(i);for(var a=i&&i.context;i&&"^^"===r[0];){for(r.shift(),i=i.isIteration?i.parent.parent:Ir(i);i&&!i.context;)i=Ir(i);a=i&&i.context}if(!a&&s)throw new Error("Invalid context parent reference ('"+e+"'). There is not context at that level.");for(;"."===r[0]||".."===r[0];)".."===r.shift()&&(a=a.parent);return"."===(e=r.join("/"))[0]&&(e=e.slice(1)),a.joinAll(ot(e))}var o=ot(e);if(o.length){var h=o.shift();if("@"===h[0]){if("@this"===h||"@"===h)return t.ractive.viewmodel.getRactiveModel().joinAll(o);if("@index"===h||"@key"===h){o.length&&Br(h);s=Rr(t);return s&&s["get"+("i"===h[1]?"Index":"Key")]()}if("@last"===h){var u=Rr(t);return u&&u.parent.getLast()}if("@global"===h)return Pr.joinAll(o);if("@shared"===h)return Vr.joinAll(o);if("@keypath"===h||"@rootpath"===h){for(var l="r"===e[1]?t.ractive.root:null,c=t;c&&(!c.context||c.isRoot&&c.ractive.component&&(l||!c.ractive.isolated));)c=c.isRoot?c.componentParent:c.parent;return c.getKeypath(l)}if("@context"===h)return new Tr(t.getContext(),"context").joinAll(o);if("@local"===h)return t.getContext()._data.joinAll(o);if("@style"===h)return t.ractive.constructor._cssModel.joinAll(o);if("@helpers"===h)return t.ractive.viewmodel.getHelpers().joinAll(o);if("@macro"!==h)throw new Error("Invalid special reference '"+h+"'");u=function(t){var e=t;for(;e;){if(e.owner.handle)return e.owner.handle;e=Ir(e)}}(t);return u?new Tr(u,"macro").joinAll(o):void 0}if(h&&!o.length){var d=t.ractive.viewmodel.getHelpers();if(d.has(h))return d.joinKey(h)}for(var f,u=(u=function(t){for(var e=t;e&&!e.context&&!e.aliases;)e=e.parent;return e}(t))&&u.context||t.findContext(),p=!1,m=t.ractive.warnAboutAmbiguity,g=0;t;){if(t.isIteration&&(h===t.parent.keyRef?f=t.getKey():h===t.parent.indexRef&&(f=t.getIndex()),f&&o.length&&Br(h)),!(f=!f&&t.aliases&&v(t.aliases,h)?t.aliases[h]:f)&&t.context&&t.context.has(h)&&(f=t.context.joinKey(h),p?m&&Z("'"+e+"' resolved but is ambiguous and will create a mapping to a parent component."):m&&g&&Z("'"+e+"' resolved but is ambiguous.")),f)return p&&(f=n.ractive.viewmodel.createLink(h,f,h,{implicit:!0})),f=0<o.length&&k(f.joinAll)?f.joinAll(o):f;t.context&&!t.aliases&&(g=1),t.ractive.isolated||t.owner&&t.owner.containerFragment||!(t.componentParent||!t.parent&&t.ractive.component)?t=t.parent:(t=t.componentParent||t.ractive.component.up,p=!0)}d=n.ractive;return d.resolveInstanceMembers&&"data"!==h&&h in d?d.viewmodel.getRactiveModel().joinKey(h).joinAll(o):(m&&Z("'"+e+"' is ambiguous and did not resolve."),u.joinKey(h).joinAll(o))}}function Ir(t){return t&&(!t.ractive.isolated&&!(t.owner&&t.owner.containerFragment)&&(t.componentParent||!t.parent&&t.ractive.component)||t.parent)}function Rr(t){for(var e,n=t;!n.isIteration&&(e=Ir(n));)n=e;return n.isIteration&&n}function Br(t){throw new Error("An index or key reference ("+t+") cannot have child properties")}var Kr={};function Lr(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];t=t.fragment||t._fakeFragment||(t._fakeFragment=new Fr(t));return t.getContext.apply(t,e)}function Dr(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return this.ctx||(this.ctx=new Kr.Context(this)),t.unshift(A(this.ctx)),u.apply(null,t)}var Fr=function(t){this.ractive=t};Fr.prototype.findContext=function(){return this.ractive.viewmodel};var zr=Fr.prototype;function Ur(t){for(var e=t;e&&!e.context;)e=e.parent;return e||t&&t.ractive.fragment}zr.getContext=Dr,zr.find=zr.findComponent=zr.findAll=zr.findAllComponents=B;var $r=!1;function qr(t,e){var n=$r,i=e&&e.deep,r=e&&e.shuffle,s=br.start();e&&"keep"in e&&($r=e.keep);for(var a=t.length;a--;){var o=t[a][0],h=t[a][1],u=t[a][2];if(!o)throw br.end(),new Error("Failed to set invalid keypath '"+u+"'");if(i)!function t(e,n){var i=e.get(!1,Gr);if(null==i||!y(n))return e.set(n);if(!y(i))return e.set(n);for(var r in n)v(n,r)&&t(e.joinKey(r),n[r])}(o,h);else if(r){var l=h,u=o.get(),l=l||u;if(_(u))o.set(l);else{if(!w(u)||!w(l))throw br.end(),new Error("You cannot merge an array with a non-array");u=function(e){if(!0===e)return null;if(k(e))return e;if(C(e))return Qr[e]||(Qr[e]=function(t){return t[e]});throw new Error("If supplied, options.compare must be a string, function, or true")}(r);o.merge(l,u)}}else o.set(h)}return br.end(),$r=n,1===t.length?s.then(function(){return t[0][1]}):s}var Hr=/\*/;function Zr(t,e,n,i){if(!n&&("."===e[0]||"^"===e[1]))return Z("Attempted to set a relative keypath from a non-relative context. You can use a context object to set relative keypaths."),[];var r=ot(e),n=n||t.viewmodel;return Hr.test(e)?n.findMatches(r):n!==t.viewmodel||!t.component||t.isolated||n.has(r[0])||"@"===e[0]||!e[0]||i?[n.joinAll(r)]:[Mr(t.fragment||new Fr(t),e)]}function Wr(t,n,e,i){var r=[];if(x(n))for(var s in n)!function(e){v(n,e)&&r.push.apply(r,Zr(t,e,null,i).map(function(t){return[t,n[e],e]}))}(s);else r.push.apply(r,Zr(t,n,null,i).map(function(t){return[t,e,n]}));return r}var Gr={virtual:!1};var Qr={};var Yr="Cannot add to a non-numeric value";function Jr(t,e,n,i){if(!C(e)||!l(n))throw new Error("Bad arguments");return qr(Wr(t,e,n,i&&i.isolated).map(function(t){var e=t[0],n=t[1],t=e.get();if(!l(n)||!l(t))throw new Error(Yr);return[e,t+n]}))}function Xr(t){t=Promise.resolve(t);return f(t,"stop",{value:B}),t}var ts=R.linear;function es(t,e,n,i){var r,s;r=t,i={easing:(s=(a=(a=i)||{}).easing?k(a.easing)?a.easing:r.easing[a.easing]:s)||ts,duration:"duration"in a?a.duration:400,complete:a.complete||B,step:a.step||B,interpolator:a.interpolator};var a=e.get();if(h(a,n))return i.complete(i.to),Xr(n);t=X(a,n,t,i.interpolator);return t?e.animate(a,n,i,t):(br.start(),e.set(n),br.end(),Xr(n))}function ns(t,e){t.event&&t._eventQueue.push(t.event),t.event=e}function is(t){t._eventQueue.length?t.event=t._eventQueue.pop():t.event=null}var rs={},ss={};function as(t,e){var n=e?rs:ss;if(n[t])return n[t];var i=t.split("."),r=[],s=!1;e&&(i.unshift("this"),s=!0);for(var a=Math.pow(2,i.length)-(e?1:0),o=0;o<a;o++){for(var h=[],u=0;u<i.length;u++)h.push(1&o>>u?"*":i[u]);r.unshift(h.join("."))}return s&&(2<i.length?r.push.apply(r,as(t,!1)):(r.push("*"),r.push(t))),n[t]=r}function os(t,e,n,i){if(void 0===i&&(i=[]),e)return n.name=e,i.unshift(n),function t(e,n,i,r,s){void 0===s&&(s=!1);var a=!0;if(s||e._nsSubs){ns(e,i);for(var o=n.length;o--;)n[o]in e._subs&&(a=hs(e,e._subs[n[o]],i,r)&&a);is(e)}e.parent&&a&&(s&&e.component&&(s=e.component.name+"."+n[n.length-1],n=as(s,!1),i&&!i.component&&(i.component=e)),a=t(e.parent,n,i,r));return a}(t,t._nsSubs?as(e,!0):["*",e],n,i,!0)}function hs(t,e,n,i){for(var r=null,s=!1,a=0,o=(e=e.slice()).length;a<o;a+=1)e[a].off||!1!==e[a].handler.apply(t,i)||(s=!0);return n&&s&&(r=n.event)&&(r.preventDefault&&r.preventDefault(),r.stopPropagation&&r.stopPropagation()),!s}function us(t){this.event=t,this.method="on"+t}function ls(t,e){return t[e._guid]||(t[e._guid]=[])}us.prototype.fire=function(t,e){var n=Lr(t),i=this.method;t[i]&&(e?t[i](n,e):t[i](n)),os(t,this.event,n,e?[e,t]:[t])};var cs=function(t){this.hook=new us(t),this.inProcess={},this.queue={}},ds=cs.prototype;ds.begin=function(t){this.inProcess[t._guid]=!0},ds.end=function(t){var e=t.parent;e&&this.inProcess[e._guid]?ls(this.queue,e).push(t):function t(e,n){var i=ls(e.queue,n);for(e.hook.fire(n);i.length;)t(e,i.shift());delete e.queue[n._guid]}(this,t),delete this.inProcess[t._guid]};var fs={};function ps(t,e){var n=[];return function e(t,n,i,r){{var s;t.isAnchor?n&&t.name!==n||i.push(t):t.items?t.items.forEach(function(t){return e(t,n,i,r)}):t.iterations?t.iterations.forEach(function(t){return e(t,n,i,r)}):!t.fragment||t.component&&t.fragment.ractive!==r?t.instance&&t.instance.fragment&&(s=[],e(t.instance.fragment,n,s,r),s.forEach(function(t){return t.ractive===r&&i.push(t)})):e(t.fragment,n,i,r)}}(t,e=void 0===e?null:e,n,t.ractive),n}function ms(t,e){var e=ps(t.fragment,e=void 0===e?null:e),i={},r=t._children.byName;e.forEach(function(t){var e=t.name;e in i||(i[e]=0);var n=i[e],n=(r[e]||[])[n];n&&n.lastBound!==t&&(n.lastBound&&n.lastBound.removeChild(n),t.addChild(n)),i[e]++})}function gs(){br.addFragment(this.instance.fragment)}function vs(){if(this.anchor)return this.anchor.findNextNode()}function ys(t,e){(C(this.computed[t]=e)||k(e))&&(e=this.computed[t]={get:e});var n=ot(t);if(!~t.indexOf("*")){t=n.pop();return this.viewmodel.joinAll(n).compute(t,e)}e.pattern=new RegExp("^"+n.map(function(t){return t.replace(/\*\*/g,"(.+)").replace(/\*/g,"((?:\\\\.|[^\\.])+)")}).join("\\.")+"$")}function bs(t,e,n){for(void 0===e&&(e=!0);t&&(t.type!==de||n&&t.name!==n)&&(!e||t.type!==be&&t.type!==ge);)t=t.owner||(t.component||t.yield?t.containerFragment||t.component.up:t.parent||t.up||void 0);return t}function ws(t,e,n){var i=[],n=function(t,e,n){switch(e){case"splice":for(void 0!==n[0]&&n[0]<0&&(n[0]=t+Math.max(n[0],-t)),_(n[0])&&(n[0]=0);n.length<2;)n.push(t-n[0]);return d(n[1])||(n[1]=t-n[0]),n[1]=Math.min(n[1],t-n[0]),n;case"sort":case"reverse":return null;case"pop":return t?[t-1,1]:[0,0];case"push":return[t,0].concat(n);case"shift":return[0,t?1:0];case"unshift":return[0,0].concat(n)}}(t,e,n);if(!n)return null;var r,s=n.length-2-n[1],a=Math.min(t,n[0]),o=a+n[1];for(i.startIndex=a,r=0;r<a;r+=1)i.push(r);for(;r<o;r+=1)i.push(-1);for(;r<t;r+=1)i.push(r+s);return i.touchedFrom=0!=s?n[0]:t,i}["construct","config","attachchild","detach","detachchild","insert","complete","reset","render","unrendering","unrender","teardown","destruct","update"].forEach(function(t){fs[t]=new us(t)}),fs.init=new cs("init");var xs=Array.prototype;function ks(a){function i(t,e){var n=t.get();if(!w(n)){if(_(n)){var n=[],i=xs[a].apply(n,e),r=br.start().then(function(){return i});return t.set(n),br.end(),r}throw new Error("shuffle array method "+a+" called on non-array at "+t.getKeypath())}var r=ws(n.length,a,e),s=xs[a].apply(n,e),e=br.start().then(function(){return s});return e.result=s,r?t.shuffle?t.shuffle(r):t.mark():t.set(s),br.end(),e}return{path:function(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];return i(this.viewmodel.joinAll(ot(t)),e)},model:i}}function _s(t,e,n){e.parent&&e.parent.wrapper&&e.parent.adapt();var i=br.start();return e.mark(n&&n.force),e.notifyUpstream(),br.end(),fs.update.fire(t,e),i}function Es(t,e){this.fragment=t,this.element=e||bs(t),this.node=this.element&&this.element.node,this.ractive=t.ractive,this.root=this}var Ss=ks("push").model,As=ks("pop").model,Cs=ks("shift").model,Os=ks("unshift").model,Ns=ks("sort").model,js=ks("splice").model,Ts=ks("reverse").model,Vs={},Ps=function(e){function t(t){e.call(this,null,null),this.isRoot=!0,(this.root=this).value={},this.ractive=t.ractive,this.adaptors=[],this.context=t.context}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.getKeypath=function(){return"@context.data"},n.rebound=function(){},t}(Nr),Ms=Es.prototype,Is={decorators:{},_data:{}};function Rs(t,e,n){var i=[];if(x(e))for(var r in e)v(e,r)&&i.push([Bs(t,r).model,e[r]]);else i.push([Bs(t,e).model,n]);return i}function Bs(t,e){t=t.fragment;return C(e)?{model:Mr(t,e),instance:t.ractive}:{model:t.findContext(),instance:e}}function Ks(t,e){return t.events&&t.events.find&&t.events.find(function(t){return~t.template.n.indexOf(e)})}Is.decorators.get=function(){var e={};return this.element&&this.element.decorators.forEach(function(t){return e[t.name]=t.handle}),e},Is._data.get=function(){return this.model||(this.root.model=new Ps({ractive:this.ractive,context:this.root}))},Ms.add=function(t,e,n){var i=d(e)?+e:1,n=y(e)?e:n;return qr(Rs(this,t,i).map(function(t){var e=t[0],n=t[1],t=e.get();if(!l(n)||!l(t))throw new Error("Cannot add non-numeric value");return[e,t+n]}),n)},Ms.animate=function(t,e,n){t=Bs(this,t).model;return es(this.ractive,t,e,n)},Ms.find=function(t,e){return this.fragment.find(t,e)},Ms.findAll=function(t,e){var n=[];return(e=e||{}).result=n,this.fragment.findAll(t,e),n},Ms.findAllComponents=function(t,e){var n=[];return(e=e||{}).result=n,this.fragment.findAllComponents(t,e),n},Ms.findComponent=function(t,e){return this.fragment.findComponent(t,e)},Ms.get=function(t){if(!t)return this.fragment.findContext().get(!0);t=Bs(this,t).model;return t?t.get(!0):void 0},Ms.getParent=function(t){var e=this.fragment;if((e=!e.parent&&t?e.componentParent:e.context?Ur(e.parent):(e=Ur(e.parent))&&(!e.parent&&t?e.componentParent:Ur(e.parent)))&&e!==this.fragment)return e.getContext()},Ms.hasListener=function(t,e){var n,i=!this.fragment.owner.component&&this.element||this.fragment.owner;do{if((n=i.component||i).template.t===de&&Ks(n,t))return!0}while((i=(i=i.up&&i.up.owner)&&i.component?i.component:i)&&e)},Ms.link=function(t,e){var n=Bs(this,t).model,i=Bs(this,e).model,e=br.start();return i.link(n,t),br.end(),e},Ms.listen=function(t,e){var n=this.element;return n.on(t,e),{cancel:function(){n.off(t,e)}}},Ms.observe=function(t,e,n){return void 0===n&&(n={}),(n=x(t)?e||{}:n).fragment=this.fragment,this.ractive.observe(t,e,n)},Ms.observeOnce=function(t,e,n){return void 0===n&&(n={}),(n=x(t)?e||{}:n).fragment=this.fragment,this.ractive.observeOnce(t,e,n)},Ms.pop=function(t){return As(Bs(this,t).model,[])},Ms.push=function(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];return Ss(Bs(this,t).model,e)},Ms.raise=function(t,e){for(var n=[],i=arguments.length-2;0<i--;)n[i]=arguments[i+2];for(var r,s=this.element;s;){if(r=Ks(s=s.component?s.component:s,t))return r.fire(r.element.getContext(e||{},!e||"original"in e?{}:{original:{}}),n);s=s.up&&s.up.owner}},Ms.readLink=function(t,e){return this.ractive.readLink(this.resolve(t),e)},Ms.resolve=function(t,e){var n=Bs(this,t),i=n.model,n=n.instance;return i?i.getKeypath(e||n):t},Ms.reverse=function(t){return Ts(Bs(this,t).model,[])},Ms.set=function(t,e,n){return qr(Rs(this,t,e),n)},Ms.shift=function(t){return Cs(Bs(this,t).model,[])},Ms.splice=function(t,e,n){for(var i=[],r=arguments.length-3;0<r--;)i[r]=arguments[r+3];return i.unshift(e,n),js(Bs(this,t).model,i)},Ms.sort=function(t){return Ns(Bs(this,t).model,[])},Ms.subtract=function(t,e,n){var i=d(e)?e:1,n=y(e)?e:n;return qr(Rs(this,t,i).map(function(t){var e=t[0],n=t[1],t=e.get();if(!l(n)||!l(t))throw new Error("Cannot add non-numeric value");return[e,t-n]}),n)},Ms.toggle=function(t,e){t=Bs(this,t).model;return qr([[t,!t.get()]],e)},Ms.unlink=function(t){var e=Bs(this,t).model,t=br.start();return e.owner&&e.owner._link&&e.owner.unlink(),br.end(),t},Ms.unlisten=function(t,e){this.element.off(t,e)},Ms.unshift=function(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];return Os(Bs(this,t).model,e)},Ms.update=function(t,e){return _s(this.ractive,Bs(this,t).model,e)},Ms.updateModel=function(t,e){var n=Bs(this,t).model,t=br.start();return n.updateFromBindings(e),br.end(),t},Ms.isBound=function(){return!!this.getBindingModel(this).model},Ms.getBindingPath=function(t){var e=this.getBindingModel(this),n=e.model,e=e.instance;if(n)return n.getKeypath(t||e)},Ms.getBinding=function(){var t=this.getBindingModel(this).model;if(t)return t.get(!0)},Ms.getBindingModel=function(t){t=t.element;return{model:t.binding&&t.binding.model,instance:t.up.ractive}},Ms.setBinding=function(t){return qr([[this.getBindingModel(this).model,t]])},Object.defineProperties(Ms,Is),Es.forRactive=Lr,Kr.Context=Es;var Ls=N&&N.querySelector;function Ds(t){var e;if(t=C(t)&&Ls?Ls.call(document,t):t)return t._ractive?t._ractive.proxy.getContext():(e=t.__ractive_instances__)?1===e.length?Lr(e[0]):void 0:Ds(t.parentNode)}var Fs,zs,Us,$s,qs,Hs,Zs,Ws,Gs,Qs="http://www.w3.org/1999/xhtml",Ys="http://www.w3.org/2000/svg",Js={html:Qs,mathml:"http://www.w3.org/1998/Math/MathML",svg:Ys,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns"},Xs=j&&"registerElement"in N;function ta(t){return Xs?t:{is:t}}function ea(){return N.createDocumentFragment()}function na(t){var e;if(t&&"boolean"!=typeof t){if(!O||!N||!t)return null;if(t.nodeType)return t;if(C(t)){if(!(e=N.getElementById(t))&&N.querySelector)try{e=N.querySelector(t)}catch(t){}if(e&&e.nodeType)return e}return t[0]&&t[0].nodeType?t[0]:null}}if(Fs=P?function(t,e,n){return e&&e!==Qs?n?N.createElementNS(e,t,ta(n)):N.createElementNS(e,t):n?N.createElement(t,ta(n)):N.createElement(t)}:function(t,e,n){if(e&&e!==Qs)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://ractive.js.org/support/#svgs for more information";return n?N.createElement(t,ta(n)):N.createElement(t)},j){for(Us=Fs("div"),Gs=function(n){return function(t,e){return t[n](e)}},Zs=($s=["matches","matchesSelector"]).length;Zs--&&!zs;)if(Us[qs=$s[Zs]])zs=Gs(qs);else for(Ws=M.length;Ws--;)if(Hs=M[Zs]+qs.substr(0,1).toUpperCase()+qs.substring(1),Us[Hs]){zs=Gs(Hs);break}zs=zs||function(t,e){var n=t.parentNode;n||(Us.innerHTML="",n=Us,t=t.cloneNode(),Us.appendChild(t));for(var i=n.querySelectorAll(e),r=i.length;r--;)if(i[r]===t)return!0;return!1}}else zs=null;function ia(t){return t&&"unknown"!=typeof t.parentNode&&t.parentNode&&t.parentNode.removeChild(t),t}function ra(t){return null==t||d(t)&&isNaN(t)||!t.toString?"":""+t}function sa(t){return ra(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function aa(t,e){for(var n=e;n;){if(n===t||n.owner===t)return 1;n=n.target||n.parent}}var oa=function(t,e,n,i){this.context=i.context||t,this.callback=n,this.ractive=t,this.keypath=i.keypath,this.options=i,e&&this.resolved(e),k(i.old)&&(this.oldContext=A(t),this.oldFn=i.old),!1!==i.init?(this.dirty=!0,this.dispatch()):ua(this),this.dirty=!1},ha=oa.prototype;function ua(e,n){n=n&&e.model?e.model.get():e.newValue;try{e.oldValue=e.oldFn?e.oldFn.call(e.oldContext,void 0,n,e.keypath):n}catch(t){Z("Failed to execute observer oldValue callback for '"+this.keypath+"': "+(t.message||t)),e.oldValue=n}}function la(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return t.map(st).join(".")}ha.cancel=function(){this.cancelled=!0,this.model?this.model.unregister(this):this.resolver.unbind(),dt(this.ractive._observers,this)},ha.dispatch=function(){if(!this.cancelled){try{this.callback.call(this.context,this.newValue,this.oldValue,this.keypath)}catch(t){Z("Failed to execute observer callback for '"+this.keypath+"': "+(t.message||t))}ua(this,!0),this.dirty=!1}},ha.handleChange=function(){var t,e=this;this.dirty?this.newValue=this.model.get():h(t=this.model.get(),this.oldValue)||(this.newValue=t,this.options.strict&&this.newValue===this.oldValue||(br.addObserver(this,this.options.defer),this.dirty=!0,this.options.once&&br.scheduleTask(function(){return e.cancel()})))},ha.rebind=function(t,e){var n=this;if((t=Qt(this.keypath,t,e))===this.model)return!1;this.model&&this.model.unregister(this),t&&t.addShuffleTask(function(){return n.resolved(t)})},ha.resolved=function(t){this.model=t,this.oldValue=void 0,this.newValue=t.get(),t.register(this)};var ca=/\*+/g,da=function(t,e,n,i,r){var s=this;this.context=r.context||t,this.ractive=t,this.baseModel=e,this.keys=n,this.callback=i;var a=n.join("\\.").replace(ca,"(.+)"),i=this.baseKeypath=e.getKeypath(t);this.pattern=new RegExp("^"+(i?i+"\\.":"")+a+"$"),this.recursive=1===n.length&&"**"===n[0],this.recursive&&(this.keys=["*"]),r.old&&(this.oldContext=A(t),this.oldFn=r.old),this.oldValues={},this.newValues={},this.defer=r.defer,this.once=r.once,this.strict=r.strict,this.dirty=!1,this.changed=[],this.cache=[],this.partial=!1,this.links=r.links,e.findMatches(this.keys).forEach(function(t){s.newValues[t.getKeypath(s.ractive)]=t.get()}),!1!==r.init?this.dispatch():pa(this,this.newValues),e.registerPatternObserver(this)},fa=da.prototype;function pa(i,r,t){var s=i.oldValues;i.oldFn?(t||(i.oldValues={}),b(r).forEach(function(t){var e=[s[t],r[t],t],n=i.pattern.exec(t);n&&e.push.apply(e,n.slice(1)),i.oldValues[t]=i.oldFn.apply(i.oldContext,e)})):t?b(r).forEach(function(t){return s[t]=r[t]}):i.oldValues=r}function ma(){return-1}fa.cancel=function(){this.baseModel.unregisterPatternObserver(this),dt(this.ractive._observers,this)},fa.dispatch=function(){var i=this,r=this.newValues;this.newValues={},b(r).forEach(function(t){var e=r[t],n=i.oldValues[t];if(!(i.strict&&e===n||h(e,n))){n=[e,n,t];!t||(t=i.pattern.exec(t))&&(n=n.concat(t.slice(1)));try{i.callback.apply(i.context,n)}catch(t){Z("Failed to execute pattern observer callback for '"+i.keypath+"': "+(t.message||t))}}}),pa(this,r,this.partial),this.dirty=!1},fa.notify=function(t){var e=la(t);~this.cache.indexOf(e)||(this.cache.push(e),this.changed.push(t))},fa.shuffle=function(t){if(w(this.baseModel.value)){for(var e=this.baseModel.value.length,n=0;n<t.length;n++)-1!==t[n]&&t[n]!==n&&this.changed.push([n]);for(var i=t.touchedFrom;i<e;i++)this.changed.push([i])}},fa.handleChange=function(){var n=this;if(!this.dirty||this.changed.length){if(this.dirty||(this.newValues={}),this.changed.length){var t,i,r=0;if(this.recursive?(t=this.changed.slice(),this.changed.length=0,this.dirty=!0,t.forEach(function(t){t=n.baseModel.joinAll(t);t.isLink&&!n.links||(r++,n.newValues[t.getKeypath(n.ractive)]=t.get())}),this.dirty=!1):(i=this.baseModel.isRoot?this.changed.map(function(t){return t.map(st).join(".")}):this.changed.map(function(t){return n.baseKeypath+"."+t.map(st).join(".")}),this.baseModel.findMatches(this.keys).forEach(function(t){var e=t.getKeypath(n.ractive);i.filter(function(t){return 0===t.indexOf(e)&&(t.length===e.length||"."===t[e.length])||0===e.indexOf(t)&&(t.length===e.length||"."===e[t.length])}).length&&(r++,n.newValues[e]=t.get())})),!r)return;this.partial=!0}else this.baseModel.findMatches(this.keys).forEach(function(t){var e=t.getKeypath(n.ractive);n.newValues[e]=t.get()}),this.partial=!1;br.addObserver(this,this.defer),this.dirty=!0,this.changed.length=0,this.cache=[],this.once&&this.cancel()}};var ga=function(t,e,n,i){this.ractive=t,this.model=e,this.keypath=e.getKeypath(),this.callback=n,this.options=i,this.pending=null,e.register(this),!1!==i.init?(this.sliced=[],this.shuffle([]),this.dispatch()):this.sliced=this.slice()},e=ga.prototype;e.cancel=function(){this.model.unregister(this),dt(this.ractive._observers,this)},e.dispatch=function(){try{this.callback(this.pending)}catch(t){Z("Failed to execute array observer callback for '"+this.keypath+"': "+(t.message||t))}this.pending=null,this.options.once&&this.cancel()},e.handleChange=function(t){this.pending?br.addObserver(this,this.options.defer):t||(this.shuffle(this.sliced.map(ma)),this.handleChange())},e.shuffle=function(t){var n,i=this,e=this.slice(),r=[],s=[],a={};t.forEach(function(t,e){a[t]=!0,t!==e&&_(n)&&(n=e),-1===t&&s.push(i.sliced[e])}),_(n)&&(n=t.length);for(var o=e.length,h=0;h<o;h+=1)a[h]||r.push(e[h]);this.pending={inserted:r,deleted:s,start:n},this.sliced=e};var va={init:!(e.slice=function(){var t=this.model.get();return w(t)?t.slice():[]}),once:!0};function ya(t){return t.trim()}function ba(t){return""!==t}_t=ks("pop").path,vr=ks("push").path;var wa="/* Ractive.js component styles */",xa=[],ka=!1,_a=null,Ea=null,Sa=!1;function Aa(t){return void 0===t?Sa:Sa=t}function Ca(t){xa.push(t),ka=!0}function Oa(t){var e=function(){_a=_a||ja();return _a}();e&&(t||ka)&&(Sa?xa.forEach(function(t){var e,e=(e=t.id,N&&(N.querySelector('[data-ractive-css="'+e+'"]')||ja(e)));e&&(t=Na(t.id),Ea?e.styleSheet.cssText!==t&&(e.styleSheet.cssText=t):e.innerHTML!==t&&(e.innerHTML=t))}):Ea?e.styleSheet.cssText=Na(null):e.innerHTML=Na(null),ka=!1)}function Na(e){var t=(e=e&&!w(e)?[e]:e)?xa.filter(function(t){return~e.indexOf(t.id)}):xa;return t.forEach(function(t){return t.applied=!0}),t.reduce(function(t,e){return t?t+"\n\n/* {"+e.id+"} */\n"+e.styles:""},wa)}function ja(t){if(N){var e=N.createElement("style");return e.type="text/css",e.setAttribute("data-ractive-css",t||""),N.getElementsByTagName("head")[0].appendChild(e),null===Ea&&(Ea=!!e.styleSheet),e}}var Ta={extend:function(t,e,n){e.adapt=ft(e.adapt,lt(n.adapt))},init:function(){}},Va=/\/\*(?:[\s\S]*?)\*\//g,Pa=/url\(\s*(['"])(?:\\[\s\S]|(?!\1).)*\1\s*\)|url\((?:\\[\s\S]|[^)])*\)|(['"])(?:\\[\s\S]|(?!\2).)*\2/gi,Ma=/\0(\d+)/g;function Ia(e,t,n){void 0===n&&(n=[]);var i=[];return e=e.replace(Pa,function(t){return"\0"+(i.push(t)-1)}).replace(Va,""),n.forEach(function(t){e=e.replace(t,function(t){return"\0"+(i.push(t)-1)})}),t(e,function(t){return t.replace(Ma,function(t,e){return i[e]})})}var Ra=/(?:^|\}|\{|\x01)\s*([^\{\}\0\x01]+)\s*(?=\{)/g,Ba=/@import\s*\([^)]*\)\s*;?/gi,Ka=/\x01/g,La=/@keyframes\s+[^\{\}]+\s*\{(?:[^{}]+|\{[^{}]+})*}/gi,Da=/((?:(?:\[[^\]]+\])|(?:[^\s\+\>~:]))+)((?:::?[^\s\+\>\~\(:]+(?:\([^\)]+\))?)*\s*[\s\+\>\~]?)\s*/g,Fa=/^(?:@|\d+%)/,za=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g;function Ua(t){return t.trim()}function $a(t){return t.str}function qa(t,e){var i='[data-ractive-css~="{'+e+'}"]',t=za.test(t)?t.replace(za,i):Ia(t,function(t,e){return e(t=t.replace(Ba,"$&").replace(Ra,function(t,e){if(Fa.test(e))return t;var n=e.split(",").map(Ua).map(function(t){return function(t,e){for(var n,i=[];n=Da.exec(t);)i.push({str:n[0],base:n[1],modifiers:n[2]});for(var r=i.map($a),s=[],a=i.length;a--;){var o=r.slice(),h=i[a];o[a]=h.base+e+h.modifiers||"";h=r.slice();h[a]=e+" "+h[a],s.push(o.join(" "),h.join(" "))}return s.join(", ")}(t,i)}).join(", ")+" ";return t.replace(e,n)}).replace(Ka,""))},[La]);return t}function Ha(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function Za(t,e,n){var i=y(t)?e:n,n=this._cssModel;n.locked=!0;e=qr(Wr({viewmodel:n},t,e,!0),i);n.locked=!1;var r=br.start();return this.extensions.forEach(function(t){t=t._cssModel;t.mark(),t.downstreamChanged("",1)}),br.end(),Wa(this,!i||!1!==i.apply),e.then(function(){return r})}function Wa(t,e){var n=Ga(t),i=t.extensions.map(function(t){return Wa(t,!1)}).reduce(function(t,e){return e||t},!1);return e&&(n||i)&&((t=t._cssDef)&&!t.applied||Oa(!0)),n||i}function Ga(t){var e=t.css;if(k(e)){var n=t._cssDef,e=Xa(t,e),e=n.transform?qa(e,n.id):e;if(n.styles!==e)return n.styles=e,!0}}var Qa=function(e){function t(t){e.call(this,t.cssData,"@style"),this.component=t}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.downstreamChanged=function(e,n){var t;this.locked||((t=this.component).extensions.forEach(function(t){t=t._cssModel;t.mark(),t.downstreamChanged(e,n||1)}),n||Wa(t,!0))},t}(Tr),Ya=/\{/,Ja={name:"css",extend:function(t,e,n,i){i._cssIds=function(t){var e=t,n=[];for(;e;)e.prototype.cssId&&n.push(e.prototype.cssId),e=e.Parent;return n}(t),f(i,"cssData",{configurable:!0,value:u(A(t.cssData),n.cssData||{})}),f(i,"_cssModel",{configurable:!0,value:new Qa(i)}),n.css&&to(n,i,e)},init:function(t,e,n){n.css&&Z("\nThe css option is currently not supported on a per-instance basis and will be discarded. Instead, we recommend instantiating from a component definition with a css option.\n\nconst Component = Ractive.extend({\n\t...\n\tcss: '/* your css */',\n\t...\n});\n\nconst componentInstance = new Component({ ... })\n\t\t")}};function Xa(t,e){if(C(e))return e;var n=t.cssData,i=t._cssModel,r=function(t){return i.joinAll(ot(t)).get()};r.__proto__=n;r=e.call(t,r);return C(r)?r:""}function to(t,n,e){var i=!0===t.css?"":C(t.css)&&!Ya.test(t.css)&&na(t.css)||t.css,r=i,s=t.cssId||Ha()+Ha()+"-"+Ha()+"-"+Ha()+"-"+Ha()+"-"+Ha()+Ha()+Ha();y(i)?(i="textContent"in i?i.textContent:i.innerHTML,r=i):k(i)&&(i=Xa(n,r=i));var a={transform:"noCSSTransform"in t?!t.noCSSTransform:!t.noCssTransform};f(n,"_cssDef",{configurable:!0,value:a}),f(n,"css",{get:function(){return r},set:function(t){var e=Xa(n,r=t),t=a.styles;a.styles=a.transform?qa(e,s):e,a.applied&&t!==a.styles&&Oa(!0)}}),a.styles=a.transform?qa(i,s):i,a.id=e.cssId=s,n._cssIds.push(s),Ca(n._cssDef)}var eo={name:"data",extend:function(t,e,n){var i,r;if(n.data&&x(n.data))for(i in n.data)(r=n.data[i])&&y(r)&&(x(r)||w(r))&&Z("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");e.data=io(e.data,n.data)},init:function(t,e,n){var i,r=io(t.prototype.data,n.data);if((r=k(r)?r.call(e):r)&&r.constructor===Object)for(var s in r)k(r[s])&&(i=r[s],r[s]=yt(i,e),r[s]._r_unbound=i);return r||{}},reset:function(t){var e=this.init(t.constructor,t,t.viewmodel);return t.viewmodel.root.set(e),!0}};function no(){return{}}function io(t,e){var n;(n=e)&&n.constructor!==Object&&(k(n)||(y(n)?Z("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged"):$("data option must be an object or a function, `"+n+"` is not valid")));var i=k(t),r=k(e=!e&&!i?no:e);return i||r?function(){return so(r?ro(e,this):e,i?ro(t,this):t)}:so(e,t)}function ro(t,e){e=t.call(e);if(e)return y(e)||$("Data function must return an object"),e.constructor!==Object&&W("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),e}function so(t,e){if(t&&e){for(var n in e)n in t||(t[n]=e[n]);return t}return t||e}var ao={name:"template",extend:function(t,e,n){"template"in n&&(k(n=n.template)?e.template=n:e.template=ho(n,e))},init:function(t,e,n){n=("template"in n?n:t.prototype).template;k(n=n||{v:re,t:[]})&&(n=oo(e,t=n),e._config.template={fn:t,result:n}),n=ho(n,e),e.template=n.t,n.p&&uo(e.partials,n.p)},reset:function(t){var e=function(t){var e=t._config.template;if(e&&e.fn){t=oo(t,e.fn);if(t!==e.result)return e.result=t}}(t);if(e){e=ho(e,t);return t.template=e.t,uo(t.partials,e.p,!0),!0}}};function oo(n,t){return t.call(n,{fromId:dr.fromId,isParsed:dr.isParsed,parse:function(t,e){return void 0===e&&(e=dr.getParseOptions(n)),dr.parse(t,e)}})}function ho(t,e){return C(t)?t=function(t,e){"#"===t[0]&&(t=dr.fromId(t));return dr.parseFor(t,e)}(t,e):(function(t){{if(null==t)throw new Error("The template cannot be "+t+".");if(!d(t.v))throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(t.v!==re)throw new Error("Mismatched template version (expected "+re+", got "+t.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app")}}(t),ne(t)),t}function uo(t,e,n){if(e)for(var i in e)!n&&v(t,i)||(t[i]=e[i])}function lo(t,e){this.name=t,this.useDefaults=e}var co=["computed","helpers"],Sr=lo.prototype;Sr.extend=function(t,e,n){t=this.useDefaults?t.defaults:t,e=this.useDefaults?e:e.constructor;this.configure(t,e,n)},Sr.init=function(){},Sr.configure=function(t,e,n){var i=this.name,n=n[i],t=A(t[i]);u(t,n),e[i]=t,"partials"===i&&e[i]&&b(e[i]).forEach(function(t){ne(e[i][t])})},Sr.reset=function(t){var n=t[this.name],i=!1;return b(n).forEach(function(t){var e=n[t];e._fn&&(e._fn.isOwner?n[t]=e._fn:delete n[t],i=!0)}),i};var fo=["adaptors","components","computed","decorators","easing","events","helpers","interpolators","partials","transitions"].map(function(t){var e=-1<co.indexOf(t);return new lo(t,e)});function po(t,i,r){return/_super/.test(r)?(s._parent=t,s._method=r,s):r;function s(){var t=function(t,e){if(e in t){var n=t[e];return k(n)?n:function(){return n}}return B}(s._parent,i),e="_super"in this,n=this._super;this._super=t;t=r.apply(this,arguments);return e?this._super=n:delete this._super,t}}function mo(t,e,n){return"options."+t+" has been deprecated in favour of options."+e+"."+(n?" You cannot specify both options, please use options."+e+".":"")}function go(t,e,n){if(e in t){if(n in t)throw new Error(mo(e,n,!0));Z(mo(e,n)),t[n]=t[e]}}var vo={extend:function(t,e,n,i){return ko("extend",t,e,n,i)},init:function(t,e,n){return ko("init",t,e,n)},reset:function(e){return xo.filter(function(t){return t.reset&&t.reset(e)}).map(function(t){return t.name})}},yo={adapt:Ta,computed:vo,css:Ja,data:eo,helpers:vo,template:ao},kt=b(I),bo=Eo(kt.filter(function(t){return!yo[t]})),wo=Eo(kt.concat(fo.map(function(t){return t.name}),["on","observe","attributes","cssData","use"])),xo=[].concat(kt.filter(function(t){return!fo[t]&&!yo[t]}),fo,yo.template,yo.css);function ko(e,n,i,r,s){var t,a,o;for(a in go(t=r,"beforeInit","onconstruct"),go(t,"init","onrender"),go(t,"complete","oncomplete"),go(t,"eventDefinitions","events"),w(t.adaptors)&&go(t,"adaptors","adapt"),r)v(bo,a)&&(o=r[a],"el"!==a&&k(o)?Z(a+" is a Ractive option that does not expect a function and will be ignored","init"===e?i:null):i[a]=o);if(i.append&&i.enhance)throw new Error("Cannot use append and enhance at the same time");fo.forEach(function(t){t[e](n,i,r,s)}),Ta[e](n,i,r,s),ao[e](n,i,r,s),Ja[e](n,i,r,s),function(t,e,n){for(var i in n){var r;!wo[i]&&v(n,i)&&(k(r=n[i])&&((i in Sl||"on"===i.slice(0,2)&&i.slice(2)in fs&&i in e)&&!_o.test(r.toString())&&Z("Overriding Ractive prototype function '"+i+"' without calling the '"+_o+"' method can be very dangerous."),r=po(t,i,r)),e[i]=r)}}(n.prototype,i,r)}var _o=/\b_super\b/;function Eo(t){var e={};return t.forEach(function(t){return e[t]=!0}),e}function So(t){this.up=t.up,this.ractive=t.up.ractive,this.template=t.template,this.index=t.index,this.type=t.template.t,this.dirty=!1}T=So.prototype;T.bubble=function(){this.dirty||(this.dirty=!0,this.up.bubble())},T.destroyed=function(){this.fragment&&this.fragment.destroyed()},T.find=function(){return null},T.findComponent=function(){return null},T.findNextNode=function(){return this.up.findNextNode(this)},T.rebound=function(t){this.fragment&&this.fragment.rebound(t)},T.shuffled=function(){this.fragment&&this.fragment.shuffled()},T.valueOf=function(){return this.toString()},So.prototype.findAll=B,So.prototype.findAllComponents=B;var zr=function(e){function t(t){e.call(this,t)}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.detach=function(){return this.fragment?this.fragment.detach():ea()},n.find=function(t){if(this.fragment)return this.fragment.find(t)},n.findAll=function(t,e){this.fragment&&this.fragment.findAll(t,e)},n.findComponent=function(t){if(this.fragment)return this.fragment.findComponent(t)},n.findAllComponents=function(t,e){this.fragment&&this.fragment.findAllComponents(t,e)},n.firstNode=function(t){return this.fragment&&this.fragment.firstNode(t)},n.toString=function(t){return this.fragment?this.fragment.toString(t):""},t}(So),Ao=/\s+/;function Co(t){for(var e=t.split(Ao),n=e.length;n--;)e[n]||e.splice(n,1);return e}var Oo=[void 0,"text","search","url","email","hidden","password","search","reset","submit"];function No(t){var e=this.getValue();w(e)||(e=[e]);var n=this.node.options,i=n.length;if(t)for(;i--;)n[i].selected=!1;else for(;i--;){var r=n[i],s=(r._ractive||r).value;r.selected=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]==e)return!0;return!1}(e,s)}}function jo(t){var e=this.getValue();if(!this.locked){this.node._ractive.value=e;var n=this.node.options,i=n.length,r=!1;if(t)for(;i--;)n[i].selected=!1;else for(;i--;){var s=n[i],a=(s._ractive||s).value;if(s.disabled&&s.selected&&(r=!0),a==e)return void(s.selected=!0)}r||(this.node.selectedIndex=-1)}}function To(t){var e=this.getValue();this.locked||(this.node.innerHTML=t||_(e)?"":e)}function Vo(t){var e=this.node,n=e.checked,i=this.getValue();if(t)return e.checked=!1;e.value=this.node._ractive.value=i,e.checked=this.element.compare(i,this.element.getAttribute("name")),n&&!e.checked&&this.element.binding&&this.element.binding.rendered&&this.element.binding.group.model.set(this.element.binding.group.getValue())}function Po(t){this.locked||(t?(this.node.removeAttribute("value"),this.node.value=this.node._ractive.value=null):(t=this.getValue(),this.node.value=this.node._ractive.value=t,this.node.setAttribute("value",ra(t))))}function Mo(t){this.locked||(t?(this.node._ractive.value="",this.node.removeAttribute("value")):(t=this.getValue(),t=ra(this.node._ractive.value=t),this.node.value!==t&&(this.node.value=t),this.node.setAttribute("value",t)))}function Io(t){this.node.checked=!t&&this.element.compare(this.getValue(),this.element.binding.getValue())}function Ro(t){var e=this.element,n=this.node,i=e.binding,r=this.getValue(),s=e.getAttribute("value");if(w(r)){for(var a=r.length;a--;)if(e.compare(s,r[a]))return void(i.isChecked=n.checked=!0);i.isChecked=n.checked=!1}else i.isChecked=n.checked=e.compare(r,s)}function Bo(t){for(var e,n=t?{}:C(t=this.getValue()||"")?Ia(t,function(t,e){return t.split(";").filter(function(t){return!!t.trim()}).map(e).reduce(function(t,e){var n=e.indexOf(":");return t[e.substr(0,n).trim()]=e.substr(n+1).trim(),t},{})}):{},i=this.node.style,r=b(n),s=this.previous||[],a=0;a<r.length;)r[a]in i&&(e=n[r[a]].replace("!important",""),i.setProperty(r[a],e,e.length!==n[r[a]].length?"important":"")),a++;for(a=s.length;a--;)!~r.indexOf(s[a])&&s[a]in i&&i.setProperty(s[a],"","");this.previous=r}function Ko(t){var e;this.style||(this.style=zi(this.name.substr(6))),t&&this.node.style.getPropertyValue(this.style)!==this.last||(t=(e=t?"":ra(this.getValue())).replace("!important",""),this.node.style.setProperty(this.style,t,t.length!==e.length?"important":""),this.last=this.node.style.getPropertyValue(this.style))}function Lo(t){var e=t?[]:Co(ra(this.getValue())),n=this.node.className,t=Co(n=void 0!==n.baseVal?n.baseVal:n),i=this.previous||[],t=e.concat(t.filter(function(t){return!~i.indexOf(t)})).join(" ");t!==n&&(C(this.node.className)?this.node.className=t:this.node.className.baseVal=t),this.previous=e}function Do(t){var e=this.name.substr(6),n=this.node.className,n=Co(n=void 0!==n.baseVal?n.baseVal:n),t=!t&&this.getValue();this.inlineClass||(this.inlineClass=e),t&&!~n.indexOf(e)?n.push(e):!t&&~n.indexOf(e)&&n.splice(n.indexOf(e),1),C(this.node.className)?this.node.className=n.join(" "):this.node.className.baseVal=n.join(" ")}function Fo(t){this.locked||(t?(this.useProperty&&(this.node[this.propertyName]=!1),this.node.removeAttribute(this.propertyName)):this.useProperty?this.node[this.propertyName]=this.getValue():(t=this.getValue())?this.node.setAttribute(this.propertyName,C(t)?t:""):this.node.removeAttribute(this.propertyName))}function zo(t){t?this.node.getAttribute(this.name)===this.value&&this.node.removeAttribute(this.name):(this.value=ra(this.getString()),this.node.setAttribute(this.name,this.value))}function Uo(t){t?this.value===this.node.getAttributeNS(this.namespace,this.name.slice(this.name.indexOf(":")+1))&&this.node.removeAttributeNS(this.namespace,this.name.slice(this.name.indexOf(":")+1)):(this.value=ra(this.getString()),this.node.setAttributeNS(this.namespace,this.name.slice(this.name.indexOf(":")+1),this.value))}var $o={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor",class:"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName",for:"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},qo=N?Fs("div"):null,Ho=!1;var Zo=function(e){function t(t){e.call(this,t),this.attributes=[],this.owner=t.owner,this.fragment=new vl({ractive:this.ractive,owner:this,template:this.template}),this.fragment.findNextNode=B,this.dirty=!1}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.bind=function(){this.fragment.bind()},n.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble())},n.destroyed=function(){this.unrender()},n.render=function(){this.node=this.owner.node,this.node&&(this.isSvg=this.node.namespaceURI===Ys),Ho=!0,this.rendered||this.fragment.render(),this.rendered=!0,this.dirty=!0,this.update(),Ho=!1},n.toString=function(){return this.fragment.toString()},n.unbind=function(t){this.fragment.unbind(t)},n.unrender=function(){this.rendered=!1,this.fragment.unrender()},n.update=function(){var t,e,n,i=this;this.dirty&&(this.dirty=!1,n=Ho,Ho=!0,this.fragment.update(),this.rendered&&this.node&&(t=this.fragment.toString(),e=function(t,e){if(Wo.test(t))return[];e=e?"svg":"div";return t?(qo.innerHTML="<"+e+" "+t+"></"+e+">")&&pt(qo.childNodes[0].attributes):[]}(t,this.isSvg),this.attributes.filter(function(t){return function(t,e){var n=t.length;for(;n--;)if(t[n].name===e.name)return!1;return!0}(e,t)}).forEach(function(t){i.node.removeAttribute(t.name)}),e.forEach(function(t){i.node.setAttribute(t.name,t.value)}),this.attributes=e),Ho=n||!1)},t}(So),Wo=/^\s*$/;var Go=!1;var Qo=function(e){function t(t){if(e.call(this,t),this.name=t.template.n,this.namespace=null,this.owner=t.owner||t.up.owner||t.element||bs(t.up),this.element=t.element||(this.owner.attributeByName?this.owner:bs(t.up)),this.up=t.up,this.ractive=this.up.ractive,this.rendered=!1,this.updateDelegate=null,this.fragment=null,this.element.attributeByName[this.name]=this,!w(t.template.f))return this.value=t.template.f,void(0===this.value?this.value="":_(this.value)&&(this.value=!0));this.fragment=new vl({owner:this,template:t.template.f}),this.interpolator=this.fragment&&1===this.fragment.items.length&&this.fragment.items[0].type===oe&&this.fragment.items[0],this.interpolator&&(this.interpolator.owner=this)}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.bind=function(){this.fragment&&this.fragment.bind()},n.bubble=function(){this.dirty||(this.up.bubble(),this.element.bubble(),this.dirty=!0)},n.firstNode=function(){},n.getString=function(){Go=!0;var t=this.fragment?this.fragment.toString():null!=this.value?""+this.value:"";return Go=!1,t},n.getValue=function(){Go=!0;var t=this.fragment?this.fragment.valueOf():!!Qe[this.name.toLowerCase()]||this.value;return Go=!1,t},n.render=function(){var t,e=this.element.node;(this.node=e).namespaceURI&&e.namespaceURI!==Js.html||(this.propertyName=$o[this.name]||this.name,void 0!==e[this.propertyName]&&(this.useProperty=!0),(Qe[this.name.toLowerCase()]||this.isTwoway)&&(this.isBoolean=!0),"value"===this.propertyName&&(e._ractive.value=this.value)),e.namespaceURI&&(t=this.name.indexOf(":"),this.namespace=-1!==t?function(t,e){for(var n="xmlns:"+e;t;){if(t.hasAttribute&&t.hasAttribute(n))return t.getAttribute(n);t=t.parentNode}return Js[e]}(e,this.name.slice(0,t)):e.namespaceURI),this.rendered=!0,this.updateDelegate=function(t){var e=t.element,n=t.name;if("value"===n){if(t.interpolator&&(t.interpolator.bound=!0),"select"===e.name&&"value"===n)return e.getAttribute("multiple")?No:jo;if("textarea"===e.name)return Mo;if(null!=e.getAttribute("contenteditable"))return To;if("input"===e.name){var i=e.getAttribute("type");if("file"===i)return B;if("radio"===i&&e.binding&&"name"===e.binding.attribute.name)return Vo;if(~Oo.indexOf(i))return Mo}return Po}if(i=e.node,t.isTwoway&&"name"===n){if("radio"===i.type)return Io;if("checkbox"===i.type)return Ro}if("style"===n)return Bo;if(0===n.indexOf("style-"))return Ko;if("class"===n&&(!i.namespaceURI||i.namespaceURI===Qs))return Lo;if(0===n.indexOf("class-"))return Do;if(t.isBoolean){e=e.getAttribute("type");return!t.interpolator||"checked"!==n||"checkbox"!==e&&"radio"!==e||(t.interpolator.bound=!0),Fo}return t.namespace&&t.namespace!==t.node.namespaceURI?Uo:zo}(this),this.updateDelegate()},n.toString=function(){if(Ho)return"";Go=!0;var t=this.getValue();if("value"!==this.name||void 0===this.element.getAttribute("contenteditable")&&"select"!==this.element.name&&"textarea"!==this.element.name){if("name"===this.name&&"input"===this.element.name&&this.interpolator&&"radio"===this.element.getAttribute("type"))return'name="{{'+this.interpolator.model.getKeypath()+'}}"';if(this.owner!==this.element||"style"!==this.name&&"class"!==this.name&&!this.style&&!this.inlineClass){if(this.rendered||this.owner!==this.element||this.name.indexOf("style-")&&this.name.indexOf("class-")){if(Qe[this.name.toLowerCase()])return t?C(t)?this.name+'="'+sa(t)+'"':this.name:"";if(null==t)return"";t=sa(this.getString());return Go=!1,t?this.name+'="'+t+'"':this.name}this.name.indexOf("style-")?this.inlineClass=this.name.substr(6):this.style=zi(this.name.substr(6))}}},n.unbind=function(t){this.fragment&&this.fragment.unbind(t)},n.unrender=function(){this.updateDelegate(!0),this.rendered=!1},n.update=function(){var t;this.dirty&&(this.dirty=!1,this.fragment&&this.fragment.update(),this.rendered&&this.updateDelegate(),this.isTwoway&&!this.locked?this.interpolator.twowayBinding.lastVal(!0,this.interpolator.model.get()):"value"!==this.name||!(t=this.element.binding)||(t=t.attribute)&&!t.dirty&&t.rendered&&this.element.binding.attribute.updateDelegate())},t}(So),ds=function(e){function t(t){e.call(this,t),this.owner=t.owner||t.up.owner||bs(t.up),this.element=this.owner.attributeByName?this.owner:bs(t.up),this.flag="l"===t.template.v?"lazy":"twoway",this.bubbler=this.owner===this.element?this.element:this.up,this.element.type===de&&(w(t.template.f)&&(this.fragment=new vl({owner:this,template:t.template.f})),this.interpolator=this.fragment&&1===this.fragment.items.length&&this.fragment.items[0].type===oe&&this.fragment.items[0])}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.bind=function(){this.fragment&&this.fragment.bind(),Yo(this,this.getValue(),!0)},n.bubble=function(){this.dirty||(this.bubbler.bubble(),this.dirty=!0)},n.getValue=function(){return this.fragment?this.fragment.valueOf():"value"in this?this.value:!("f"in this.template)||this.template.f},n.render=function(){Yo(this,this.getValue(),!0)},n.toString=function(){return""},n.unbind=function(t){this.fragment&&this.fragment.unbind(t),delete this.element[this.flag]},n.unrender=function(){this.element.rendered&&this.element.recreateTwowayBinding()},n.update=function(){this.dirty&&(this.dirty=!1,this.fragment&&this.fragment.update(),Yo(this,this.getValue(),!0))},t}(So);function Yo(t,e,n){t.value=0===e||("true"===e||"false"!==e&&"0"!==e&&e);e=t.element[t.flag];return t.element[t.flag]=t.value,n&&!t.element.attributes.binding&&e!==t.value&&t.element.recreateTwowayBinding(),t.value}function Jo(t){So.call(this,t)}cs=A(So.prototype);function Xo(t,e){t.torndown=!0,t.fragment.unbind(),t._observers.slice().forEach(It),t.el&&t.el.__ractive_instances__&&dt(t.el.__ractive_instances__,t);e=e();return fs.teardown.fire(t),e.then(function(){fs.destruct.fire(t),t.viewmodel.teardown()}),e}u(cs,{bind:B,unbind:B,update:B,detach:function(){return ia(this.node)},firstNode:function(){return this.node},render:function(t){this.rendered=!0,this.node=N.createComment(this.template.c),t.appendChild(this.node)},toString:function(){return"\x3c!-- "+this.template.c+" --\x3e"},unrender:function(t){this.rendered&&t&&this.detach(),this.rendered=!1}}),Jo.prototype=cs;var th=function(n){function t(t){n.call(this,t,"@this"),this.ractive=t}n&&(t.__proto__=n);var e=t.prototype=Object.create(n&&n.prototype);return e.constructor=t,e.joinKey=function(t){var e=n.prototype.joinKey.call(this,t);return"root"!==t&&"parent"!==t||e.isLink?"data"===t?this.ractive.viewmodel:"cssData"===t?this.ractive.constructor._cssModel:e:function(e,n){{var i;e.applyValue=function(t){(this.parent.value[n]=t)&&t.viewmodel?this.link(t.viewmodel.getRactiveModel(),n):this.link(A(Yt),n),this._link.markedAll()},"root"===n&&(i=e.mark,e.mark=function(t){this._marking||(this._marking=!0,i.apply(this,t),this._marking=!1)})}return e.applyValue(e.parent.ractive[n],n),e._link.set=function(t){return e.applyValue(t)},e._link.applyValue=function(t){return e.applyValue(t)},e._link}(e,t)},t}(Tr);var eh={"@this":function(t){return t.getRactiveModel()},"@global":function(){return Pr},"@shared":function(){return Vr},"@style":function(t){return t.getRactiveModel().joinKey("cssData")},"@helpers":function(t){return t.getHelpers()}};eh["@"]=eh["@this"];var nh=function(i){function t(t){i.call(this,null,null),this.isRoot=!0,(this.root=this).ractive=t.ractive,this.value=t.data,this.adaptors=t.adapt,this.adapt()}i&&(t.__proto__=i);var e=t.prototype=Object.create(i&&i.prototype);return e.constructor=t,e.attached=function(t){!function t(e,n){e._link&&e._link.implicit&&e._link.isDetached()&&e.attach(n);for(var i in e.childByKey){var r;e.value&&(i in e.value?t(e.childByKey[i],n):e.childByKey[i]._link&&!e.childByKey[i]._link.isDetached()||(r=Mr(n,i))&&e.childByKey[i].link(r,i,{implicit:!0}))}}(this,t)},e.createLink=function(t,e,n,i){for(var r=ot(t),s=this;r.length;)var a=r.shift(),s=s.childByKey[a]||s.joinKey(a);return s.link(e,n,i)},e.detached=function(){!function t(e){e._link&&e._link.implicit&&e.unlink();for(var n in e.childByKey)t(e.childByKey[n])}(this)},e.get=function(t,e){return t&&Pt(this),e&&!1===e.virtual?this.value:this.getVirtual()},e.getHelpers=function(){return this.helpers||(this.helpers=new Tr(this.ractive.helpers,"helpers",this.ractive)),this.helpers},e.getKeypath=function(){return""},e.getRactiveModel=function(){return this.ractiveModel||(this.ractiveModel=new th(this.ractive))},e.getValueChildren=function(){var n=i.prototype.getValueChildren.call(this,this.value);return this.children.forEach(function(t){var e;t._link&&(~(e=n.indexOf(t))?n.splice(e,1,t._link):n.push(t._link))}),n},e.has=function(t){if("~"===t[0]&&"/"===t[1]&&(t=t.slice(2)),eh[t]||""===t)return!0;if(i.prototype.has.call(this,t))return!0;t=ht(t);return!(!this.childByKey[t]||!this.childByKey[t]._link)||void 0},e.joinKey=function(t,e){if("@"!==(t="~"===t[0]&&"/"===t[1]?t.slice(2):t)[0])return i.prototype.joinKey.call(this,t,e);t=eh[t];return t?t(this):void 0},e.set=function(t){var e=this.wrapper;e?e.reset&&!1!==e.reset(t)||(e.teardown(),this.wrapper=null,this.value=t,this.adapt()):(this.value=t,this.adapt()),this.deps.forEach(Bt),this.children.forEach(Kt)},e.retrieve=function(){return this.wrapper?this.wrapper.get():this.value},e.teardown=function(){i.prototype.teardown.call(this),this.ractiveModel&&this.ractiveModel.teardown()},t}(Nr);function ih(n,t,i){var t=(n.constructor["_"+i]||[]).concat(s(t[i]||[])),r="on"===i?"once":i+"Once";t.forEach(function(t){var e=t[0],t=t[1];k(t)?n[i](e,t):y(t)&&k(t.handler)&&n[t.once?r:i](e,t.handler,A(t))})}nh.prototype.update=B;var rh=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],sh=["computed","helpers"],ah=0;function oh(t,e){Il.DEBUG&&L(),(a=t)._guid="r-"+ah++,a._subs=A(null),a._nsSubs=0,a._config={},a.event=null,a._eventQueue=[],a._observers=[],a._children=[],a._children.byName={},a.children=a._children,a.component||((a.root=a).parent=a.container=null),function(t){var e=t.component,n=t.constructor.attributes;if(n&&e){var i=e.template,r=i.m?i.m.slice():[],s=r.filter(function(t){return t.t===ve}).map(function(t){return t.n});n.required.forEach(function(t){~s.indexOf(t)||Z("Component '"+e.name+"' requires attribute '"+t+"' to be provided")});for(var a=n.optional.concat(n.required),o=[],h=r.length;h--;){var u=r[h];u.t!==ve||~a.indexOf(u.n)?n.mapAll||u.t!==Le&&u.t!==De&&u.t!==Fe||o.unshift(r.splice(h,1)[0]):n.mapAll?o.unshift({t:ve,n:u.n,f:[{t:oe,r:"~/"+u.n}]}):o.unshift(r.splice(h,1)[0])}o.length&&(e.template={t:i.t,e:i.e,f:i.f,m:r,p:i.p}),t._attributePartial=o}}(t),ih(t,e,"on"),!v(e,"delegate")&&t.parent&&t.parent.delegate!==t.delegate&&(t.delegate=!1),w(e.use)&&t.use.apply(t,e.use.filter(function(t){return t.construct})),fs.construct.fire(t,e),e.onconstruct&&e.onconstruct.call(t,Lr(t),e);for(var n=rh.length;n--;){var i=rh[n];t[i]=u(A(t.constructor[i]||null),e[i])}for(n=sh.length;n--;){var r=sh[n];t[r]=u(A(t.constructor.prototype[r]),e[r])}t._attributePartial&&(t.partials["extra-attributes"]=t._attributePartial,delete t._attributePartial);var s,a=new nh({adapt:function(e,t,n){t=t.map(i);n=lt(n.adapt).map(i),n=[t,n];e.parent&&!e.isolated&&n.push(e.parent.viewmodel.adaptors);return ft.apply(null,n);function i(t){return C(t)&&((t=Y("adaptors",e,t))||$(G(t,"adaptor"))),t}}(t,t.adapt,e),data:eo.init(t.constructor,t,e),ractive:t});for(s in t.adapt=a.adaptors,t.viewmodel=a,t.computed)ys.call(t,s,t.computed[s])}var hh=function(u){function t(t,e){var n=this;u.call(this,t);var i=t.template;this.isAnchor=i.t===ge,this.type=this.isAnchor?ge:be;var r,s=i.m,a=i.p||{};if("content"in a||(a.content=i.f||[]),this._partials=a,this.isAnchor)this.name=i.n,this.addChild=uh,this.removeChild=lh;else{e=new e({component:!0});this.instance=e,this.name=i.e,(e.el||e.target)&&(Z("The <"+this.name+"> component has a default '"+(e.el?"el":"target")+"' property; it has been disregarded"),e.el=e.target=null);for(var o,h=t.up;h;){if(h.owner.type===we){o=h.owner.container;break}h=h.parent}e.parent=this.up.ractive,e.container=o||null,e.root=e.parent.root,oh((e.component=this).instance,{partials:a}),s=(i=this.template).m,w(this.mappings)?s=(s||[]).concat(this.mappings):C(this.mappings)&&(s=(s||[]).concat(dr.parse(this.mappings,{attributes:!0}).t)),e._inlinePartials=a}this.attributeByName={},this.attributes=[],s&&(r=[],s.forEach(function(t){switch(t.t){case ve:case Ke:n.attributes.push(ml({owner:n,up:n.up,template:t}));break;case De:case Fe:case Le:break;default:r.push(t)}}),r.length&&this.attributes.push(new Zo({owner:this,up:this.up,template:r}))),this.eventHandlers=[]}u&&(t.__proto__=u);var e=t.prototype=Object.create(u&&u.prototype);return e.constructor=t,e.bind=function(){this.isAnchor||(this.attributes.forEach(Mt),this.eventHandlers.forEach(Mt),bl(this.instance,{partials:this._partials},{cssIds:this.up.cssIds}),(this.instance.target||this.instance.el)&&(this.extern=!0),this.bound=!0)},e.bubble=function(){this.dirty||(this.dirty=!0,this.up.bubble())},e.destroyed=function(){!this.isAnchor&&this.instance.fragment&&this.instance.fragment.destroyed()},e.detach=function(){return!this.isAnchor||this.instance?this.instance.fragment.detach():ea()},e.find=function(t,e){if(this.instance)return this.instance.fragment.find(t,e)},e.findAll=function(t,e){this.instance&&this.instance.fragment.findAll(t,e)},e.findComponent=function(t,e){return t&&this.name!==t?this.instance.fragment?this.instance.fragment.findComponent(t,e):void 0:this.instance},e.findAllComponents=function(t,e){var n=e.result;!this.instance||t&&this.name!==t||n.push(this.instance),this.instance&&this.instance.findAllComponents(t,e)},e.firstNode=function(t){if(this.instance)return this.instance.fragment.firstNode(t)},e.getContext=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return t.unshift(this.instance),Lr.apply(null,t)},e.rebound=function(e){this.attributes.forEach(function(t){return t.rebound(e)})},e.render=function(t,e){this.isAnchor?(this.rendered=!0,this.target=t,dh.length||(dh.push(this.ractive),e?(this.occupants=e,fh(),this.occupants=null):br.scheduleTask(fh,!0))):(this.attributes.forEach(zt),this.eventHandlers.forEach(zt),this.extern?(this.instance.delegate=!1,this.instance.render()):xl(this.instance,t,null,e),this.rendered=!0)},e.shuffled=function(){u.prototype.shuffled.call(this),this.instance&&!this.instance.isolated&&this.instance.fragment&&this.instance.fragment.shuffled()},e.toString=function(){if(this.instance)return this.instance.toHTML()},e.unbind=function(t){this.isAnchor||(this.bound=!1,this.attributes.forEach(qt),t?this.instance.fragment.unbind():Xo(this.instance,function(){return br.promise()}))},e.unrender=function(t){this.shouldDestroy=t,this.isAnchor?(this.item&&ch(this,this.item),this.target=null,dh.length||(dh.push(this.ractive),br.scheduleTask(fh,!0))):(this.instance.unrender(),this.instance.el=this.instance.target=null,this.attributes.forEach(Ht),this.eventHandlers.forEach(Ht)),this.rendered=!1},e.update=function(){this.dirty=!1,this.instance&&(this.instance.fragment.update(),this.attributes.forEach(Zt),this.eventHandlers.forEach(Zt))},t}(So);function uh(t){this.item&&this.removeChild(this.item);var e,n,i=t.instance;t.anchor=this,t.up=this.up,t.name=t.nameOption||this.name,this.name=t.name,i.isolated||i.viewmodel.attached(this.up),this.rendered&&(n=t,(e=this).rendered&&(n.shouldDestroy=!1,n.up=e.up,e.item=n,e.instance=n.instance,i=e.up.findNextNode(e),n.instance.fragment.rendered&&n.instance.unrender(),n.partials=n.instance.partials,n.instance.partials=u(A(n.partials),n.partials,e._partials),n.instance.fragment.unbind(!0),n.instance.fragment.componentParent=e.up,n.instance.fragment.bind(n.instance.viewmodel),e.attributes.forEach(Mt),e.eventHandlers.forEach(Mt),e.attributes.forEach(zt),e.eventHandlers.forEach(zt),t=e.up.findParentNode(),xl(n.instance,t,t.contains(i)?i:null,e.occupants),n.lastBound!==e&&(n.lastBound=e)))}function lh(t){this.item===t&&(ch(this,t),this.name=this.template.n)}function ch(t,e){t.rendered&&(e.shouldDestroy=!0,e.instance.unrender(),t.eventHandlers.forEach(Ht),t.attributes.forEach(Ht),t.eventHandlers.forEach(qt),t.attributes.forEach(qt),e.instance.el=e.instance.anchor=null,e.instance.fragment.componentParent=null,e.up=null,e.anchor=null,t.item=null,t.instance=null)}var dh=[];function fh(){var t=dh;dh=[],t.forEach(ms)}Ms=function(n){function i(t,e){n.call(this,t,e),this.isReadonly=!this.root.ractive.syncComputedChildren,this.dirty=!0,this.isComputed=!0}n&&(i.__proto__=n);var t=i.prototype=Object.create(n&&n.prototype);t.constructor=i;var e={setRoot:{}};return e.setRoot.get=function(){return this.parent.setRoot},t.applyValue=function(t){if(n.prototype.applyValue.call(this,t),!this.isReadonly){for(var e=this.parent;e&&e.shuffle;)e=e.parent;e&&e.dependencies.forEach(Kt)}this.setRoot&&this.setRoot.set(this.setRoot.value)},t.get=function(t,e){var n;return t&&Pt(this),this.dirty&&(n=this.parent.get(),this.value=n?n[this.key]:void 0,this.wrapper&&(this.newWrapperValue=this.value),this.adapt()),this.dirty=!1,(e&&"unwrap"in e?!1!==e.unwrap:t)&&this.wrapper?this.wrapperValue:this.value},t.handleChange=function(){this.dirty?this.deps.forEach(Bt):(this.dirty=!0,this.boundValue&&(this.boundValue=null),this.links.forEach(Dt),this.deps.forEach(Bt),this.children.forEach(Bt))},t.joinKey=function(t){return _(t)||""===t?this:(v(this.childByKey,t)||(e=new i(this,t),this.children.push(e),this.childByKey[t]=e),this.childByKey[t]);var e},Object.defineProperties(t,e),i}(Nr),Is=function(i){function t(t,e,n){i.call(this,t,n),this.signature=e,this.isReadonly=!this.signature.setter,this.isComputed=!0,this.dependencies=[],this.children=[],this.childByKey={},this.deps=[],this.dirty=!0,this.shuffle=void 0}i&&(t.__proto__=i);var e=t.prototype=Object.create(i&&i.prototype);e.constructor=t;var n={setRoot:{}};return n.setRoot.get=function(){if(this.signature.setter)return this},e.get=function(t,e){var n;return t&&Pt(this),this.dirty&&(n=this.value,this.value=this.getValue(),br.active()?h(n,this.value)||this.notifyUpstream():(br.start(),h(n,this.value)||this.notifyUpstream(),br.end()),this.wrapper&&(this.newWrapperValue=this.value),this.adapt(),this.dirty=!1),Et(this,this.wrapper&&(e&&"unwrap"in e?!1!==e.unwrap:t)?this.wrapperValue:this.value,!e||!1!==e.shouldBind)},e.getContext=function(){return this.parent.isRoot?this.root.ractive:this.parent.get(!1,xt)},e.getValue=function(){var t;Tt();try{t=this.signature.getter.call(this.root.ractive,this.getContext(),this.getKeypath())}catch(t){Z("Failed to compute "+this.getKeypath()+": "+(t.message||t)),V&&(console.groupCollapsed&&console.groupCollapsed("%cshow details","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"),e=this.signature,console.error(t.name+": "+t.message+"\n\n"+e.getterString+(e.getterUseStack?"\n\n"+t.stack:"")),console.groupCollapsed&&console.groupEnd())}var e=Vt();return this.parent.keypath&&!~e.indexOf(this.parent)&&e.push(this.parent),this.setDependencies(e),t},e.mark=function(){this.handleChange()},e.rebind=function(t,e){t!==e&&this.handleChange()},e.set=function(t){if(this.isReadonly)throw new Error("Cannot set read-only computed value '"+this.key+"'");this.signature.setter(t,this.getContext(),this.getKeypath()),this.mark()},e.setDependencies=function(t){for(var e=this.dependencies.length;e--;){var n=this.dependencies[e];~t.indexOf(n)||n.unregister(this)}for(e=t.length;e--;){var i=t[e];~this.dependencies.indexOf(i)||i.register(this)}this.dependencies=t},e.teardown=function(){for(var t=this.dependencies.length;t--;)this.dependencies[t]&&this.dependencies[t].unregister(this);this.parent.computed[this.key]===this&&delete this.parent.computed[this.key],i.prototype.teardown.call(this)},Object.defineProperties(e,n),t}(Nr),ha=Is.prototype,fa=Ms.prototype;ha.handleChange=fa.handleChange,ha.joinKey=fa.joinKey,Or.Computation=Is;var ph=function(i){function t(t,e){var n=this;i.call(this,t.ractive.viewmodel,null),this.fragment=t,this.template=e,this.isReadonly=!0,this.isComputed=!0,this.dirty=!0,this.fn=!1===t.ractive.allowExpressions?B:ee(e.s,e.r.length),this.models=this.template.r.map(function(t){return Mr(n.fragment,t)}),this.dependencies=[],this.shuffle=void 0,this.bubble()}i&&(t.__proto__=i);var e=t.prototype=Object.create(i&&i.prototype);return e.constructor=t,e.bubble=function(t){void 0===t&&(t=!0),this.keypath=void 0,t&&this.handleChange()},e.getKeypath=function(){var n=this;return this.template?(this.keypath||(this.keypath="@"+this.template.s.replace(/_(\d+)/g,function(t,e){if(e>=n.models.length)return t;e=n.models[e];return e?e.getKeypath():"@undefined"})),this.keypath):"@undefined"},e.getValue=function(){var e=this;Tt();try{var t=this.models.map(function(t){return t?t.get(!0):void 0}),n=this.fn.apply(this.fragment.ractive,t)}catch(t){Z("Failed to compute "+this.getKeypath()+": "+(t.message||t))}var i=Vt();return this.dependencies.filter(function(t){return!~i.indexOf(t)}).forEach(function(t){t.unregister(e),dt(e.dependencies,t)}),i.filter(function(t){return!~e.dependencies.indexOf(t)}).forEach(function(t){t.register(e),e.dependencies.push(t)}),n},e.notifyUpstream=function(){},e.rebind=function(t,e,n){var i=this.models.indexOf(e);~i&&(t=Qt(this.template.r[i],t,e))!==e&&(e.unregister(this),this.models.splice(i,1,t),t&&t.addShuffleRegister(this,"mark")),this.bubble(!n)},e.rebound=function(t){var e=this;this.models=this.template.r.map(function(t){return Mr(e.fragment,t)}),t&&this.bubble(!0)},e.retrieve=function(){return this.get()},e.teardown=function(){var e=this;this.fragment=void 0,this.dependencies&&this.dependencies.forEach(function(t){return t.unregister(e)}),i.prototype.teardown.call(this)},e.unreference=function(){i.prototype.unreference.call(this),mh(this)},e.unregister=function(t){i.prototype.unregister.call(this,t),mh(this)},e.unregisterLink=function(t){i.prototype.unregisterLink.call(this,t),mh(this)},t}(Nr),e=ph.prototype,Sr=Is.prototype;function mh(t){t.deps.length||t.refs||t.links.length||t.teardown()}function gh(t,e,n,i){void 0===i&&(i={}),e&&e.f&&e.f.s&&(i.register?(t.model=new ph(n,e.f),t.model.register(t)):t.fn=ee(e.f.s,e.f.r.length))}function vh(t,e,i,r){return void 0===r&&(r={}),e.f.r.map(function(t,e){var n;return r.specialRef&&(n=r.specialRef(t,e))?n:n=Mr(i,t)})}e.get=Sr.get,e.handleChange=Sr.handleChange,e.joinKey=Sr.joinKey,e.mark=Sr.mark;var yh={update:e.unbind=B,teardown:B},kt=function(t){this.owner=t.owner||t.up.owner||bs(t.up),this.element=this.owner.attributeByName?this.owner:bs(t.up),this.up=t.up||this.owner.up,this.ractive=this.up.ractive||this.owner.ractive;t=this.template=t.template;this.name=t.n,this.node=null,this.handle=null,this.element.decorators.push(this)},T=kt.prototype;T.bind=function(){var t=this.element===this.owner?new vl({owner:this.owner}):this.up;gh(this,this.template,t,{register:!0})},T.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble(),this.up.bubble())},T.destroyed=function(){this.handle&&(this.handle.teardown(),this.handle=null),this.shouldDestroy=!0},T.handleChange=function(){this.bubble()},T.rebound=function(t){this.model&&this.model.rebound(t)},T.render=function(){var n=this;this.shouldDestroy=!1,this.handle&&this.unrender();var i=this.ractive;br.scheduleTask(function(){if(n.element.rendered){var t=Y("decorators",i,n.name);if(!t)return H(G(n.name,"decorator")),void(n.handle=yh);n.node=n.element.node;var e=n.model?n.model.get():[];if(Vs.f=n.up,n.handle=t.apply(i,[n.node].concat(e)),Vs.f=null,!n.handle||!n.handle.teardown)throw new Error("The '"+n.name+"' decorator must return an object with a teardown method");n.shouldDestroy&&n.destroyed()}},!0)},T.shuffled=function(){this.handle&&this.handle.shuffled&&this.handle.shuffled()},T.toString=function(){return""},T.unbind=function(){var t;(t=this).template,t.model&&t.model.unregister(t)},T.unrender=function(t){t&&!this.element.rendered||!this.handle||(this.handle.teardown(),this.handle=null)},T.update=function(){var t,e=this.handle;this.dirty?(this.dirty=!1,e&&(e.update?(t=this.model?this.model.get():[],e.update.apply(this.ractive,t)):(this.unrender(),this.render()))):e&&e.invalidate&&br.scheduleTask(function(){return e.invalidate()},!0)},kt.prototype.firstNode=B;cs=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.toString=function(){return"<!DOCTYPE"+this.template.a+">"},e}(So),Ms=cs.prototype;Ms.bind=Ms.render=Ms.teardown=Ms.unbind=Ms.unrender=Ms.update=B;ha=function(t,e){void 0===e&&(e="value"),this.element=t,this.ractive=t.ractive,this.attribute=t.attributeByName[e];var n=this.attribute.interpolator;n.twowayBinding=this;e=n.model;if(e.isReadonly&&!e.setRoot){n=e.getKeypath().replace(/^@/,"");return W("Cannot use two-way binding on <"+t.name+"> element: "+n+" is read-only. To suppress this warning use <"+t.name+" twoway='false'...>",{ractive:this.ractive}),!1}this.attribute.isTwoway=!0;t=(this.model=e).get();this.wasUndefined=_(t),_(t)&&this.getInitialValue&&(t=this.getInitialValue(),e.set(t)),this.lastVal(!0,t);e=bs(this.element,!1,"form");e&&(this.resetValue=t,e.formBindings.push(this))},fa=ha.prototype;function bh(){this._ractive.binding.handleChange()}fa.bind=function(){this.model.registerTwowayBinding(this)},fa.handleChange=function(){var t=this,e=this.getValue();this.lastVal()!==e&&(br.start(),this.attribute.locked=!0,this.model.set(e),this.lastVal(!0,e),this.model.get()!==e?this.attribute.locked=!1:br.scheduleTask(function(){return t.attribute.locked=!1}),br.end())},fa.lastVal=function(t,e){if(!t)return this.lastValue;this.lastValue=e},fa.rebind=function(t,e){var n=this;this.model&&this.model===e&&e.unregisterTwowayBinding(this),t&&(this.model=t,br.scheduleTask(function(){return t.registerTwowayBinding(n)}))},fa.rebound=function(){this.model&&this.model.unregisterTwowayBinding(this),this.model=this.attribute.interpolator.model,this.model&&this.model.registerTwowayBinding(this)},fa.render=function(){this.node=this.element.node,(this.node._ractive.binding=this).rendered=!0},fa.setFromNode=function(t){this.model.set(t.value)},fa.unbind=function(){this.model&&this.model.unregisterTwowayBinding(this)},ha.prototype.unrender=B;var wh=function(e){function t(t){e.call(this,t,"checked")}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.render=function(){e.prototype.render.call(this),this.element.on("change",bh),this.node.attachEvent&&this.element.on("click",bh)},n.unrender=function(){this.element.off("change",bh),this.node.attachEvent&&this.element.off("click",bh)},n.getInitialValue=function(){return!!this.element.getAttribute("checked")},n.getValue=function(){return this.node.checked},n.setFromNode=function(t){this.model.set(t.checked)},t}(ha);function xh(t,e,n){t+="-bindingGroup";return e[t]||(e[t]=new kh(t,e,n))}var kh=function(t,e,n){var i=this;this.model=e,this.hash=t,this.getValue=function(){return i.value=n.call(i),i.value},this.bindings=[]},Nr=kh.prototype;Nr.add=function(t){this.bindings.push(t)},Nr.bind=function(){var e=this;this.value=this.model.get(),this.bindings.forEach(function(t){return t.lastVal(!0,e.value)}),this.model.registerTwowayBinding(this),this.bound=!0},Nr.remove=function(t){dt(this.bindings,t),this.bindings.length||this.unbind()},Nr.unbind=function(){this.model.unregisterTwowayBinding(this),this.bound=!1,delete this.model[this.hash]},kh.prototype.rebind=ha.prototype.rebind;var _h=[].push;function Eh(){var e=this,t=this.bindings.filter(function(t){return t.node&&t.node.checked}).map(function(t){return t.element.getAttribute("value")}),n=[];return t.forEach(function(t){e.bindings[0].arrayContains(n,t)||n.push(t)}),n}var Sh=function(i){function t(t){var e;i.call(this,t,"name"),this.checkboxName=!0,this.group=xh("checkboxes",this.model,Eh),this.group.add(this),this.noInitialValue&&(this.group.noInitialValue=!0),this.group.noInitialValue&&this.element.getAttribute("checked")&&(e=this.model.get(),t=this.element.getAttribute("value"),this.arrayContains(e,t)||_h.call(e,t))}i&&(t.__proto__=i);var e=t.prototype=Object.create(i&&i.prototype);return e.constructor=t,e.bind=function(){this.group.bound||this.group.bind()},e.getInitialValue=function(){return this.noInitialValue=!0,[]},e.getValue=function(){return this.group.value},e.handleChange=function(){this.isChecked=this.element.node.checked;var t=this.model.get();this.group.value=void 0===t?[]:t.slice();t=this.element.getAttribute("value");this.isChecked&&!this.arrayContains(this.group.value,t)?this.group.value.push(t):!this.isChecked&&this.arrayContains(this.group.value,t)&&this.removeFromArray(this.group.value,t),this.lastValue=null,i.prototype.handleChange.call(this)},e.render=function(){i.prototype.render.call(this);var t=this.node,e=this.model.get(),n=this.element.getAttribute("value");w(e)?this.isChecked=this.arrayContains(e,n):this.isChecked=this.element.compare(e,n),t.name="{{"+this.model.getKeypath()+"}}",t.checked=this.isChecked,this.element.on("change",bh),this.node.attachEvent&&this.element.on("click",bh)},e.setFromNode=function(t){this.group.bindings.forEach(function(t){return t.wasUndefined=!0}),t.checked&&((t=this.group.getValue()).push(this.element.getAttribute("value")),this.group.model.set(t))},e.unbind=function(){this.group.remove(this)},e.unrender=function(){var t=this.element;t.off("change",bh),this.node.attachEvent&&t.off("click",bh)},e.arrayContains=function(t,e){for(var n=t.length;n--;)if(this.element.compare(e,t[n]))return!0;return!1},e.removeFromArray=function(t,e){if(t)for(var n=t.length;n--;)this.element.compare(e,t[n])&&t.splice(n,1)},t}(ha),Ah=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.getInitialValue=function(){return this.element.fragment?this.element.fragment.toString():""},n.getValue=function(){return this.element.node.innerHTML},n.render=function(){e.prototype.render.call(this);var t=this.element;t.on("change",bh),t.on("blur",bh),this.ractive.lazy||(t.on("input",bh),this.node.attachEvent&&t.on("keyup",bh))},n.setFromNode=function(t){this.model.set(t.innerHTML)},n.unrender=function(){var t=this.element;t.off("blur",bh),t.off("change",bh),t.off("input",bh),t.off("keyup",bh)},t}(ha);function Ch(){bh.call(this);var t=this._ractive.binding.model.get();this.value=null==t?"":t}var Oh=function(s){function t(){s.apply(this,arguments)}s&&(t.__proto__=s);var e=t.prototype=Object.create(s&&s.prototype);return e.constructor=t,e.getInitialValue=function(){return""},e.getValue=function(){return this.node.value},e.render=function(){s.prototype.render.call(this);var e,n,t=this.ractive.lazy,i=!1,r=this.element;l(t="lazy"in this.element?this.element.lazy:t)&&(i=+t,t=!1),this.handler=i?(e=i,function(){var t=this;n&&clearTimeout(n),n=setTimeout(function(){t._ractive.binding.rendered&&bh.call(t),n=null},e)}):bh;i=this.node;r.on("change",bh),"file"!==i.type&&(t||(r.on("input",this.handler),i.attachEvent&&r.on("keyup",this.handler)),r.on("blur",Ch))},e.unrender=function(){var t=this.element;this.rendered=!1,t.off("change",bh),t.off("input",this.handler),t.off("keyup",this.handler),t.off("blur",Ch)},t}(ha),Nh=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.getInitialValue=function(){},n.getValue=function(){return this.node.files},n.render=function(){this.element.lazy=!1,t.prototype.render.call(this)},n.setFromNode=function(t){this.model.set(t.files)},e}(Oh);function jh(t){return t.selectedOptions?pt(t.selectedOptions):t.options?pt(t.options).filter(function(t){return t.selected}):[]}var Th=function(n){function t(){n.apply(this,arguments)}n&&(t.__proto__=n);var e=t.prototype=Object.create(n&&n.prototype);return e.constructor=t,e.getInitialValue=function(){return this.element.options.filter(function(t){return t.getAttribute("selected")}).map(function(t){return t.getAttribute("value")})},e.getValue=function(){for(var t=this.element.node.options,e=t.length,n=[],i=0;i<e;i+=1){var r=t[i];r.selected&&(r=(r._ractive||r).value,n.push(r))}return n},e.handleChange=function(){var t=this.attribute.getValue(),e=this.getValue();return!_(t)&&function(t,e){var n;if(w(t)&&w(e)&&t.length===e.length){for(n=t.length;n--;)if(t[n]!==e[n])return;return 1}}(e,t)||n.prototype.handleChange.call(this),this},e.render=function(){n.prototype.render.call(this),this.element.on("change",bh),_(this.model.get())&&this.handleChange()},e.setFromNode=function(t){for(var e=jh(t),n=e.length,i=new Array(n);n--;){var r=e[n];i[n]=(r._ractive||r).value}this.model.set(i)},e.unrender=function(){this.element.off("change",bh)},t}(ha),Vh=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.getInitialValue=function(){},n.getValue=function(){var t=parseFloat(this.node.value);return isNaN(t)?void 0:t},n.setFromNode=function(t){t=parseFloat(t.value);isNaN(t)||this.model.set(t)},e}(Oh),Ph={};var Mh=function(e){function t(t){e.call(this,t,"checked"),this.siblings=(t=this.ractive._guid+this.element.getAttribute("name"),Ph[t]||(Ph[t]=[])),this.siblings.push(this)}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.getValue=function(){return this.node.checked},n.handleChange=function(){br.start(),this.siblings.forEach(function(t){t.model.set(t.getValue())}),br.end()},n.render=function(){e.prototype.render.call(this),this.element.on("change",bh),this.node.attachEvent&&this.element.on("click",bh)},n.setFromNode=function(t){this.model.set(t.checked)},n.unbind=function(){dt(this.siblings,this)},n.unrender=function(){this.element.off("change",bh),this.node.attachEvent&&this.element.off("click",bh)},t}(ha);function Ih(){var t=this.bindings.filter(function(t){return t.node.checked});if(0<t.length)return t[0].element.getAttribute("value")}var Rh=function(n){function t(t){var e=this;n.call(this,t,"name"),this.group=xh("radioname",this.model,Ih),this.group.add(this),t.checked&&(this.group.value=this.getValue()),this.attribute.interpolator.pathChanged=function(){return e.updateName()}}n&&(t.__proto__=n);var e=t.prototype=Object.create(n&&n.prototype);return e.constructor=t,e.bind=function(){this.group.bound||this.group.bind()},e.getInitialValue=function(){if(this.element.getAttribute("checked"))return this.element.getAttribute("value")},e.getValue=function(){return this.element.getAttribute("value")},e.handleChange=function(){this.node.checked&&(this.group.value=this.getValue(),n.prototype.handleChange.call(this)),this.updateName()},e.lastVal=function(t,e){if(this.group)return t?void(this.group.lastValue=e):this.group.lastValue},e.rebind=function(t,e){n.prototype.rebind.call(this,t,e),this.updateName()},e.rebound=function(t){n.prototype.rebound.call(this,t),this.updateName()},e.render=function(){n.prototype.render.call(this);var t=this.node;this.updateName(),t.checked=this.element.compare(this.model.get(),this.element.getAttribute("value")),this.element.on("change",bh),t.attachEvent&&this.element.on("click",bh)},e.setFromNode=function(t){t.checked&&this.group.model.set(this.element.getAttribute("value"))},e.unbind=function(){this.group.remove(this)},e.unrender=function(){var t=this.element;t.off("change",bh),this.node.attachEvent&&t.off("click",bh)},e.updateName=function(){this.node&&(this.node.name="{{"+this.model.getKeypath()+"}}")},t}(ha),Bh=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.forceUpdate=function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,br.scheduleTask(function(){return t.attribute.locked=!1}),this.model.set(e))},n.getInitialValue=function(){if(void 0===this.element.getAttribute("value")){var t=this.element.options,e=t.length;if(e){for(var n,i,r=e;r--;){var s=t[r];if(s.getAttribute("selected")){s.getAttribute("disabled")||(n=s.getAttribute("value")),i=!0;break}}if(!i)for(;++r<e;)if(!t[r].getAttribute("disabled")){n=t[r].getAttribute("value");break}return void 0!==n&&(this.element.attributeByName.value.value=n),n}}},n.getValue=function(){for(var t=this.node.options,e=t.length,n=0;n<e;n+=1){var i=t[n];if(t[n].selected&&!t[n].disabled)return(i._ractive||i).value}},n.render=function(){t.prototype.render.call(this),this.element.on("change",bh)},n.setFromNode=function(t){t=jh(t)[0];this.model.set((t._ractive||t).value)},n.unrender=function(){this.element.off("change",bh)},e}(ha);function Kh(t){return!(!t||!t.template.f||1!==t.template.f.length||t.template.f[0].s)&&(t.template.f[0].t===oe||(t.template.f[0].t===he&&Z("It is not possible create a binding using a triple mustache."),!1))}var Lh=/;\s*$/,Dh=function(d){function t(t){var e,n,i,r,s,a,o,h;if(d.call(this,t),this.name=t.template.e.toLowerCase(),this.parent=bs(this.up,!1),this.parent&&"option"===this.parent.name)throw new Error("An <option> element cannot contain other elements (encountered <"+this.name+">)");this.decorators=[],this.attributeByName={};for(var u=this.template.m,l=u&&u.length||0,c=0;c<l;c++)if((o=u[c]).g)(this.statics||(this.statics={}))[o.n]=C(o.f)?o.f:o.n;else switch(o.t){case ve:case Fe:case Le:case Ke:case De:i=ml({owner:this,up:this.up,template:o}),n=o.n,e=e||(this.attributes=[]),"value"===n?r=i:"name"===n?a=i:"class"===n?s=i:e.push(i);break;case 74:this.delegate=!1;break;default:(h=h||[]).push(o)}r&&e.push(r),a&&e.push(a),s&&e.unshift(s),h&&((e||(this.attributes=[])).push(new Zo({owner:this,up:this.up,template:h})),h=[]),t.template.f&&!t.deferContent&&(this.fragment=new vl({template:t.template.f,owner:this,cssIds:null})),this.binding=null}d&&(t.__proto__=d);var e=t.prototype=Object.create(d&&d.prototype);return e.constructor=t,e.bind=function(){var t=this.attributes;if(t){t.binding=!0;for(var e=t.length,n=0;n<e;n++)t[n].bind();t.binding=!1}this.fragment&&this.fragment.bind(),this.binding?this.binding.bind():this.recreateTwowayBinding()},e.createTwowayBinding=function(){if(("twoway"in this?this:this.ractive).twoway){var t=function(t){var e=t.name,n=t.attributeByName;if("input"===e||"textarea"===e||"select"===e||n.contenteditable){var i=Kh(n.value),r=Kh(n.contenteditable);if((t.getAttribute("contenteditable")||r)&&i)return Ah;if("input"!==e)return"select"===e&&i?t.getAttribute("multiple")?Th:Bh:"textarea"===e&&i?Oh:null;var s=t.getAttribute("type");if("radio"===s){r=Kh(n.name),e=Kh(n.checked);return r&&e?(Z("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:t.root}),Rh):r?Rh:e?Mh:null}if("checkbox"!==s)return"file"===s&&i?Nh:"number"===s&&i||"range"===s&&i?Vh:i?Oh:null;i=Kh(n.name),n=Kh(n.checked);return i&&n?wh:i?Sh:n?wh:null}}(this);if(t){t=new t(this);if(t&&t.model)return t}}},e.destroyed=function(){this.attributes&&this.attributes.forEach(Rt),this.fragment&&this.fragment.destroyed()},e.detach=function(){return this.rendered||this.destroyed(),ia(this.node)},e.find=function(t,e){return this.node&&zs(this.node,t)?this.node:this.fragment?this.fragment.find(t,e):void 0},e.findAll=function(t,e){var n=e.result;zs(this.node,t)&&n.push(this.node),this.fragment&&this.fragment.findAll(t,e)},e.findNextNode=function(){return null},e.firstNode=function(){return this.node},e.getAttribute=function(t){if(this.statics&&t in this.statics)return this.statics[t];t=this.attributeByName[t];return t?t.getValue():void 0},e.getContext=function(){for(var t,e=[],n=arguments.length;n--;)e[n]=arguments[n];return this.fragment?(t=this.fragment).getContext.apply(t,e):(this.ctx||(this.ctx=new Es(this.up,this)),e.unshift(A(this.ctx)),u.apply(null,e))},e.off=function(t,e,n){void 0===n&&(n=!1);var i,r=this.up.delegate,s=this.listeners&&this.listeners[t];s&&(dt(s,e),r?(i=(r.listeners||(r.listeners=[]))&&(r.listeners[t]||(r.listeners[t]=[]))).refs&&!--i.refs&&r.off(t,Wh,!0):this.rendered&&(i=(e=this.node).addEventListener,r=e.removeEventListener,s.length?s.length&&!s.refs&&n&&(r.call(e,t,Qh,!0),i.call(e,t,Qh,!1)):r.call(e,t,Qh,n)))},e.on=function(t,e,n){void 0===n&&(n=!1);var i,r,s=this.up.delegate,a=(this.listeners||(this.listeners={}))[t]||(this.listeners[t]=[]);s?((r=(s.listeners||(s.listeners=[]))&&s.listeners[t]||(s.listeners[t]=[])).refs||(r.refs=0,s.on(t,Wh,!0)),r.refs++):this.rendered&&(s=(i=this.node).addEventListener,r=i.removeEventListener,a.length?a.length&&!a.refs&&n&&(r.call(i,t,Qh,!1),s.call(i,t,Qh,!0)):s.call(i,t,Qh,n)),ut(this.listeners[t],e)},e.recreateTwowayBinding=function(){this.binding&&(this.binding.unbind(),this.binding.unrender()),(this.binding=this.createTwowayBinding())&&(this.binding.bind(),this.rendered&&this.binding.render())},e.rebound=function(e){d.prototype.rebound.call(this,e),this.attributes&&this.attributes.forEach(function(t){return t.rebound(e)}),this.binding&&this.binding.rebound(e)},e.render=function(t,e){var n=this;this.namespace=function(t){var e=t.getAttribute("xmlns");if(e)return e;if("svg"===t.name)return Ys;e=t.parent;if(e)return"foreignobject"===e.name?Qs:e.node.namespaceURI;return t.ractive.el.namespaceURI}(this);var i,r,s=!1;if(e)for(;i=e.shift();){if(i.nodeName.toUpperCase()===n.template.e.toUpperCase()&&i.namespaceURI===n.namespace){n.node=r=i,s=!0;break}ia(i)}!s&&this.node&&(r=this.node,t.appendChild(r),s=!0),r||(a=this.template.e,r=Fs(this.namespace===Qs?a.toLowerCase():a,this.namespace,this.getAttribute("is")),this.node=r),f(r,"_ractive",{value:{proxy:this},configurable:!0}),this.statics&&b(this.statics).forEach(function(t){r.setAttribute(t,n.statics[t])}),s&&this.foundNode&&this.foundNode(r);var a=this.intro;if(a&&a.shouldFire("intro")&&(a.isIntro=!0,a.isOutro=!1,br.registerTransition(a)),this.fragment&&(a=s?pt(r.childNodes):void 0,this.fragment.render(r,a),a&&a.forEach(ia)),s){this.binding&&this.binding.wasUndefined&&this.binding.setFromNode(r);for(var o=r.attributes.length;o--;){var h=r.attributes[o].name;h in n.attributeByName||n.statics&&h in n.statics||r.removeAttribute(h)}}if(this.up.cssIds&&r.setAttribute("data-ractive-css",this.up.cssIds.map(function(t){return"{"+t+"}"}).join(" ")),this.attributes)for(var u=this.attributes.length,l=0;l<u;l++)n.attributes[l].render();if(this.binding&&this.binding.render(),!this.up.delegate&&this.listeners){var c,d=this.listeners;for(c in d)d[c]&&d[c].length&&n.node.addEventListener(c,Qh,!!d[c].refs)}s||t.appendChild(r),this.rendered=!0},e.shuffled=function(){d.prototype.shuffled.call(this),this.decorators.forEach(Ut)},e.toString=function(){var t,e=this,n=this.template.e,i=this.attributes&&this.attributes.map(Fh).join("")||"";this.statics&&b(this.statics).forEach(function(t){return"class"!==t&&"style"!==t&&(i=" "+t+'="'+sa(e.statics[t])+'"'+i)}),"option"===this.name&&this.isSelected()&&(i+=" selected"),"input"===this.name&&(a=(t=this).attributeByName.name,"radio"===t.getAttribute("type")&&(a||{}).interpolator&&t.getAttribute("value")===a.interpolator.model.get())&&(i+=" checked");var r=this.statics?this.statics.style:void 0,s=this.statics?this.statics.class:void 0;this.attributes&&this.attributes.forEach(function(t){"class"===t.name?s=(s||"")+(s?" ":"")+sa(t.getString()):"style"===t.name?(r=(r||"")+(r?" ":"")+sa(t.getString()))&&!Lh.test(r)&&(r+=";"):t.style?r=(r||"")+(r?" ":"")+t.style+": "+sa(t.getString())+";":t.inlineClass&&t.getValue()&&(s=(s||"")+(s?" ":"")+t.inlineClass)}),void 0!==r&&(i=" style"+(r?'="'+r+'"':"")+i),void 0!==s&&(i=" class"+(s?'="'+s+'"':"")+i),this.up.cssIds&&(i+=' data-ractive-css="'+this.up.cssIds.map(function(t){return"{"+t+"}"}).join(" ")+'"');var a="<"+n+i+">";return Ye[this.name.toLowerCase()]?a:("textarea"===this.name&&void 0!==this.getAttribute("value")?a+=un(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(a+=this.getAttribute("value")||""),this.fragment&&(a+=this.fragment.toString(!/^(?:script|style)$/i.test(this.template.e))),a+="</"+n+">")},e.unbind=function(t){var e=this.attributes;if(e){e.unbinding=!0;for(var n=e.length,i=0;i<n;i++)e[i].unbind(t);e.unbinding=!1}this.binding&&this.binding.unbind(t),this.fragment&&this.fragment.unbind(t)},e.unrender=function(t){var e;this.rendered&&(this.rendered=!1,(e=this.intro)&&e.complete&&e.complete(),"option"===this.name?this.detach():t&&br.detachWhenReady(this),(t=this.outro)&&t.shouldFire("outro")&&(t.isIntro=!1,t.isOutro=!0,br.registerTransition(t)),this.fragment&&this.fragment.unrender(),this.binding&&this.binding.unrender())},e.update=function(){if(this.dirty){this.dirty=!1;var t=this.attributes;if(t)for(var e=t.length,n=0;n<e;n++)t[n].update();this.fragment&&this.fragment.update()}},t}(zr);function Fh(t){t=t.toString();return t?" "+t:""}var zh=!1;function Uh(){zh=!0}var $h=!1;function qh(){$h=!0}var Hh=!1;function Zh(){Hh=!0}function Wh(t){var e,n=t.type,i=t.currentTarget,r=i._ractive&&i._ractive.proxy,s=t.target,a=!0,o=!1;zh=$h=Hh=!1;var h=t.stopPropagation,u=t.stopImmediatePropagation,l=t.preventDefault;for(t.stopPropagation=Uh,t.stopImmediatePropagation=qh,t.preventDefault=Zh;a&&s&&s!==i;){var c=s._ractive&&s._ractive.proxy;if(c&&c.up.delegate===r&&function(t,e,n){if(Gh&&t instanceof Gh)for(var i=e;i&&i!==n;){if(i.disabled)return!1;i=i.parentNode||i.correspondingUseElement}return!0}(t,s,i)&&(e=c.listeners&&c.listeners[n]))for(var d=e.length,f=0;f<d;f++){if(a=!1!==e[f].call(s,t)&&a,$h){a=!1;break}zh&&(a=!1),Hh&&!o&&(o=!0,l.call(t))}s=s.parentNode||s.correspondingUseElement}return a=a&&(!zh&&!$h),zh&&h.call(t),$h&&u.call(t),t.stopPropagation=h,t.stopImmediaitePropagation=u,t.preventDefault=l,a}var Gh=null!==O?O.UIEvent:null;function Qh(t){var e,n=this._ractive.proxy;if(n.listeners&&(e=n.listeners[t.type]))for(var i=e.length,r=0;r<i;r++)e[r]&&e[r].call(this,t)}Is=function(n){function t(t){n.call(this,t),this.formBindings=[]}n&&(t.__proto__=n);var e=t.prototype=Object.create(n&&n.prototype);return e.constructor=t,e.render=function(t,e){n.prototype.render.call(this,t,e),this.on("reset",Yh)},e.unrender=function(t){this.off("reset",Yh),n.prototype.unrender.call(this,t)},t}(Dh);function Yh(){var t=this._ractive.proxy;br.start(),t.formBindings.forEach(Jh),br.end()}function Jh(t){t.model.set(t.resetValue)}function Xh(t,e){-1!==t.indexOf("*")&&$('Only component proxy-events may contain "*" wildcards, <'+e.name+" on-"+t+'="..."/> is not valid'),this.name=t,this.owner=e,this.handler=null}Sr=Xh.prototype;Sr.bind=function(){},Sr.render=function(n){function t(){var e=i.owner.node;i.owner.on(r,i.handler=function(t){return n.fire({node:e,original:t,event:t,name:r})})}var i=this,r=this.name;"load"!==r?br.scheduleTask(t,!0):t()},Sr.unbind=function(){},Sr.unrender=function(){this.handler&&this.owner.off(this.name,this.handler)};function tu(t,e,n,i){this.eventPlugin=t,this.owner=e,this.name=n,this.handler=null,this.args=i}e=tu.prototype;e.bind=function(){},e.render=function(n){var i=this;br.scheduleTask(function(){var e=i.owner.node;Vs.f=n.up,i.handler=i.eventPlugin.apply(i.owner.ractive,[e,function(t){return(t=void 0===t?{}:t).original?t.event=t.original:t.original=t.event,t.name=i.name,t.node=t.node||e,n.fire(t)}].concat(i.args||[])),Vs.f=null})},e.unbind=function(){},e.unrender=function(){var t=this;this.handler?this.handler.teardown():br.scheduleTask(function(){return t.handler&&t.handler.teardown()})};function eu(t,e){this.component=t,this.name=e,this.handler=null}T=eu.prototype;T.bind=function(i){var r=this.component.instance;this.handler=r.on(this.name,function(){for(var t,e=[],n=arguments.length;n--;)e[n]=arguments[n];return e[0]instanceof Es?((t=e.shift()).component=r,i.fire(t,e)):i.fire({},e),!1})},T.render=function(){},T.unbind=function(){this.handler.cancel()},T.unrender=function(){};var nu=/^(event|arguments|@node|@event|@context)(\..+)?$/,iu=/^\$(\d+)(\..+)?$/,Ms=function(t){this.owner=t.owner||t.up.owner||bs(t.up),this.element=this.owner.attributeByName?this.owner:bs(t.up,!0),this.template=t.template,this.up=t.up,this.ractive=t.up.ractive,this.events=[]},fa=Ms.prototype;fa.bind=function(){var n,i=this;if(this.events.length&&(this.events.forEach(function(t){return t.unrender()}),this.events=[]),this.element.type===be||this.element.type===ge)this.template.n.forEach(function(t){i.events.push(new eu(i.element,t))});else{if(n=this.template.a){var t=n.r.map(function(t){t=Mr(i.up,t);return t?t.get():void 0});try{n=ee(n.s,t.length).apply(null,t)}catch(t){n=null,Z("Failed to compute args for event on-"+this.template.n.join("- ")+": "+(t.message||t))}}this.template.n.forEach(function(t){var e=Y("events",i.ractive,t);e?i.events.push(new tu(e,i.element,t,n)):i.events.push(new Xh(t,i.element))})}this.models=null,ut(this.element.events||(this.element.events=[]),this),gh(this,this.template),this.fn||(this.action=this.template.f),this.events.forEach(function(t){return t.bind(i)})},fa.destroyed=function(){this.events.forEach(function(t){return t.unrender()})},fa.fire=function(r,s){var a=this;void 0===s&&(s=[]);var o=r instanceof Es&&r.refire?r:this.element.getContext(r);if(this.fn){var h=[],t=vh(0,this.template,this.up,{specialRef:function(t){var e=nu.exec(t);if(e)return{special:e[1],keys:e[2]?ot(e[2].substr(1)):[]};t=iu.exec(t);return t?{special:"arguments",keys:[t[1]-1].concat(t[2]?ot(t[2].substr(1)):[])}:void 0}});t&&t.forEach(function(t){if(!t)return h.push(void 0);if(t.special){for(var e=t.special,n="@node"===e?a.element.node:"@event"===e?r&&r.event:"event"===e?(W("The event reference available to event directives is deprecated and should be replaced with @context and @event"),o):"@context"===e?o:s,i=t.keys.slice();n&&i.length;)n=n[i.shift()];return h.push(n)}if(t.wrapper)return h.push(t.wrapperValue);h.push(t.get())});var e=this.ractive,n=e.event;e.event=o;var i=this.fn.apply(e,h),u=i.pop();return!1===u?(t=r?r.original:void 0)?(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()):W("handler '"+this.template.n.join(" ")+"' returned false, but there is no event available to cancel"):!i.length&&w(u)&&C(u[0])&&(u=os(this.ractive,u.shift(),o,u)),e.event=n,u}return os(this.ractive,this.action,o,s)},fa.handleChange=function(){},fa.render=function(){var e=this;this.events.forEach(function(t){return t.render(e)})},fa.toString=function(){return""},fa.unbind=function(e){dt(this.element.events,this),this.events.forEach(function(t){return t.unbind(e)})},fa.unrender=function(){this.events.forEach(function(t){return t.unrender()})};Nr=Ms.prototype;function ru(t,e,n,i){var r,s;n?((r=n[0])&&3===r.nodeType?(s=r.nodeValue.indexOf(i),n.shift(),0===s?r.nodeValue.length!==i.length&&n.unshift(r.splitText(i.length)):r.nodeValue=i):(r=t.node=N.createTextNode(i),n[0]?e.insertBefore(r,n[0]):e.appendChild(r)),t.node=r):(t.node||(t.node=N.createTextNode(i)),e.appendChild(t.node))}Nr.firstNode=Nr.rebound=Nr.update=B;var su=function(n){function t(t,e){n.call(this,null,null,null,"@undefined"),this.root=t.ractive.viewmodel,this.template=e,this.rootLink=!0,this.template=e,this.fragment=t,this.rebound()}n&&(t.__proto__=n);var e=t.prototype=Object.create(n&&n.prototype);return e.constructor=t,e.getKeypath=function(){return this.model?this.model.getKeypath():"@undefined"},e.rebound=function(){var n,i=this,r=this.fragment,s=this.template,a=this.base=ou(r,s);this.proxy&&au(this);var o=this.proxy={rebind:function(t,e){e===a?(t=Qt(s,t,e))!==a&&(i.base=a=t):~(n=h.indexOf(e))&&(t=Qt(s.m[n].n,t,e))!==h[n]&&h.splice(n,1,t||Yt),t!==e&&(e.unregister(o),t&&t.addShuffleTask(function(){return t.register(o)}))},handleChange:function(){t()}};a.register(o);var h=this.members=s.m.map(function(t){return C(t)?{get:function(){return t}}:((e=t.t===Ne?Mr(r,t.n):new ph(r,t)).register(o),e);var e}),t=function(){var t=a&&a.joinAll(h.reduce(function(t,e){e=e.get();return w(e)?t.concat(e):(t.push(st(String(e))),t)},[]));t!==i.model&&(i.model=t,i.relinking(t),At(),function t(e){var n=e.deps.length;var i,r;for(i=0;i<n;i++)(r=e.deps[i]).pathChanged&&r.pathChanged(),r.fragment&&r.fragment.pathModel&&r.fragment.pathModel.applyValue(e.getKeypath());n=e.children.length;for(i=0;i<n;i++)t(e.children[i])}(i),i.fragment.shuffled())};t()},e.teardown=function(){au(this),n.prototype.teardown.call(this)},e.unreference=function(){n.prototype.unreference.call(this),this.deps.length||this.refs||this.teardown()},e.unregister=function(t){n.prototype.unregister.call(this,t),this.deps.length||this.refs||this.teardown()},t}(Jt);function au(e){e.base&&e.base.unregister(e.proxy),e.models&&e.models.forEach(function(t){t.unregister&&t.unregister(e)})}ha=ph.prototype,Sr=su.prototype;function ou(t,e){return e.r?Mr(t,e.r):e.x?new ph(t,e.x):e.rx?new su(t,e.rx):void 0}Sr.unreference=ha.unreference,Sr.unregister=ha.unregister,Sr.unregisterLink=ha.unregisterLink;var hu=function(e){function t(t){e.call(this,t),t.owner&&(this.parent=t.owner),this.isStatic=!!t.template.s,this.model=null,this.dirty=!1}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.bind=function(t){var e=this.template.y?this.template.y.containerFragment:this.containerFragment||this.up,e=t||ou(e,this.template);if(e){var n=e.get();if(this.isStatic)return this.model={get:function(){return n}},void e.unreference();e.register(this),this.model=e}},n.handleChange=function(){this.bubble()},n.rebind=function(t,e,n){if(!this.isStatic)return(t=Qt(this.template,t,e,this.up))!==this.model&&(this.model&&this.model.unregister(this),t&&t.addShuffleRegister(this,"mark"),this.model=t,n||this.handleChange(),!0)},n.rebound=function(t){var e;this.model&&(this.model.rebound?this.model.rebound(t):(e=ou(this.template.y?this.template.y.containerFragment:this.containerFragment||this.up,this.template))!==this.model&&(this.model.unregister(this),this.bind(e)),t&&this.bubble()),this.fragment&&this.fragment.rebound(t)},n.unbind=function(){this.isStatic||(this.model&&this.model.unregister(this),this.model=void 0)},t}(So);function uu(t){hu.call(this,t)}e=uu.prototype=Object.create(zr.prototype);u(e,hu.prototype,{constructor:uu});var T=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.bubble=function(){this.owner&&this.owner.bubble(),t.prototype.bubble.call(this)},n.detach=function(){return ia(this.node)},n.firstNode=function(){return this.node},n.getString=function(){return this.model?ra(this.model.get()):""},n.render=function(t,e){var n;Ho||(n=this.value=this.getString(),this.rendered=!0,ru(this,t,e,n))},n.toString=function(t){var e=this.getString();return t?un(e):e},n.unrender=function(t){t&&this.detach(),this.rendered=!1},n.update=function(){var t;this.dirty&&(this.dirty=!1,!this.rendered||(t=this.getString())!==this.value&&(this.node.data=this.value=t))},n.valueOf=function(){return this.model?this.model.get():void 0},e}(hu),fa=function(n){function t(){n.apply(this,arguments)}n&&(t.__proto__=n);var e=t.prototype=Object.create(n&&n.prototype);return e.constructor=t,e.render=function(t,e){n.prototype.render.call(this,t,e),this.node.defaultValue=this.node.value},e.compare=function(t,e){var n=this.getAttribute("value-comparator");if(n){if(k(n))return n(t,e);if(t&&e)return t[n]==e[n]}return t==e},t}(Dh),lu={true:!0,false:!1,null:null,undefined:void 0},cu=new RegExp("^(?:"+b(lu).join("|")+")"),du=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,fu=/\$\{([^\}]+)\}/g,pu=/^\$\{([^\}]+)\}/,mu=/^\s*$/,gu=ae.extend({init:function(t,e){this.values=e.values,this.sp()},postProcess:function(t){return 1===t.length&&mu.test(this.leftover)?{value:t[0].v}:null},converters:[function(t){if(!t.values)return null;var e=t.matchPattern(pu);return e&&v(t.values,e)?{v:t.values[e]}:void 0},function(t){t=t.matchPattern(cu);if(t)return{v:lu[t]}},function(t){t=t.matchPattern(du);if(t)return{v:+t}},function(t){var e=wn(t),n=t.values;return e&&n?{v:e.v.replace(fu,function(t,e){return e in n?n[e]:e})}:e},function(t){if(!t.matchString("{"))return null;var e,n={};if(t.sp(),t.matchString("}"))return{v:n};for(;e=function(t){t.sp();var e=jn(t);if(!e)return null;e={key:e};if(t.sp(),!t.matchString(":"))return null;t.sp();t=t.read();return t?(e.value=t.v,e):null}(t);){if(n[e.key]=e.value,t.sp(),t.matchString("}"))return{v:n};if(!t.matchString(","))return null}return null},function(t){if(!t.matchString("["))return null;var e,n=[];if(t.sp(),t.matchString("]"))return{v:n};for(;e=t.read();){if(n.push(e.v),t.sp(),t.matchString("]"))return{v:n};if(!t.matchString(","))return null;t.sp()}return null}]});function vu(t,e){return new gu(t,{values:e}).result}var yu=function(e){function t(t){e.call(this,t),this.name=t.template.n,this.owner=t.owner||t.up.owner||t.element||bs(t.up),this.element=t.element||(this.owner.attributeByName?this.owner:bs(t.up)),this.up=this.element.up,this.ractive=this.up.ractive,(this.element.attributeByName[this.name]=this).value=t.template.f}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.bind=function(){var t,e=this.template.f,n=this.element.instance.viewmodel;0===e?n.joinKey(this.name).set(!0):C(e)?(t=vu(e),n.joinKey(this.name).set(t?t.value:e)):w(e)&&function(t){var e=t.template.f,n=t.element.instance.viewmodel,i=n.value;{var r,s;1===e.length&&e[0].t===oe?(r=ou(t.up,e[0]),s=r.get(!1),e[0].s?!y(s)||e[0].x?n.joinKey(ot(t.name)).set(s):Z("Cannot copy non-computed object value from static mapping '"+t.name+"'"):(t.model=r,t.link=n.createLink(t.name,r,e[0].r,{mapping:!0}),_(s)&&!r.isReadonly&&t.name in i&&r.set(i[t.name])),r!==t.model&&r.unregister()):(t.boundFragment=new vl({owner:t,template:e}).bind(),t.model=n.joinKey(ot(t.name)),t.model.set(t.boundFragment.valueOf()),t.boundFragment.bubble=function(){vl.prototype.bubble.call(t.boundFragment),br.scheduleTask(function(){t.boundFragment.update(),t.model.set(t.boundFragment.valueOf())})})}}(this)},n.rebound=function(t){this.boundFragment&&this.boundFragment.rebound(t),this.link&&(this.model=ou(this.up,this.template.f[0]),this.element.instance.viewmodel.joinAll(ot(this.name)).link(this.model,this.name,{mapping:!0}))},n.render=function(){},n.unbind=function(t){this.model&&this.model.unregister(this),this.boundFragment&&this.boundFragment.unbind(t),this.element.bound&&this.link.target===this.model&&this.link.owner.unlink()},n.unrender=function(){},n.update=function(){this.dirty&&(this.dirty=!1,this.boundFragment&&this.boundFragment.update())},t}(So);Nr=function(n){function t(t){var e=t.template;e.a||(e.a={}),!_(e.a.value)||"disabled"in e.a||(e.a.value=e.f||""),n.call(this,t),this.select=bs(this.parent||this.up,!1,"select")}n&&(t.__proto__=n);var e=t.prototype=Object.create(n&&n.prototype);return e.constructor=t,e.bind=function(){var t;this.select?((t=this.attributeByName.selected)&&void 0!==this.select.getAttribute("value")&&(t=this.attributes.indexOf(t),this.attributes.splice(t,1),delete this.attributeByName.selected),n.prototype.bind.call(this),this.select.options.push(this)):n.prototype.bind.call(this)},e.bubble=function(){var t=this.getAttribute("value");this.node&&this.node.value!==t&&(this.node._ractive.value=t),n.prototype.bubble.call(this)},e.getAttribute=function(t){var e=this.attributeByName[t];return e?e.getValue():"value"===t&&this.fragment?this.fragment.valueOf():void 0},e.isSelected=function(){var t=this.getAttribute("value");if(_(t)||!this.select)return!1;var e=this.select.getAttribute("value");if(this.select.compare(e,t))return!0;if(this.select.getAttribute("multiple")&&w(e))for(var n=e.length;n--;)if(this.select.compare(e[n],t))return!0},e.render=function(t,e){n.prototype.render.call(this,t,e),this.attributeByName.value||(this.node._ractive.value=this.getAttribute("value"))},e.unbind=function(t){n.prototype.unbind.call(this,t),this.select&&dt(this.select.options,this)},t}(Dh);function bu(t,e,n){n=function(t,e,n){var i=function t(e,n){if(n)return n.template&&n.template.p&&!w(n.template.p)&&v(n.template.p,e)?n.template.p[e]:n.up&&n.up.owner?t(e,n.up.owner):void 0}(e,n.owner);if(i)return i;var r,s=J("partials",t,e);if(s){if(k(i=s.partials[e])){if((r=i).styleSet)return r;(r=i.bind(s)).isOwner=v(s.partials,e),i=r.call(t,dr)}if(i||""===i)return dr.isParsed(i)||((n=dr.parseFor(i,s)).p&&Z("Partials ({{>%s}}) cannot contain nested inline partials",e,{ractive:t}),(r?s:function(t,e){return v(t.partials,e)?t:function t(e,n){if(!e)return;return v(e.partials,n)?e:t(e.Parent,n)}(t.constructor,e)}(s,e)).partials[e]=i=n.t),r&&(i._fn=r),i.v?(ne(i),s.partials[e]=i.t):i;Z(Q,e,"partial","partial",{ractive:t})}}(t,e,n||{});if(n)return n;if(n=dr.fromId(e,{noThrow:!0})){n=dr.parseFor(n,t);return n.p&&function(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];for(var i=0;i<e.length;i++){var r,s=e[i];for(r in s)r in t||!v(s,r)||(t[r]=s[r])}}(t.partials,n.p),t.partials[e]=n.t}}function wu(t){uu.call(this,t);var e=t.template;e.t===we?this.yielder=1:e.t===de&&(this.type=fe,this.macro=t.macro)}Sr=wu.prototype=A(uu.prototype);function xu(t){t.template.c&&(t.partial=[{t:ue,n:Be,f:t.partial}],u(t.partial[0],t.template.c),t.yielder?t.partial[0].y=t:t.partial[0].z=t.template.z)}function ku(t,e,n){var i=e;return w(i)?t.partial=i:i&&y(i)?w(i.t)?t.partial=i.t:C(i.template)&&(t.partial=Au(i.template,i.template,t.ractive).t):k(i)&&i.styleSet?(t.fn=i,t.fragment&&(t.fragment.cssIds=i._cssIds)):null!=i&&((i=bu(t.ractive,""+i,t.containerFragment||t.up))?(t.name=e,i.styleSet?(t.fn=i,t.fragment&&(t.fragment.cssIds=i._cssIds)):t.partial=i):n?t.partial=Au(""+e,""+e,t.ractive).t:t.name=e),t.partial}function _u(t,e){var n=this.fragment.aliases||(this.fragment.aliases={});e?n[e]=this._data.joinAll(ot(t)):n[t]=this._data}u(Sr,{constructor:wu,bind:function(){var t=this.template;if(this.yielder){if(this.container=this.up.ractive,this.component=this.container.component,this.containerFragment=this.up,!this.component)return this.fragment=new vl({owner:this,template:[]}),void this.fragment.bind();this.up=this.component.up,t.r||t.x||t.rx||(this.refName="content")}this.macro?this.fn=this.macro:(this.refName||(this.refName=t.r),this.refName&&ku(this,this.refName),this.partial||this.fn||(uu.prototype.bind.call(this),this.model&&ku(this,this.model.get()))),this.partial||this.fn||W("Could not find template for partial '"+this.name+"'"),function(t,e){t.partial=t.last=e,xu(t);e={owner:t,template:t.partial};t.yielder&&(e.ractive=t.container.parent);t.fn&&(e.cssIds=t.fn._cssIds);t.fragment=new vl(e)}(this,this.partial||[]),this.fn&&Su(this),this.fragment.bind()},bubble:function(){this.dirty||(this.dirty=!0,(this.yielder?this.containerFragment:this.up).bubble())},findNextNode:function(){return(this.containerFragment||this.up).findNextNode(this)},handleChange:function(){this.dirtyTemplate=!0,this.externalChange=!0,this.bubble()},rebound:function(e){var n=this;this._attrs&&b(this._attrs).forEach(function(t){return n._attrs[t].rebound(e)}),uu.prototype.rebound.call(this,e)},refreshAttrs:function(){var e=this;b(this._attrs).forEach(function(t){e.handle.attributes[t]=!e._attrs[t].items.length||e._attrs[t].valueOf()})},resetTemplate:function(){var t=this;if(this.fn&&this.proxy){if(this.last=0,!this.externalChange)return this.partial=this.fnTemplate,!0;k(this.proxy.teardown)&&this.proxy.teardown(),this.fn=this.proxy=null}if(this.partial=null,this.refName&&(this.partial=bu(this.ractive,this.refName,this.up)),!this.partial&&this.model&&ku(this,this.model.get()),!this.fn){if(this.last&&this.partial===this.last)return!1;this.partial&&(this.last=this.partial,xu(this))}return this.unbindAttrs(),this.fn?(Su(this),k(this.proxy.render)&&br.scheduleTask(function(){return t.proxy.render()})):this.partial||W("Could not find template for partial '"+this.name+"'"),!0},render:function(t,e){this.fn&&this.fn._cssDef&&!this.fn._cssDef.applied&&Oa(),this.fragment.render(t,e),this.proxy&&k(this.proxy.render)&&this.proxy.render()},unbind:function(t){this.fragment.unbind(t),this.unbindAttrs(t),uu.prototype.unbind.call(this,t)},unbindAttrs:function(e){var n=this;this._attrs&&b(this._attrs).forEach(function(t){n._attrs[t].unbind(e)})},unrender:function(t){this.proxy&&k(this.proxy.teardown)&&this.proxy.teardown(),this.fragment.unrender(t)},update:function(){var e=this,t=this.proxy;this.updating=1,this.dirtyAttrs&&(this.dirtyAttrs=!1,b(this._attrs).forEach(function(t){return e._attrs[t].update()}),this.refreshAttrs(),k(t.update)&&t.update(this.handle.attributes)),this.dirtyTemplate&&(this.dirtyTemplate=!1,this.resetTemplate()&&this.fragment.resetTemplate(this.partial||[])),this.dirty&&(this.dirty=!1,t&&k(t.invalidate)&&t.invalidate(),this.fragment.update()),this.externalChange=!1,this.updating=0}});var Eu="extra-attributes";function Su(n){var i,t,e=n.fn,r=n.fragment,s=n.template=u({},n.template),a=n.handle=r.getContext({proxy:n,aliasLocal:_u,name:n.template.e||n.name,attributes:{},setTemplate:function(t){if(ku(this,t,!0),!this.initing){if(this.dirtyTemplate=!0,this.fnTemplate=this.partial,!this.updating){t=br.start();return this.bubble(),br.end(),t}this.bubble(),br.promise()}}.bind(n),template:s,macro:e});s.p||(s.p={}),s.p=a.partials=u({},s.p),v(s.p,"content")||(s.p.content=s.f||[]),w(e.attributes)?(n._attrs={},i=function(){this.dirty=!0,n.dirtyAttrs=!0,n.bubble()},w(s.m)?(t=s.m,s.p[Eu]=s.m=t.filter(function(t){return!~e.attributes.indexOf(t.n)}),t.filter(function(t){return~e.attributes.indexOf(t.n)}).forEach(function(t){var e=new vl({template:t.f,owner:n});e.bubble=i,e.findFirstNode=B,n._attrs[t.n]=e})):s.p[Eu]=[]):s.p[Eu]=s.m,n._attrs&&(b(n._attrs).forEach(function(t){n._attrs[t].bind()}),n.refreshAttrs()),n.initing=1,n.proxy=e.call(n.ractive,a,a.attributes)||{},n.partial||(n.partial=[]),n.fnTemplate=n.partial,n.initing=0,xu(n),r.resetTemplate(n.partial)}function Au(e,t,n){var i;try{i=dr.parse(t,dr.getParseOptions(n))}catch(t){Z("Could not parse partial from expression '"+e+"'\n"+t.message)}return i||{t:[]}}function Cu(t,e,n){this.value=this.key=t,this.context=e,this.isReadonly=this.isKey=!0,this.deps=[],this.links=[],this.children=[],this.instance=n}ha=Cu.prototype;ha.applyValue=function(t){t!==this.value&&(this.value=this.key=t,this.deps.forEach(Bt),this.links.forEach(Bt),this.children.forEach(function(t){t.applyValue(t.context.getKeypath(t.instance))}))},ha.destroyed=function(){this.upstream&&this.upstream.unregisterChild(this)},ha.get=function(t){return t&&Pt(this),ht(this.value)},ha.getKeypath=function(){return ht(this.value)},ha.has=function(){return!1},ha.rebind=function(t,e){for(var n=this.deps.length;n--;)this.deps[n].rebind(t,e,!1);for(n=this.links.length;n--;)this.links[n].relinking(t,!1)},ha.register=function(t){this.deps.push(t)},ha.registerChild=function(t){ut(this.children,t),t.upstream=this},ha.registerLink=function(t){ut(this.links,t)},ha.unregister=function(t){dt(this.deps,t)},ha.unregisterChild=function(t){dt(this.children,t)},ha.unregisterLink=function(t){dt(this.links,t)},Cu.prototype.reference=B,Cu.prototype.unreference=B;function Ou(t){this.parent=t.owner.up,(this.up=this).owner=t.owner,this.ractive=this.parent.ractive,this.delegate=!1!==this.ractive.delegate&&(this.parent.delegate||function(t){var e,n,i=t;t:for(;i;){for(n=0;!n&&i;){if(i.owner.type===de&&(n=i.owner),i.owner.ractive&&!1===i.owner.ractive.delegate)break t;i=i.parent||i.componentParent}if(!1===n.delegate)break t;for(e=n.delegate||n;i&&!i.iterations;){if(i.owner.ractive&&!1===i.owner.ractive.delegate)break t;i=i.parent||i.componentParent}}return e}(this.parent)),this.delegate&&!1===this.delegate.delegate&&(this.delegate=!1),this.delegate&&(this.delegate.delegate=this.delegate),this.cssIds="cssIds"in t?t.cssIds:this.parent?this.parent.cssIds:null,this.context=null,this.rendered=!1,this.iterations=[],this.template=t.template,this.indexRef=t.indexRef,this.keyRef=t.keyRef,this.pendingNewIndices=null,this.previousIterations=null,this.isArray=!1}var Nu=/^"(\\"|[^"])+"$/,zr=Ou.prototype;function ju(t,e,n,i){var r=t.context?Vu(t,0,n):void 0;e.key=n,e.index=i,e.context=r,t.source&&(e.lastValue=r&&r.get()),e.idxModel&&e.idxModel.applyValue(i),e.keyModel&&e.keyModel.applyValue(n),e.pathModel&&(e.pathModel.context=r,e.pathModel.applyValue(r.getKeypath())),e.rootModel&&(e.rootModel.context=r,e.rootModel.applyValue(r.getKeypath(e.ractive.root)));var s=e.aliases;t.aliases&&t.aliases.forEach(function(t){"."===t.x.r?s[t.n]=r:"@index"===t.x.r?s[t.n]=e.getIndex():"@key"===t.x.r?s[t.n]=e.getKey():"@keypath"===t.x.r?s[t.n]=e.getKeypath():"@rootpath"===t.x.r&&(s[t.n]=e.getKeypath(!0))})}function Tu(t,e){t=t.context.get()||[];return!0===e?t.slice():t.map(function(t){return e.reduce(function(t,e){return t&&t[e]},t)})}function Vu(t,e,n){if(t.source){var i,r=t.source.model.get();if(r.indexOf&&~(i=r.indexOf(t.context.joinKey(n).get())))return t.source.model.joinKey(i)}return t.context.joinKey(n)}zr.bind=function(t){var n=this;this.context=t,this.bound=!0;var e=t.get(),i=this.aliases=this.owner.template.z&&this.owner.template.z.slice(),r=i&&i.find(function(t){return"shuffle"===t.n});r&&r.x&&r.x.x&&("true"===r.x.x.s?this.shuffler=!0:Nu.test(r.x.x.s)&&(this.shuffler=ot(r.x.x.s.slice(1,-1)))),this.shuffler&&(this.values=Tu(this,this.shuffler)),this.source&&this.source.model.unbind(this.source);var s,i=t.isComputed&&i&&i.find(function(t){return"source"===t.n});if(i&&i.x&&i.x.r&&(s=ou(this,i.x),this.source={handleChange:function(){},rebind:function(t){this.model.unregister(this),(this.model=t).register(this)}},(this.source.model=s).register(this.source)),this.isArray=w(e)){this.iterations=[];for(var a=this.length=e.length,o=0;o<a;o+=1)n.iterations[o]=n.createIteration(o,o)}else x(e)&&(this.isArray=!1,this.indexRef&&(s=this.indexRef.split(","),this.keyRef=s[0],this.indexRef=s[1]),e=b(e),this.length=e.length,this.iterations=e.map(function(t,e){return n.createIteration(t,e)}));return this},zr.bubble=function(t){this.bubbled||(this.bubbled=[]),this.bubbled.push(t),this.rebounding||this.owner.bubble()},zr.createIteration=function(t,e){var n=new vl({owner:this,template:this.template});return n.isIteration=!0,n.delegate=this.delegate,this.aliases&&(n.aliases={}),ju(this,n,t,e),n.bind(n.context)},zr.destroyed=function(){for(var t=this.iterations.length,e=0;e<t;e++)this.iterations[e].destroyed();this.pathModel&&this.pathModel.destroyed(),this.rootModel&&this.rootModel.destroyed()},zr.detach=function(){var e=ea();return this.iterations.forEach(function(t){return e.appendChild(t.detach())}),e},zr.find=function(e,n){return mt(this.iterations,function(t){return t.find(e,n)})},zr.findAll=function(e,n){return this.iterations.forEach(function(t){return t.findAll(e,n)})},zr.findAllComponents=function(e,n){return this.iterations.forEach(function(t){return t.findAllComponents(e,n)})},zr.findComponent=function(e,n){return mt(this.iterations,function(t){return t.findComponent(e,n)})},zr.findContext=function(){return this.context},zr.findNextNode=function(t){if(t.index<this.iterations.length-1)for(var e=t.index+1;e<this.iterations.length;e++){var n=this.iterations[e].firstNode(!0);if(n)return n}return this.owner.findNextNode()},zr.firstNode=function(t){return this.iterations[0]?this.iterations[0].firstNode(t):null},zr.getLast=function(){return this.lastModel||(this.lastModel=new Cu(this.length-1))},zr.rebind=function(t){var e=this;this.context=t,this.source||t&&this.iterations.forEach(function(t){ju(e,t,t.key,t.index)})},zr.rebound=function(n){var i=this;this.context=this.owner.model,this.iterations.forEach(function(t,e){t.context=Vu(i,0,e),t.rebound(n)})},zr.render=function(t,e){var n=this.iterations;if(n)for(var i=n.length,r=0;r<i;r++)n[r].render(t,e);this.rendered=!0},zr.shuffle=function(t,i){var r=this;this.pendingNewIndices||(this.previousIterations=this.iterations.slice()),this.pendingNewIndices||(this.pendingNewIndices=[]),this.pendingNewIndices.push(t);var s=[];t.forEach(function(t,e){var n;-1!==t&&(n=r.iterations[e],s[t]=n,t!==e&&n&&(n.dirty=!0,i&&(n.shouldRebind=1)))}),this.iterations=s,i||this.bubble()},zr.shuffled=function(){this.iterations.forEach(Ut)},zr.toString=function(t){return this.iterations?this.iterations.map(t?Gt:Wt).join(""):""},zr.unbind=function(t){this.bound=!1,this.source&&this.source.model.unregister(this.source);for(var e=this.pendingNewIndices?this.previousIterations:this.iterations,n=e.length,i=0;i<n;i++)e[i].unbind(t);return this},zr.unrender=function(t){for(var e=this.iterations.length,n=0;n<e;n++)this.iterations[n].unrender(t);if(this.pendingNewIndices&&this.previousIterations)for(var e=this.previousIterations.length,i=0;i<e;i++)this.previousIterations[i].unrender(t);this.rendered=!1},zr.update=function(){var n=this;if(this.pendingNewIndices)return this.bubbled.length=0,void this.updatePostShuffle();if(!this.updating){if(this.updating=!0,this.shuffler){var t=Tu(this,this.shuffler),e=gt(this.values,t);e.same?this.iterations.forEach(Zt):(this.shuffle(e,!0),this.updatePostShuffle())}else{for(var i=this.iterations.length,r=0;r<i;r++){var s=n.iterations[r];s&&s.idxModel&&s.idxModel.applyValue(r)}var a,o,h,u=this.context.get(),t=this.isArray,e=!0;if(this.isArray=w(u))this.source&&(this.rebounding=1,h=this.source.model.get(),this.iterations.forEach(function(t,e){e<u.length&&t.lastValue!==u[e]&&~(y=h.indexOf(u[e]))&&(ju(n,t,e,e),t.rebound(!0))}),this.rebounding=0),t&&(e=!1,this.iterations.length>u.length&&(a=this.iterations.splice(u.length)));else if(x(u)&&!t)for(e=!1,a=[],o={},y=this.iterations.length;y--;){var l=n.iterations[y];l.key in u?o[l.key]=!0:(n.iterations.splice(y,1),a.push(l))}var c,t=w(u)?u.length:x(u)?b(u).length:0;if(this.length=t,this.updateLast(),e&&(a=this.iterations,this.iterations=[]),a)for(var i=a.length,d=0;d<i;d++)a[d].unbind().unrender(!0);if(!e&&this.isArray&&this.bubbled&&this.bubbled.length){var f=this.bubbled;this.bubbled=[],i=f.length;for(var p=0;p<i;p++)n.iterations[f[p]]&&n.iterations[f[p]].update()}else{i=this.iterations.length;for(var m=0;m<i;m++)n.iterations[m].update()}if(t>this.iterations.length){var g,v=this.rendered?ea():null,y=this.iterations.length;if(w(u))for(;y<u.length;)c=n.createIteration(y,y),n.iterations.push(c),n.rendered&&c.render(v),y+=1;else x(u)&&(this.indexRef&&!this.keyRef&&(g=this.indexRef.split(","),this.keyRef=g[0],this.indexRef=g[1]),b(u).forEach(function(t){o&&t in o||(c=n.createIteration(t,y),n.iterations.push(c),n.rendered&&c.render(v),y+=1)}));this.rendered&&(t=this.parent.findParentNode(),g=this.parent.findNextNode(this.owner),t.insertBefore(v,g))}}this.updating=!1}},zr.updateLast=function(){this.lastModel&&this.lastModel.applyValue(this.length-1)},zr.updatePostShuffle=function(){var i=this.pendingNewIndices[0],t=this.rendered?this.parent.findParentNode():null,e=t&&this.owner.findNextNode(),n=t?ea():null;this.pendingNewIndices.slice(1).forEach(function(n){i.forEach(function(t,e){i[e]=n[t]})});var r,s,a,o,h,u,l=this.length=this.context.get().length,c=this.previousIterations,d=this.iterations,f=this.context.get(),p={},m=new Array(i.length);for(i.forEach(function(t,e){return m[t]=e}),this.updateLast(),r=a=0;r<l;)_(m[r])?(o=d[r]=this.createIteration(r,r),t&&(h=(h=c[a])&&t&&h.firstNode()||e,o.render(n),t.insertBefore(n,h)),r++):(-1===(s=i[a])?(c[a]&&c[a].unbind().unrender(!0),c[a++]=0):r<s?(p[s]=c[a],c[a++]=null):(d[r]=o=d[r]||p[r]||this.createIteration(r,r),!p[r]&&a===r||(u=this.source&&o.lastValue!==f[r],ju(this,o,r,r)),!t||!p[r]&&c[a]||(h=(h=c[a+1])&&t&&h.firstNode()||e,p[r]?t.insertBefore(o.detach(),h):(o.render(n),t.insertBefore(n,h))),c[a++]=0,r++),o&&y(o)&&((o.shouldRebind||u)&&(o.rebound(u),o.shouldRebind=0),o.update(),o.shuffled()));for(var g=c.length,v=0;v<g;v++)c[v]&&c[v].unbind().unrender(!0);this.shuffler&&(this.values=Tu(this,this.shuffler)),this.pendingNewIndices=null,this.previousIterations=null},Ou.prototype.getContext=Dr,Ou.prototype.getKeypath=yl;e=function(i){function t(t){i.call(this,t),this.isAlias=19===t.template.t,this.sectionType=t.template.n||this.isAlias&&Be||null,this.templateSectionType=this.sectionType,this.subordinate=1===t.template.l,this.fragment=null}i&&(t.__proto__=i);var e=t.prototype=Object.create(i&&i.prototype);return e.constructor=t,e.bind=function(){i.prototype.bind.call(this),this.subordinate&&(this.sibling=this.up.items[this.up.items.indexOf(this)-1],this.sibling.nextSibling=this),this.model||this.isAlias?(this.dirty=!0,this.update()):!this.sectionType||51!==this.sectionType||this.sibling&&this.sibling.isTruthy()||(this.fragment=new vl({owner:this,template:this.template.f}).bind())},e.bubble=function(){!this.dirty&&this.yield?(this.dirty=!0,this.containerFragment.bubble()):i.prototype.bubble.call(this)},e.detach=function(){var t=this.fragment||this.detached;return t?t.detach():i.prototype.detach.call(this)},e.findNextNode=function(){return(this.containerFragment||this.up).findNextNode(this)},e.isTruthy=function(){if(this.subordinate&&this.sibling.isTruthy())return!0;var t=this.model?this.model.isRoot?this.model.value:this.model.get():void 0;return!(!t||54!==this.templateSectionType&&(!(t=t)||w(t)&&0===t.length||x(t)&&0===b(t).length))},e.rebind=function(t,e,n){i.prototype.rebind.call(this,t,e,n)&&this.fragment&&50!==this.sectionType&&51!==this.sectionType&&this.fragment.rebind(t)},e.rebound=function(t){this.model&&(this.model.rebound?this.model.rebound(t):(i.prototype.unbind.call(this),i.prototype.bind.call(this),this.sectionType!==Be&&54!==this.sectionType&&52!==this.sectionType||this.fragment&&this.fragment.rebind(this.model),t&&this.bubble())),this.fragment&&this.fragment.rebound(t)},e.render=function(t,e){this.rendered=!0,this.fragment&&this.fragment.render(t,e)},e.shuffle=function(t){this.fragment&&52===this.sectionType&&this.fragment.shuffle(t)},e.unbind=function(t){i.prototype.unbind.call(this,t),this.fragment&&this.fragment.unbind(t)},e.unrender=function(t){this.rendered&&this.fragment&&this.fragment.unrender(t),this.rendered=!1},e.update=function(){var t,e,n,i,r,s=this;this.dirty&&(this.fragment&&50!==this.sectionType&&51!==this.sectionType&&(this.fragment.context=this.model),(this.model||51===this.sectionType||this.isAlias)&&(this.dirty=!1,t=this.model?this.model.isRoot?this.model.value:this.model.get():void 0,e=!this.subordinate||!this.sibling.isTruthy(),n=this.sectionType,this.yield&&this.yield!==t?(this.up=this.containerFragment,this.container=null,this.yield=null,this.rendered&&this.fragment.unbind().unrender(!0),this.fragment=null):this.rendered&&!this.yield&&t instanceof Es&&(this.rendered&&this.fragment&&this.fragment.unbind().unrender(!0),this.fragment=null),null!==this.sectionType&&null!==this.templateSectionType||(this.sectionType=(i=t,this.template.i||w(i)?52:c(i)?54:_(i)?null:50)),n&&n!==this.sectionType&&this.fragment&&(this.rendered&&this.fragment.unbind().unrender(!0),this.fragment=null),52===this.sectionType||this.sectionType===Be||e&&(51===this.sectionType?!this.isTruthy():this.isTruthy())||this.isAlias?(this.fragment||(this.fragment=this.detached),this.fragment?(this.detached&&(Pu(this,this.fragment),this.detached=!1,this.rendered=!0),this.fragment.bound||this.fragment.bind(this.model),this.fragment.update()):r=52===this.sectionType?new Ou({owner:this,template:this.template.f,indexRef:this.template.i}).bind(this.model):(r=50!==this.sectionType&&51!==this.sectionType?this.model:null,t instanceof Es&&(this.yield=t,this.containerFragment=this.up,this.up=t.fragment,this.container=t.ractive,r=void 0),new vl({owner:this,template:this.template.f}).bind(r))):(this.fragment&&this.rendered?!0!==$r?this.fragment.unbind().unrender(!0):(this.unrender(!1),this.detached=this.fragment,br.promise().then(function(){s.detached&&s.detach()})):this.fragment&&this.fragment.unbind(),this.fragment=null),r&&(this.rendered&&Pu(this,r),this.fragment=r),this.nextSibling&&(this.nextSibling.dirty=!0,this.nextSibling.update())))},t}(uu);function Pu(t,e){var n,i=(t.containerFragment||t.up).findNextNode(t);i?(n=ea(),e.render(n),i.parentNode.insertBefore(n,i)):e.render(t.up.findParentNode())}var Mu,Sr=function(r){function t(t){r.call(this,t),this.options=[]}r&&(t.__proto__=r);var e=t.prototype=Object.create(r&&r.prototype);return e.constructor=t,e.foundNode=function(t){!this.binding||0<(t=jh(t)).length&&(this.selectedOptions=t)},e.render=function(t,e){r.prototype.render.call(this,t,e),this.sync();for(var n=this.node,i=n.options.length;i--;)n.options[i].defaultSelected=n.options[i].selected;this.rendered=!0},e.sync=function(){var n=this,t=this.node;if(t){var e=pt(t.options);if(this.selectedOptions)return e.forEach(function(t){0<=n.selectedOptions.indexOf(t)?t.selected=!0:t.selected=!1}),this.binding.setFromNode(t),void delete this.selectedOptions;var i,r=this.getAttribute("value"),s=this.getAttribute("multiple"),a=s&&w(r);void 0!==r?(e.forEach(function(t){var e=(t._ractive||t).value,e=s?a&&n.valueContains(r,e):n.compare(r,e);e&&(i=!0),t.selected=e}),i||s||this.binding&&this.binding.forceUpdate()):this.binding&&this.binding.forceUpdate&&this.binding.forceUpdate()}},e.valueContains=function(t,e){for(var n=t.length;n--;)if(this.compare(e,t[n]))return!0},e.compare=function(t,e){var n=this.getAttribute("value-comparator");if(n){if(k(n))return n(e,t);if(e&&t)return e[n]==t[n]}return e==t},e.update=function(){var t=this.dirty;r.prototype.update.call(this),t&&this.sync()},t}(Dh),ha=function(n){function t(t){var e=t.template;t.deferContent=!0,n.call(this,t),this.attributeByName.value||(e.f&&Kh({template:e})?(this.attributes||(this.attributes=[])).push(ml({owner:this,template:{t:ve,f:e.f,n:"value"},up:this.up})):this.fragment=new vl({owner:this,cssIds:null,template:e.f}))}n&&(t.__proto__=n);var e=t.prototype=Object.create(n&&n.prototype);return e.constructor=t,e.bubble=function(){var t=this;this.dirty||(this.dirty=!0,this.rendered&&!this.binding&&this.fragment&&br.scheduleTask(function(){t.dirty=!1,t.node.value=t.fragment.toString()}),this.up.bubble())},t}(fa),Iu=function(e){function t(t){e.call(this,t),this.type=1}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.detach=function(){return ia(this.node)},n.firstNode=function(){return this.node},n.render=function(t,e){Ho||(this.rendered=!0,ru(this,t,e,this.template))},n.toString=function(t){return t?un(this.template):this.template},n.unrender=function(t){this.rendered&&t&&this.detach(),this.rendered=!1},n.valueOf=function(){return this.template},t}(So),zr=Iu.prototype;zr.bind=zr.unbind=zr.update=B;var Ru,Bu,Ku,Lu="hidden";if(N){if(Lu in N)Ru="";else for(var Du=M.length;Du--;){var Fu=M[Du];if((Lu=Fu+"Hidden")in N){Ru=Fu;break}}void 0!==Ru?(N.addEventListener(Ru+"visibilitychange",zu),zu()):("onfocusout"in N?(N.addEventListener("focusout",Uu),N.addEventListener("focusin",$u)):(O.addEventListener("pagehide",Uu),O.addEventListener("blur",Uu),O.addEventListener("pageshow",$u),O.addEventListener("focus",$u)),Mu=!0)}function zu(){Mu=!N[Lu]}function Uu(){Mu=!1}function $u(){Mu=!0}var qu,Hu,Zu,Wu,Gu,Qu,Yu,Ju,Xu=j?(Bu={},Ku=Fs("div").style,function(t){if(!Bu[t]){var e=zi(t);if(void 0!==Ku[t])Bu[t]=e;else for(var n=M.length;n--;){var i="-"+M[n]+"-"+e;if(void 0!==Ku[i]){Bu[t]=i;break}}}return Bu[t]}):null,tl=new RegExp("^(?:"+M.join("|")+")([A-Z])");function el(t){this.owner=t.owner||t.up.owner||bs(t.up),this.element=this.owner.attributeByName?this.owner:bs(t.up),this.ractive=this.owner.ractive,this.template=t.template,this.up=t.up,this.options=t,this.onComplete=[]}var nl=j?(j=Fs("div").style,qu=function(t){return t},Hu={},Zu={},Ju=void 0!==j.transition?(al="transition",Wu="transitionend",!0):void 0!==j.webkitTransition&&(al="webkitTransition",Wu="webkitTransitionEnd",!0),al&&(Gu=al+"Duration",Qu=al+"Property",Yu=al+"TimingFunction"),function(p,m,g,v,s){setTimeout(function(){var o,h,e;function t(){clearTimeout(e)}function u(){o&&h&&(p.unregisterCompleteHandler(t),p.ractive.fire(p.name+":end",p.node,p.isIntro),s())}var l=(p.node.namespaceURI||"")+p.node.tagName,c=p.node.style,n={property:c[Qu],timing:c[Yu],duration:c[Gu]};function d(t){t.target===p.node&&(-1!==(t=v.indexOf(t.propertyName))&&v.splice(t,1),v.length||(clearTimeout(e),i()))}function i(){c[Qu]=n.property,c[Yu]=n.duration,c[Gu]=n.timing,p.node.removeEventListener(Wu,d,!1),h=!0,u()}p.node.addEventListener(Wu,d,!1),e=setTimeout(function(){v=[],i()},g.duration+(g.delay||0)+50),p.registerCompleteHandler(t),c[Qu]=v.join(",");var r,r=(r=g.easing||"linear")?(r=tl.test(r)?"-"+r:r).replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()}):"";c[Yu]=r;var f=c[Yu]===r;c[Gu]=g.duration/1e3+"s",setTimeout(function(){for(var t,e=v.length,n=null,i=[];e--;){var r,s=v[e],a=l+s;f&&Ju&&!Zu[a]&&(r=c[s],c[s]=m[s],a in Hu||(n=p.getStyle(s),Hu[a]=p.getStyle(s)!=m[s],Zu[a]=!Hu[a],Zu[a]&&(c[s]=r))),f&&Ju&&!Zu[a]||(null===n&&(n=p.getStyle(s)),-1===(r=v.indexOf(s))?Z("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{node:p.node}):v.splice(r,1),a=/[^\d]*$/.exec(n)[0],(r=X(parseFloat(n),parseFloat(m[s])))?i.push({name:s,interpolator:r,suffix:a}):c[s]=m[s],n=null)}i.length?(C(g.easing)?(t=p.ractive.easing[g.easing])||(W(G(g.easing,"easing")),t=qu):t=k(g.easing)?g.easing:qu,new Er({duration:g.duration,easing:t,step:function(t){for(var e=i.length;e--;){var n=i[e];c[n.name]=n.interpolator(t)+n.suffix}},complete:function(){o=!0,u()}})):o=!0,v.length?c[Qu]=v.join(","):(c[Qu]="none",p.node.removeEventListener(Wu,d,!1),h=!0,u())},0)},g.delay||0)}):null,il=O&&O.getComputedStyle,rl=Promise.resolve(),sl={t0:"intro-outro",t1:"intro",t2:"outro"},al=el.prototype;al.animateStyle=function(t,e,u){var l,c=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");return Mu?(C(t)?(l={})[t]=e:(l=t,u=e),new Promise(function(t){if(!u.duration)return c.setStyle(l),void t();for(var e=b(l),n=[],i=il(c.node),r=e.length;r--;){var s=e[r],a=Xu(s),o=i[Xu(s)],h=c.node.style[a];a in c.originals||(c.originals[a]=c.node.style[a]),c.node.style[a]=l[s],c.targets[a]=c.node.style[a],c.node.style[a]=h,o!=l[s]&&(n.push(a),l[a]=l[s],c.node.style[a]=o)}n.length?nl(c,l,u,n,t):t()})):(this.setStyle(t,e),rl)},al.bind=function(){var t=this.options,e=t.template&&t.template.v;e&&("t0"!==e&&"t1"!==e||(this.element.intro=this),"t0"!==e&&"t2"!==e||(this.element.outro=this),this.eventName=sl[e]);e=this.owner.ractive;this.name=t.name||t.template.n,t.params&&(this.params=t.params),k(this.name)?(this._fn=this.name,this.name=this._fn.name):this._fn=Y("transitions",e,this.name),this._fn||W(G(this.name,"transition"),{ractive:e}),gh(this,t.template)},al.getParams=function(){if(this.params)return this.params;if(this.fn){var t=vh(0,this.template,this.up).map(function(t){if(t)return t.get()});return this.fn.apply(this.ractive,t)}},al.getStyle=function(t){var e=il(this.node);if(C(t))return e[Xu(t)];if(!w(t))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(var n={},i=t.length;i--;){var r=t[i],s=e[Xu(r)];"0px"===s&&(s=0),n[r]=s}return n},al.processParams=function(t,e){return t=d(t)?{duration:t}:C(t)?"slow"===t?{duration:600}:"fast"===t?{duration:200}:{duration:400}:t||{},u({},e,t)},al.registerCompleteHandler=function(t){ut(this.onComplete,t)},al.setStyle=function(t,e){if(C(t)){var n=Xu(t);v(this.originals,n)||(this.originals[n]=this.node.style[n]),this.node.style[n]=e,this.targets[n]=this.node.style[n]}else for(var i in t)v(t,i)&&this.setStyle(i,t[i]);return this},al.shouldFire=function(t){if(!this.ractive.transitionsEnabled)return!1;if("intro"===t&&this.ractive.rendering&&ol("noIntro",this.ractive,!0))return!1;if("outro"===t&&this.ractive.unrendering&&ol("noOutro",this.ractive,!1))return!1;var e=this.getParams();if(!this.element.parent)return!0;if(e&&e[0]&&x(e[0])&&"nested"in e[0]){if(!1!==e[0].nested)return!0}else if(!1!==ol("nestedTransitions",this.ractive))return!0;for(var n=this.element.parent;n;){if(n[t]&&n[t].starting)return!1;n=n.parent}return!0},al.start=function(){var n,i=this,r=this.node=this.element.node,s=this.originals={},a=this.targets={},t=this.getParams();this.complete=function(t){if(i.starting=!1,!n){if(i.onComplete.forEach(function(t){return t()}),!t&&i.isIntro)for(var e in a)r.style[e]===a[e]&&(r.style[e]=s[e]);i._manager.remove(i),n=!0}},this._fn?(t=this._fn.apply(this.ractive,[this].concat(t)))&&t.then(this.complete):this.complete()},al.toString=function(){return""},al.unbind=function(){var t;this.element.attributes&&this.element.attributes.unbinding||("t0"!==(t=this.options&&this.options.template&&this.options.template.v)&&"t1"!==t||(this.element.intro=null),"t0"!==t&&"t2"!==t||(this.element.outro=null))},al.unregisterCompleteHandler=function(t){dt(this.onComplete,t)};al=el.prototype;function ol(t,e,n){for(var i=e;i;){if(v(i,t)&&(_(n)||n?i.rendering:i.unrendering))return i[t];i=i.component&&i.component.ractive}return e[t]}al.destroyed=al.firstNode=al.rebound=al.render=al.unrender=al.update=B;var hl,ul,ll={};try{Fs("table").innerHTML="foo"}catch(t){hl=!0,ul={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}function cl(t){return ll[t]||(ll[t]=Fs(t))}al=function(e){function t(t){e.call(this,t)}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.detach=function(){var e=ea();return this.nodes&&this.nodes.forEach(function(t){return e.appendChild(t)}),e},n.find=function(t){for(var e=this.nodes.length,n=0;n<e;n+=1){var i=this.nodes[n];if(1===i.nodeType){if(zs(i,t))return i;i=i.querySelector(t);if(i)return i}}return null},n.findAll=function(t,e){for(var n=e.result,i=this.nodes.length,r=0;r<i;r+=1){var s=this.nodes[r];1===s.nodeType&&(zs(s,t)&&n.push(s),(s=s.querySelectorAll(t))&&n.push.apply(n,s))}},n.findComponent=function(){return null},n.firstNode=function(){return this.rendered&&this.nodes[0]},n.render=function(t,e,n){this.nodes||(r=this.model?this.model.get():"",this.nodes=function(t,e){var n,i,r,s,a,o=[];if(null==t||""===t)return o;for(hl&&(i=ul[e.tagName])?((n=cl("DIV")).innerHTML=i[0]+t+i[1],"SELECT"===(n=n.querySelector(".x")).tagName&&(r=n.options[n.selectedIndex])):e.namespaceURI===Ys?((n=cl("DIV")).innerHTML='<svg class="x">'+t+"</svg>",n=n.querySelector(".x")):"TEXTAREA"===e.tagName?void 0!==(n=Fs("div")).textContent?n.textContent=t:n.innerHTML=t:((n=cl(e.tagName)).innerHTML=t,"SELECT"===n.tagName&&(r=n.options[n.selectedIndex]));s=n.firstChild;)o.push(s),n.removeChild(s);if("SELECT"===e.tagName)for(a=o.length;a--;)o[a]!==r&&(o[a].selected=!1);return o}(r,t));var i,r=this.nodes;if(e){for(var s,a=-1;e.length&&(s=this.nodes[a+1]);)for(var o;o=e.shift();){var h=o.nodeType;if(h===s.nodeType&&(1===h&&o.outerHTML===s.outerHTML||(3===h||8===h)&&o.nodeValue===s.nodeValue)){this.nodes.splice(++a,1,o);break}t.removeChild(o)}0<=a&&(r=this.nodes.slice(a)),e.length&&(n=e[0])}r.length&&(i=ea(),r.forEach(function(t){return i.appendChild(t)}),n?t.insertBefore(i,n):t.appendChild(i)),this.rendered=!0},n.toString=function(){var t=null!=(t=this.model&&this.model.get())?""+t:"";return Go?rn(t):t},n.unrender=function(){this.nodes&&this.nodes.forEach(function(t){br.detachWhenReady({node:t,detach:function(){ia(t)}})}),this.rendered=!1,this.nodes=null},n.update=function(){this.rendered&&this.dirty?(this.dirty=!1,this.unrender(),this.render(this.up.findParentNode(),null,this.up.findNextNode(this))):this.dirty=!1},t}(hu);function dl(t,e,n){t=t.f.find(function(t){return t.t===e});return t?t.n?[{t:19,n:54,f:t.f||[],z:[{n:t.n,x:{r:"__await."+n}}]}]:t.f||[]:[]}var fl={};fl[19]=e,fl[ge]=hh,fl[55]=function(t){var e=t.template,i=dl(e,62,"value"),r=dl(e,63,"error"),s=dl(e,ue),a=dl(e,60);return(e=u({},t,{template:{t:de,m:[{t:ve,n:"for",f:[{t:oe,r:e.r,rx:e.rx,x:e.x}]}]},macro:function(e,t){function n(t){t.for&&k(t.for.then)?(e.setTemplate(s),t.for.then(function(t){e.set("@local.value",t),e.setTemplate(i)},function(t){e.set("@local.error",t),e.setTemplate(r)})):_(t.for)?e.setTemplate(a):(e.set("@local.value",t.for),e.setTemplate(i))}return e.aliasLocal("__await"),n(t),{update:n}}})).macro.attributes=["for"],new wu(e)},fl[18]=cs,fl[oe]=T,fl[fe]=wu,fl[ue]=e,fl[he]=al,fl[we]=wu,fl[ve]=Qo,fl[Fe]=ds,fl[Le]=kt,fl[Ke]=Ms,fl[De]=el,fl[pe]=Jo;var pl={doctype:cs,form:Is,input:fa,option:Nr,select:Sr,textarea:ha};function ml(t){if(C(t.template))return new Iu(t);var e,n,i,r,s,a,o,h=t.template.t;if(h===de){if(n=t.template.e,(e=J("partials",t.up.ractive,n))&&(e=e.partials[n]).styleSet)return t.macro=e,new wu(t);if(e=function t(e,n){var i,r=J("components",e,n);if(r&&(i=r.components[n])&&!i.isInstance)if(i.default&&i.default.isInstance)i=i.default;else if(!i.then&&k(i)){var s=i.bind(r);if(s.isOwner=v(r.components,n),!(i=s()))return void Z(Q,n,"component","component",{ractive:e});(i=C(i)?t(e,i):i)._fn=s,r.components[n]=i}return i}(t.up.ractive,n)){if(k(e.then))return i=e,s=(r=t).template.p||{},a=r.template.e,new wu(u({},r,{template:{t:de,e:a},macro:function(e){e.setTemplate(s["async-loading"]||[]),i.then(function(t){r.up.ractive.components[a]=t,s["async-loaded"]?(e.partials.component=[r.template],e.setTemplate(s["async-loaded"])):e.setTemplate([r.template])},function(t){s["async-failed"]?(e.aliasLocal("error","error"),e.set("@local.error",t),e.setTemplate(s["async-failed"])):e.setTemplate([])})}}));if(k(e))return new hh(t,e)}return new(e=pl[n.toLowerCase()]||Dh)(t)}if(!(o=h===ve?((o=t.owner)&&(o.type===ge||o.type===be||o.type===de)||(o=bs(t.up)),(t.element=o).type===be||o.type===ge?yu:Qo):fl[h]))throw new Error("Unrecognised item type "+h);return new o(t)}function gl(t,e,n){void 0===n&&(n={});for(var i,r=0;r<t.length;r++)n[t[r].n]||(i=ou(e,t[r].x),(n[t[r].n]=i).reference());return n}var vl=function(t){this.owner=t.owner,this.isRoot=!t.owner.up,this.parent=this.isRoot?null:this.owner.up,this.ractive=t.ractive||(this.isRoot?t.owner:this.parent.ractive),this.componentParent=this.isRoot&&this.ractive.component?this.ractive.component.up:this.owner.containerFragment||null,!this.isRoot||this.ractive.delegate?this.delegate=this.owner.containerFragment?this.owner.containerFragment&&this.owner.containerFragment.delegate:this.componentParent&&this.componentParent.delegate||this.parent&&this.parent.delegate:this.delegate=!1,this.context=null,this.rendered=!1,"cssIds"in t?this.cssIds=t.cssIds&&t.cssIds.length&&t.cssIds:this.cssIds=this.parent?this.parent.cssIds:null,this.dirty=!1,this.dirtyValue=!0,this.template=t.template||[],this.createItems()},ha=vl.prototype;function yl(t){var e,n=Ur(this);if(t){if(this.rootModel)return this.rootModel;this.rootModel=new Cu(this.context.getKeypath(this.ractive.root),this.context,this.ractive.root),e=this.rootModel}else{if(this.pathModel)return this.pathModel;this.pathModel=new Cu(this.context.getKeypath(),this.context),e=this.pathModel}return n&&n.context&&n.getKeypath(t).registerChild(e),e}function bl(e,t,n){var i=e.viewmodel.computed;if(i)for(var r in i)r in e.viewmodel.value&&i[r]&&!i[r].isReadonly&&i[r].set(e.viewmodel.value[r]);vo.init(e.constructor,e,t),w(t.use)&&e.use.apply(e,t.use.filter(function(t){return!t.construct})),fs.config.fire(e),fs.init.begin(e);n=e.fragment=wl(e,n);n&&n.bind(e.viewmodel),fs.init.end(e),ih(e,t,"observe"),!n||(n=e.el=e.target=na(e.el||e.target))&&!e.component&&(n=e.render(n,e.append),Il.DEBUG_PROMISES&&n.catch(function(t){throw W("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;"),Z("An error happened during rendering",{ractive:e}),function(){Il.DEBUG&&F.apply(null,arguments)}(t),t}))}function wl(t,e){if(void 0===e&&(e={}),t.template){e=[].concat(t.constructor._cssIds||[],e.cssIds||[]);return new vl({owner:t,template:t.template,cssIds:e})}}function xl(t,e,n,i){t.rendering=!0;var r,s=br.start();if(br.scheduleTask(function(){return fs.render.fire(t)},!0),t.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");return t.destroyed&&(t.destroyed=!1,t.fragment=wl(t).bind(t.viewmodel)),n=na(n)||t.anchor,t.el=t.target=e,t.anchor=n,t.cssId&&Oa(),e&&((e.__ractive_instances__||(e.__ractive_instances__=[])).push(t),n?(r=N.createDocumentFragment(),t.fragment.render(r),e.insertBefore(r,n)):t.fragment.render(e,i)),br.end(),t.rendering=!1,s.then(function(){t.torndown||fs.complete.fire(t)})}ha.bind=function(t){this.context=t,this.owner.template.z&&(this.aliases=gl(this.owner.template.z,this.owner.containerFragment||this.parent));for(var e=this.items.length,n=0;n<e;n++)this.items[n].bind();return this.bound=!0,this.dirty&&this.update(),this},ha.bubble=function(){this.dirtyValue=!0,this.dirty||(this.dirty=!0,this.isRoot?this.ractive.component?this.ractive.component.bubble():this.bound&&br.addFragment(this):this.owner.bubble(this.index))},ha.createItems=function(){var t=this.template.length;this.items=[];for(var e=0;e<t;e++)this.items[e]=ml({up:this,template:this.template[e],index:e})},ha.destroyed=function(){for(var t=this.items.length,e=0;e<t;e++)this.items[e].destroyed();this.pathModel&&this.pathModel.destroyed(),this.rootModel&&this.rootModel.destroyed()},ha.detach=function(){for(var t=ea(),e=this.items,n=e.length,i=0;i<n;i++)t.appendChild(e[i].detach());return t},ha.find=function(e,n){return mt(this.items,function(t){return t.find(e,n)})},ha.findAll=function(e,n){this.items&&this.items.forEach(function(t){return t.findAll&&t.findAll(e,n)})},ha.findComponent=function(e,n){return mt(this.items,function(t){return t.findComponent(e,n)})},ha.findAllComponents=function(e,n){this.items&&this.items.forEach(function(t){return t.findAllComponents&&t.findAllComponents(e,n)})},ha.findContext=function(){var t=Ur(this);return t&&t.context?t.context:this.ractive.viewmodel},ha.findNextNode=function(t){if(t)for(var e=t.index+1;e<this.items.length;e++)if((n=this.items[e])&&n.firstNode){var n=n.firstNode(!0);if(n)return n}return this.isRoot?this.ractive.component?this.ractive.component.up.findNextNode(this.ractive.component):null:this.parent?this.owner.findNextNode(this):void 0},ha.findParentNode=function(){var t=this;do{if(t.owner.type===de)return t.owner.node;if(t.isRoot&&!t.ractive.component)return t.ractive.el}while(t=t.owner.type===we?t.owner.containerFragment:t.componentParent||t.parent);throw new Error("Could not find parent node")},ha.firstNode=function(t){var e=mt(this.items,function(t){return t.firstNode(!0)});return e||(t?null:this.parent.findNextNode(this.owner))},ha.getKey=function(){return this.keyModel||(this.keyModel=new Cu(this.key))},ha.getIndex=function(){return this.idxModel||(this.idxModel=new Cu(this.index))},ha.rebind=function(t){this.context=t,this.rootModel&&(this.rootModel.context=this.context),this.pathModel&&(this.pathModel.context=this.context)},ha.rebound=function(e){if(this.owner.template.z){var t,n=this.aliases;for(t in n)n[t].rebound?n[t].rebound(e):(n[t].unreference(),n[t]=0);gl(this.owner.template.z,this.owner.containerFragment||this.parent,n)}this.items.forEach(function(t){return t.rebound(e)}),e&&(this.rootModel&&this.rootModel.applyValue(this.context.getKeypath(this.ractive.root)),this.pathModel&&this.pathModel.applyValue(this.context.getKeypath()))},ha.render=function(t,e){if(this.rendered)throw new Error("Fragment is already rendered!");this.rendered=!0;for(var n=this.items,i=n.length,r=0;r<i;r++)n[r].render(t,e)},ha.resetTemplate=function(t){var e=this.bound,n=this.rendered;e&&(n&&this.unrender(!0),this.unbind()),this.template=t,this.createItems(),e&&(this.bind(this.context),n&&(t=this.findParentNode(),(e=this.findNextNode())?(n=ea(),this.render(n),t.insertBefore(n,e)):this.render(t)))},ha.shuffled=function(){this.items.forEach(Ut),this.rootModel&&this.rootModel.applyValue(this.context.getKeypath(this.ractive.root)),this.pathModel&&this.pathModel.applyValue(this.context.getKeypath())},ha.toString=function(t){return this.items.map(t?Gt:Wt).join("")},ha.unbind=function(t){if(this.owner.template.z&&!this.owner.yielder){for(var e in this.aliases)this.aliases[e].unreference();this.aliases={}}this.context=null;for(var n=this.items.length,i=0;i<n;i++)this.items[i].unbind(t);return this.bound=!1,this},ha.unrender=function(t){for(var e=this.items.length,n=0;n<e;n++)this.items[n].unrender(t);this.rendered=!1},ha.update=function(){if(this.dirty)if(this.updating)this.isRoot&&br.addFragmentToRoot(this);else{this.dirty=!1,this.updating=!0;for(var t=this.items.length,e=0;e<t;e++)this.items[e].update();this.updating=!1}},ha.valueOf=function(){return 1===this.items.length?this.items[0].valueOf():(this.dirtyValue&&(t=vu(function n(t,i,r,s){return void 0===s&&(s=0),t.map(function(t){if(1===t.type)return t.template;if(t.fragment)return t.fragment.iterations?t.fragment.iterations.map(function(t){return n(t.items,i,r,s)}).join(""):n(t.fragment.items,i,r,s);var e=r+"-"+s++,t=t.model||t.newModel;return i[e]=t?t.wrapper?t.wrapperValue:t.get():void 0,"${"+e+"}"}).join("")}(this.items,t={},this.ractive._guid),t),this.value=t?t.value:this.toString(),this.dirtyValue=!1),this.value);var t},vl.prototype.getContext=Dr,vl.prototype.getKeypath=yl;var kl=["template","partials","components","decorators","events"];function _l(){var t=[this.cssId].concat(this.findAllComponents().map(function(t){return t.cssId}));return Na(b(t.reduce(function(t,e){return t[e]=!0,t},{})))}function El(){return this.fragment.toString(!0)}var Sl={add:function(t,e,n){return Jr(this,t,d(e)?e:1,y(e)?e:n)},animate:function(e,t,n){if(y(e)){var i=b(e);throw new Error("ractive.animate(...) no longer supports objects. Instead of ractive.animate({\n  "+i.map(function(t){return"'"+t+"': "+e[t]}).join("\n  ")+"\n}, {...}), do\n\n"+i.map(function(t){return"ractive.animate('"+t+"', "+e[t]+", {...});"}).join("\n")+"\n")}return es(this,this.viewmodel.joinAll(ot(e)),t,n)},attachChild:function(t,e){void 0===e&&(e={});var n,i=this._children;if(t.parent&&t.parent!==this)throw new Error("Instance "+t._guid+" is already attached to a different instance "+t.parent._guid+". Please detach it from the other instance using detachChild first.");if(t.parent)throw new Error("Instance "+t._guid+" is already attached to this instance.");var r={instance:t,ractive:this,name:e.name||t.constructor.name||"Ractive",target:e.target||!1,bubble:gs,findNextNode:vs};r.nameOption=e.name,r.target?((s=i.byName[r.target])||this.set("@this.children.byName."+r.target,s=[]),n=e.prepend?0:void 0!==e.insertAt?e.insertAt:s.length):(r.up=this.fragment,r.external=!0),t.parent=this,t.root=this.root,t.component=r,i.push(r);var s=br.start();return(i=t.viewmodel.getRactiveModel()).joinKey("parent",{lastLink:!1}).link(this.viewmodel.getRactiveModel()),i.joinKey("root",{lastLink:!1}).link(this.root.viewmodel.getRactiveModel()),fs.attachchild.fire(t),r.target?((i=r).instance.fragment.rendered&&(i.shouldDestroy=!0,i.instance.unrender()),i.instance.el=null,this.splice("@this.children.byName."+r.target,n,0,r),ms(this,r.target)):t.isolated||t.viewmodel.attached(this.fragment),br.end(),s.ractive=t,s.then(function(){return t})},compute:function(t,e){var n=br.start();return(e=ys.call(this,t,e))&&(1!==(t=ot(t)).length||e.isReadonly||e.set(this.viewmodel.value[t[0]]),(t=t.reduce(function(t,e){return t&&t.childByKey[e]},this.viewmodel))&&(t.rebind(e,t,!1),t.parent&&delete t.parent.childByKey[t.key],At())),br.end(),n},detach:function(){return this.isDetached||(this.el&&dt(this.el.__ractive_instances__,this),this.el=this.fragment.detach(),this.isDetached=!0,fs.detach.fire(this)),this.el},detachChild:function(t){for(var e,n,i=this._children,r=i.length;r--;)if(i[r].instance===t){e=i[n=r];break}if(!e||t.parent!==this)throw new Error("Instance "+t._guid+" is not attached to this instance.");var s=br.start();e.anchor&&e.anchor.removeChild(e),t.isolated||t.viewmodel.detached(),i.splice(n,1),e.target&&(this.splice("@this.children.byName."+e.target,i.byName[e.target].indexOf(e),1),ms(this,e.target));var a=t.viewmodel.getRactiveModel();return a.joinKey("parent",{lastLink:!1}).unlink(),a.joinKey("root",{lastLink:!1}).link(a),(t.root=t).parent=null,t.component=null,fs.detachchild.fire(t),br.end(),s.ractive=t,s.then(function(){return t})},find:function(t,e){if(void 0===e&&(e={}),!this.rendered)throw new Error("Cannot call ractive.find('"+t+"') unless instance is rendered to the DOM");var n=this.fragment.find(t,e);if(n)return n;if(e.remote)for(var i=0;i<this._children.length;i++)if(this._children[i].instance.fragment.rendered&&(n=this._children[i].instance.find(t,e)))return n},findAll:function(e,n){if(void 0===n&&(n={}),!this.rendered)throw new Error("Cannot call ractive.findAll('"+e+"', ...) unless instance is rendered to the DOM");return w(n.result)||(n.result=[]),this.fragment.findAll(e,n),n.remote&&this._children.forEach(function(t){!t.target&&t.instance.fragment&&t.instance.fragment.rendered&&t.instance.findAll(e,n)}),n.result},findAllComponents:function(e,n){return!n&&y(e)&&(n=e,e=""),w((n=n||{}).result)||(n.result=[]),this.fragment.findAllComponents(e,n),n.remote&&this._children.forEach(function(t){!t.target&&t.instance.fragment&&t.instance.fragment.rendered&&(e&&t.name!==e||n.result.push(t.instance),t.instance.findAllComponents(e,n))}),n.result},findComponent:function(t,e){void 0===e&&(e={}),y(t)&&(e=t,t="");var n=this.fragment.findComponent(t,e);if(n)return n;if(e.remote){if(!t&&this._children.length)return this._children[0].instance;for(var i=0;i<this._children.length;i++)if(!this._children[i].target){if(this._children[i].name===t)return this._children[i].instance;if(n=this._children[i].instance.findComponent(t,e))return n}}},findContainer:function(t){return this.container?this.container.component&&this.container.component.name===t?this.container:this.container.findContainer(t):null},findParent:function(t){return this.parent?this.parent.component&&this.parent.component.name===t?this.parent:this.parent.findParent(t):null},fire:function(t){for(var e,n,i=[],r=arguments.length-1;0<r--;)i[r]=arguments[r+1];return i[0]instanceof Es?(e=i.shift(),n=A(e),u(n,e)):n=!y(i[0])||null!==i[0]&&i[0].constructor!==Object?Es.forRactive(this):Es.forRactive(this,i.shift()),os(this,t,n,i)},get:function(t,e){if(!C(t))return this.viewmodel.get(!0,t);var n=ot(t),t=n[0];return this.viewmodel.has(t)||this.component&&!this.isolated&&Mr(this.fragment||new Fr(this),t),this.viewmodel.joinAll(n).get(!0,e)},getLocalContext:function(){if(Vs.f)return Vs.f.getContext()},getContext:function(t,e){return t?Ds(t=C(t)?this.find(t,e):t):Lr(this)},insert:function(t,e){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(t=na(t),e=na(e)||null,!t)throw new Error("You must specify a valid target to insert into");t.insertBefore(this.detach(),e),((this.el=t).__ractive_instances__||(t.__ractive_instances__=[])).push(this),this.isDetached=!1,function e(t){fs.insert.fire(t);t.findAllComponents("*").forEach(function(t){e(t.instance)})}(this)},link:function(t,e,n){var i,r=n&&(n.ractive||n.instance)||this,s=ot(t),r=(i=!r.viewmodel.has(s[0])&&r.component?(i=Mr(r.component.up,s[0])).joinAll(s.slice(1)):i)||r.viewmodel.joinAll(s),s=this.viewmodel.joinAll(ot(e),{lastLink:!1});if(aa(r,s)||aa(s,r))throw new Error("A keypath cannot be linked to itself.");return e=br.start(),s.link(r,n&&n.keypath||t),br.end(),e},observe:function(t,e,n){var i,r=this,s=[],a=x(t)?(i=t,e||{}):k(t)?(i={"":t},e||{}):((i={})[t]=e,n||{}),o=!1;return b(i).forEach(function(t){function e(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(!o)return n.apply(this,t)}var n=i[t],t=t.split(" ");(t=1<t.length?t.filter(function(t){return t}):t).forEach(function(t){a.keypath=t;t=function(t,e,n,i){var r,s=ot(e),a=s.indexOf("*");~a||(a=s.indexOf("**"));i.fragment=i.fragment||t.fragment,i.fragment?~s[0].indexOf(".*")?(r=i.fragment.findContext(),s[a=0]=s[0].slice(1)):r=0===a?i.fragment.findContext():Mr(i.fragment,s[0]):r=t.viewmodel.joinKey(s[0]);r=r||t.viewmodel.joinKey(s[0]);{if(!~a)return r=r.joinAll(s.slice(1)),new(i.array?ga:oa)(t,r,n,i);e=s.indexOf("**");if(!~e||e+1===s.length&&!~s.indexOf("*"))return r=r.joinAll(s.slice(1,a)),new da(t,r,s.slice(a),n,i);W("Recursive observers may only specify a single '**' at the end of the path.")}}(r,t,e,a);t&&s.push(t)})}),this._observers.push.apply(this._observers,s),{cancel:function(){return s.forEach(function(t){return t.cancel()})},isSilenced:function(){return o},silence:function(){return o=!0},resume:function(){return o=!1}}},observeOnce:function(t,e,n){return x(t)||k(t)?(n=u(e||{},va),this.observe(t,n)):(n=u(n||{},va),this.observe(t,e,n))},off:function(t,i){var r=this;return t?t.split(" ").map(ya).filter(ba).forEach(function(t){var e,n=r._subs[t];n&&i?(e=n.find(function(t){return t.callback===i}))&&(dt(n,e),e.off=!0,t.indexOf(".")&&r._nsSubs--):n&&(t.indexOf(".")&&(r._nsSubs-=n.length),n.length=0)}):this._subs={},this},on:function(t,e){var i=this,r=y(t)?t:{};C(t)&&(r[t]=e);var n,s=!1,a=[];for(n in r)!function(t){var n=r[t],e={callback:n,handler:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(!s)return n.apply(this,t)}};v(r,t)&&t.split(" ").map(ya).filter(ba).forEach(function(t){(i._subs[t]||(i._subs[t]=[])).push(e),t.indexOf(".")&&i._nsSubs++,a.push([t,e])})}(n);return{cancel:function(){return a.forEach(function(t){return i.off(t[0],t[1].callback)})},isSilenced:function(){return s},silence:function(){return s=!0},resume:function(){return s=!1}}},once:function(t,e){var n=this.on(t,function(){e.apply(this,arguments),n.cancel()});return n},pop:_t,push:vr,readLink:function(t,e){if(void 0===e&&(e={}),t=ot(t),this.viewmodel.has(t[0])){var n=this.viewmodel.joinAll(t);if(n.isLink){for(;(n=n.target)&&!1!==e.canonical&&n.isLink;);return n?{ractive:n.root.ractive,keypath:n.getKeypath()}:void 0}}},render:function(t,e){if(this.torndown)return Z("ractive.render() was called on a Ractive instance that was already torn down"),Promise.resolve();var n;t=na(t)||this.el,!this.append&&t&&((n=t.__ractive_instances__)&&n.forEach($t),this.enhance||(t.innerHTML=""));var i=this.enhance?pt(t.childNodes):null,e=xl(this,t,e,i);if(i)for(;i.length;)t.removeChild(i.pop());return e},reset:function(t){if(!y(t=t||{}))throw new Error("The reset method takes either no arguments, or an object containing new data");t=eo.init(this.constructor,this,{data:t});var e=br.start(),n=this.viewmodel.wrapper;n&&n.reset&&!1!==n.reset(t)||this.viewmodel.set(t);for(var i,r=vo.reset(this),s=r.length;s--;)if(-1<kl.indexOf(r[s])){i=!0;break}return i&&(fs.unrender.fire(this),this.fragment.resetTemplate(this.template),fs.render.fire(this),fs.complete.fire(this)),br.end(),fs.reset.fire(this,t),e},resetPartial:function(t,e){var n=[];!function e(t,n,i,r){t.forEach(function(t){if(t.type===fe&&(t.refName===n||t.name===n))return t.inAttribute=i,void r.push(t);if(t.fragment)e(t.fragment.iterations||t.fragment.items,n,i,r);else if(w(t.items))e(t.items,n,i,r);else if(t.type===be&&t.instance){if(t.instance.partials[n])return;e(t.instance.fragment.items,n,i,r)}t.type===de&&w(t.attributes)&&e(t.attributes,n,!0,r)})}(this.fragment.items,t,!1,n);var i=br.start();return this.partials[t]=e,n.forEach(Bt),br.end(),i},resetTemplate:function(t){ao.init(null,this,{template:t});var e=this.transitionsEnabled;this.transitionsEnabled=!1;var n=this.component;n&&(n.shouldDestroy=!0),this.unrender(),n&&(n.shouldDestroy=!1);var i=br.start();return this.fragment.unbind().unrender(!0),this.fragment=new vl({template:this.template,root:this,owner:this}),t=ea(),this.fragment.bind(this.viewmodel).render(t),n&&!n.external?this.fragment.findParentNode().insertBefore(t,n.findNextNode()):this.el.insertBefore(t,this.anchor),br.end(),this.transitionsEnabled=e,i},reverse:ks("reverse").path,set:function(t,e,n){return n=y(t)?e:n,qr(Wr(this,t,e,n&&n.isolated),n)},shift:ks("shift").path,sort:ks("sort").path,splice:ks("splice").path,subtract:function(t,e,n){return Jr(this,t,d(e)?-e:-1,y(e)?e:n)},teardown:function(){var t=this;return this.torndown?(Z("ractive.teardown() was called on a Ractive instance that was already torn down"),Promise.resolve()):(this.shouldDestroy=!0,Xo(this,function(){return t.fragment.rendered?t.unrender():Promise.resolve()}))},toggle:function(t,e){if(!C(t))throw new TypeError("Bad arguments");return qr(Zr(this,t,null,e&&e.isolated).map(function(t){return[t,!t.get()]}),e)},toCSS:_l,toCss:_l,toHTML:El,toHtml:El,toText:function(){return this.fragment.toString(!1)},transition:function(t,e,n){e instanceof HTMLElement||x(e)&&(n=e),(e=e||this.event.node)&&e._ractive||$("No node was supplied for transition "+t);var e=e._ractive.proxy,i=new el({owner:e,up:e.up,name:t,params:n=n||{}});return i.bind(),n=br.start(),br.registerTransition(i),br.end(),n.then(function(){return i.unbind()}),n},unlink:function(t){var e=br.start();return this.viewmodel.joinAll(ot(t),{lastLink:!1}).unlink(),br.end(),e},unrender:function(){if(!this.fragment.rendered)return Z("ractive.unrender() was called on a Ractive instance that was not rendered"),Promise.resolve();this.unrendering=!0;var t=br.start();fs.unrendering.fire(this);var e=!this.component||(this.component.anchor||{}).shouldDestroy||this.component.shouldDestroy||this.shouldDestroy;return this.fragment.unrender(e),e&&(this.destroyed=!0),dt(this.el.__ractive_instances__,this),fs.unrender.fire(this),br.end(),this.unrendering=!1,t},unshift:ks("unshift").path,update:function(t,e){var n,t=C(t)?(n=ot(t),e):t;return _s(this,n?this.viewmodel.joinAll(n):this.viewmodel,t)},updateModel:function(t,e){var n=br.start();return t?this.viewmodel.joinAll(ot(t)).updateFromBindings(!1!==e):this.viewmodel.updateFromBindings(!0),br.end(),n},use:function(){for(var e=this,t=[],n=arguments.length;n--;)t[n]=arguments[n];return t.forEach(function(t){t({proto:e,Ractive:e.constructor.Ractive,instance:e})}),this}};function Al(t){return t&&t instanceof this}function Cl(t,e){return this._cssModel.joinAll(ot(t)).get(!0,e)}var Ol=[];function Nl(e){return Ol.map(function(t){return"\n/* ---- extra style "+t.id+" */\n"+(k(t.css)?t.css(e):t.css)}).join("")}function jl(){for(var e=this,t=[],n=arguments.length;n--;)t[n]=arguments[n];return t.forEach(function(t){k(t)&&t({proto:e.prototype,Ractive:e.Ractive,instance:e})}),this}var Tl=/super\s*\(|\.call\s*\(\s*this/;function Vl(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return t.length?t.reduce(Ml,this):Ml(this)}function Pl(t,e){return Ml(this,e=void 0===e?{}:e,t)}function Ml(t,e,n){var i,r=k(n)&&n;if((e=void 0===e?{}:e).prototype instanceof Il)throw new Error("Ractive no longer supports multiple inheritance.");if(r){if(!(r.prototype instanceof t))throw new Error("Only classes that inherit the appropriate prototype may be used with extend");if(!Tl.test(r.toString()))throw new Error("Only classes that call super in their constructor may be used with extend");i=r.prototype}else r=function(t){if(!(this instanceof r))return new r(t);t&&!0===t.component||(oh(this,t||{}),bl(this,t||{},{}))},((i=A(t.prototype)).constructor=r).prototype=i;return a(r,{defaults:{value:i},extend:{value:Vl,writable:!0,configurable:!0},extendWith:{value:Pl,writable:!0,configurable:!0},extensions:{value:[]},use:{value:jl},isInstance:{value:Al},Parent:{value:t},Ractive:{value:Il},styleGet:{value:Cl.bind(r),configurable:!0},styleSet:{value:Za.bind(r),configurable:!0}}),vo.extend(t,i,e,r),r._on=(t._on||[]).concat(s(e.on)),r._observe=(t._observe||[]).concat(s(e.observe)),t.extensions.push(r),e.attributes&&(n=w(e.attributes)?{optional:e.attributes,required:[]}:e.attributes,w(n.required)||(n.required=[]),w(n.optional)||(n.optional=[]),r.attributes=n),eo.extend(t,i,e,r),f(r,"helpers",{writable:!0,value:i.helpers}),w(e.use)&&r.use.apply(r,e.use),r}function Il(t){if(!(this instanceof Il))return new Il(t);t&&t.component||(oh(this,t||{}),bl(this,t||{},{}))}return a(Il,{sharedGet:{value:function(t,e){return Vr.joinAll(ot(t)).get(!0,e)}},sharedSet:{value:function(t,e,n){return n=y(t)?e:n,qr(Wr({viewmodel:Vr},t,e,!0),n)}},styleGet:{configurable:!0,value:Cl.bind(Il)},styleSet:{configurable:!0,value:Za.bind(Il)},addCSS:{configurable:!1,value:function(e,t){if(Ol.find(function(t){return t.id===e}))throw new Error("Extra styles with the id '"+e+"' have already been added.");Ol.push({id:e,css:t}),this.css||Object.defineProperty(this,"css",{configurable:!1,writable:!1,value:Nl}),this._cssDef||(Object.defineProperty(this,"_cssDef",{configurable:!0,writable:!1,value:{transform:!1,id:"Ractive.addStyle"}}),Ca(this._cssDef)),Ga(this),Oa(!0)}.bind(Il)},hasCSS:{configurable:!1,value:function(e){return!!Ol.find(function(t){return t.id===e})}.bind(Il)}}),O&&!O.Ractive?(_t="",~(_t=(vr=document.currentScript||document.querySelector("script[data-ractive-options]"))?vr.getAttribute("data-ractive-options")||"":_t).indexOf("ForceGlobal")&&(O.Ractive=Il)):O&&q("Ractive already appears to be loaded while loading 1.4.0-edge."),u(Il.prototype,Sl,I),Ji.defaults=(Il.prototype.constructor=Il).defaults=Il.prototype,Ji.Ractive=Il,a(Il,{DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:Vl},extendWith:{value:Pl},escapeKey:{value:st},evalObjectString:{value:vu},findPlugin:{value:function(t,e,n){return Y(e,n,t)}},getContext:{value:Ds},getCSS:{value:Na},isInstance:{value:Al},joinKeys:{value:la},macro:{value:function(t,e){if(!k(t))throw new Error("The macro must be a function");return u(t,e),a(t,{extensions:{value:[]},_cssIds:{value:[]},cssData:{value:u(A(this.cssData),t.cssData||{})},styleGet:{value:Cl.bind(t)},styleSet:{value:Za.bind(t)}}),f(t,"_cssModel",{value:new Qa(t)}),t.css&&to(t,t,t),this.extensions.push(t),t}},normaliseKeypath:{value:at},parse:{value:ar},splitKeypath:{value:function(t){return ot(t).map(ht)}},unescapeKey:{value:ht},use:{value:jl},enhance:{writable:!0,value:!1},svg:{value:P},tick:{get:function(){return mr&&mr.promise}},VERSION:{value:"1.4.0-edge"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:R},events:{writable:!0,value:{}},extensions:{value:[]},helpers:{writable:!0,value:I.helpers},interpolators:{writable:!0,value:tt},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}},cssData:{configurable:!0,value:{}},perComponentStyleElements:{get:Aa,set:Aa},sharedData:{value:jr},Ractive:{value:Il},Context:{value:Kr.Context.prototype}}),f(Il,"_cssModel",{configurable:!0,value:new Qa(Il)}),f(Il.prototype,"rendered",{get:function(){return this.fragment&&this.fragment.rendered}}),Il});