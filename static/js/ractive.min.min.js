!function(t,e){var n,i;"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(n=t.Ractive,i=e(),(t.Ractive=i).noConflict=function(){return t.Ractive=n,i})}(this,function(){"use strict";function v(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function s(t){var e,n=[];for(e in t=void 0===t?{}:t)v(t,e)&&n.push([e,t[e]]);return n}function h(t,e){return null===t&&null===e||!y(t)&&!y(e)&&t===e}function o(t){return!isNaN(parseFloat(t))&&isFinite(t)}function b(t){return t&&"[object Object]"===Xi.call(t)}function u(t){return t&&(y(t)||w(t))}function y(t){return"object"==typeof t}function w(t){return"function"==typeof t}function A(t){return"string"==typeof t}function l(t){return"number"==typeof t}function x(t){return void 0===t}function a(){}function i(t,e){return t.replace(/%s/g,function(){return e.shift()})}function c(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];throw t=i(t,e),new Error(t)}function t(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];t=i(t,e),yr(t,e)}function r(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];t=i(t,e),kr[t]||(kr[t]=!0,yr(t,e))}function k(){qi.DEBUG&&t.apply(null,arguments)}function _(){qi.DEBUG&&r.apply(null,arguments)}function d(t,e,n){e=f(t,e,n);return e?e[t][n]:null}function f(t,e,n){for(;e;){if(n in e[t])return e;if(e.isolated)return null;e=e.parent}}function E(t,e,n,i){if(t===e)return null;if(i){n=d("interpolators",n,i);if(n)return n(t,e)||null;c(_r(i,"interpolator"))}return Sr.number(t,e)||Sr.array(t,e)||Sr.object(t,e)||null}function p(t){return A(t)?t.replace(Or,"\\$&"):t}function m(t){return t?t.replace(Ar,".$1"):""}function S(t){var e=[];for(t=m(t);n=Cr.exec(t);){var n=n.index+n[1].length;e.push(t.substr(0,n)),t=t.substr(n+1)}return e.push(t),e}function g(t){return A(t)?t.replace(Nr,"$1$2"):t}function C(t,e){-1===t.indexOf(e)&&t.push(e)}function O(t){return A(t)?[t]:x(t)?[]:t}function N(t){return t[t.length-1]}function j(t,e){!t||-1!==(e=t.indexOf(e))&&t.splice(e,1)}function T(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n=t.concat.apply([],t),i=n.length;i--;){var r=n.indexOf(n[i]);~r&&r<i&&n.splice(i,1)}return n}function V(t){for(var e=[],n=t.length;n--;)e[n]=t[n];return e}function P(t,e){for(var n=t.length,i=0;i<n;i++){var r=e(t[i]);if(r)return r}}function M(t,e,n){var t=t,i=e;n&&(t=t.map(n),i=i.map(n));var r=t.length,s={},o=0,a=t.map(function(t){var e,n=o;do{if(-1===(e=i.indexOf(t,n)))return-1}while(n=e+1,!0===s[e]&&n<r);return e===o&&(o+=1),s[e]=!0,e}),h=a.oldLen=t.length;if(a.newLen=i.length,h===a.newLen){for(var u=0;u<h&&a[u]===u;u++);u===h&&(a.same=!0)}return a}function I(t,e){if(!/this/.test(t.toString()))return t;var n,i=jr.call(t,e);for(n in t)i[n]=t[n];return i}function R(t,e,n){return n&&w(e)&&t.parent&&t.parent.isRoot?(t.boundValue||(t.boundValue=I(e._r_unbound||e,t.parent.ractive)),t.boundValue):e}function B(t){t.updateFromBindings(!0)}function K(t){if(t){var e=Tr[t];Tr[t]=[];for(var n=e.length;n--;)e[n]();var i=Vr[t];for(Vr[t]=[],n=i.length;n--;)i[n].model.register(i[n].item)}else K("early"),K("mark")}function L(t,e,n,i){t.shuffling=!0;for(var r=e.length;r--;){var s=e[r];r!==s&&r in t.childByKey&&t.childByKey[r].rebind(~s?t.joinKey(s):void 0,t.childByKey[r],!i)}var o=t.source().length!==t.source().value.length;for(t.links.forEach(function(t){return t.shuffle(e)}),n||K("early"),r=t.deps.length;r--;)t.deps[r].shuffle&&t.deps[r].shuffle(e);t[n?"marked":"mark"](),n||K("mark"),o&&t.notifyUpstream(),t.shuffling=!1}function D(t,e){e!==t.dataModel&&(e&&e.viewmodel&&e.viewmodel.isRoot&&t.childByKey.data?(t.childByKey.data.link(e.viewmodel,"data"),t.dataModel=e):t.dataModel&&(t.childByKey.data.unlink(),t.dataModel=!0))}function F(){Br.push(Rr=[])}function z(){var t=Br.pop();return Rr=Br[Br.length-1],t}function U(t){Rr&&C(Rr,t)}function $(t){t.bind()}function n(t){t.cancel()}function q(t){t.destroyed()}function H(t){t.handleChange()}function Z(t){t.mark()}function W(t){t.mark(!0)}function G(t){t.marked()}function e(t){t.markedAll()}function Q(t){t.render()}function Y(t){t.shuffled()}function J(t){t.teardown()}function X(t){t.unbind()}function tt(t){t.unrender()}function et(t){t.update()}function nt(t){return t.toString()}function it(t){return t.toString(!0)}function rt(t,e,n,i){t=t.r||t;if(!t||!A(t))return e;if("."===t||"@"===t[0]||(e||n).isKey||(e||n).isKeypath)return e;for(var t=t.split("/"),r=S(t[t.length-1]),t=r[r.length-1],s=e||n,o=(r=s&&1===r.length&&t!==s.key&&i?function(t,e){for(;e;){var n=e.aliases;if(n&&n[t]){for(var i=(e.owner.iterations?e.owner:e).owner.template.z,r=0;r<i.length;r++)if(i[r].n===t){var s=i[r].x;if(!s.r)return!1;s=s.r.split("/");return S(s[s.length-1])}return}e=e.componentParent||e.parent}}(t,i)||r:r).length,a=!0,h=!1;s&&o--;)s.shuffling&&(h=!0),r[o]!=s.key&&(a=!1),s=s.parent;return!e&&a&&h||e&&!a&&h?n:e}function st(t,e){void 0===e&&(e=0);for(var n=new Array(e);e--;)n[e]="_"+e;return new Function([],"return function ("+n.join(",")+"){return("+t+");};")()}function ot(t,e){return Fr[t]||(Fr[t]=(t=t,e=e,Wt(st,"new expression function",aa),st(t,e)))}function at(t){var e;!t||(e=t.e)&&Ji(e).forEach(function(t){Fr[t]||(Fr[t]=e[t])})}function ht(t){return(t=t.matchPattern(Ns))?{t:cs,v:t}:null}function ut(t){return t.replace(js,"\\$&")}function lt(t,e){return t.search(Ts[e.join()]||(Ts[e.join()]=new RegExp(e.map(ut).join("|"))))}function ct(t){return t.replace(Rs,function(t,e){e="#"!==e[0]?Ms[e]:"x"===e[1]?parseInt(e.substring(2),16):parseInt(e.substring(1),10);return e?Ks((e=e)?10===e?32:e<128?e:e<=159?Is[e-128]:e<55296||!(e<=57343)&&(e<=65535||Bs&&(65536<=e&&e<=131071||131072<=e&&e<=196607))?e:zs:zs):t})}function dt(t){return t.replace(Fs,"&amp;").replace(Ls,"&lt;").replace(Ds,"&gt;")}function ft(t){return(t=t.matchPattern(qs))?{t:os,v:t}:null}function pt(r){return function(t){for(var e,n='"',i=!1;!i;)(e=t.matchPattern(Hs)||t.matchPattern(Zs)||t.matchString(r))?n+='"'===e?'\\"':"\\'"===e?"'":e:(e=t.matchPattern(Ws))?n+="\\u"+("000"+e.charCodeAt(1).toString(16)).slice(-4):i=!0;return n+='"',JSON.parse(n)}}function mt(t){var e=t.pos,n=t.matchString("'")||t.matchString('"');if(n){var i=("'"===n?Gs:Qs)(t);return t.matchString(n)?{t:as,v:i}:(t.pos=e,null)}return null}function gt(t){return JSON.parse('"'+t.replace(Js,vt)+'"')}function vt(t){switch(t){case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\b":return"\\b";case"\f":return"\\f"}}function yt(t){var e;return(e=mt(t))?io.test(e.v)?e.v:'"'+e.v.replace(/"/g,'\\"')+'"':(e=ft(t))?e.v:(e=t.matchPattern(Xs))?e:null}function bt(t){var e=t.pos,n=function(t){var e,n=t.pos;t.sp();var i="'"!==t.nextChar()&&'"'!==t.nextChar(),r=((e=i?t.matchPattern(to):e)?Et:yt)(t);if(null===r)return t.pos=n,null;if(t.sp(),!i||","!==t.nextChar()&&"}"!==t.nextChar())return t.matchString(":")?(t.sp(),null===(s=Et(t))?(t.pos=n,null):{t:fs,k:r,v:s}):(t.pos=n,null);e||Xs.test(r)||t.error("Expected a valid reference, but found '"+r+"' instead.");var s={t:fs,k:r,v:{t:ps,n:r}};return e&&(s.p=!0),s}(t);if(null===n)return null;var i=[n];if(t.matchString(",")){n=bt(t);return n?i.concat(n):(t.pos=e,null)}return i}function wt(t){return ft(t)||("true"===(n=(e=t).remaining()).substr(0,4)?(e.pos+=4,{t:ls,v:"true"}):"false"===n.substr(0,5)?(e.pos+=5,{t:ls,v:"false"}):null)||mt(t)||function(t){if(!t.matchString("`"))return null;for(var e,n,i="",r=!1,s=[];!r;)(e=t.matchPattern(Ys)||t.matchPattern(Zs)||t.matchString("$")||t.matchString('"'))?'"'===e?i+='\\"':"\\`"===e?i+="`":"$"===e?t.matchString("{")?(s.push({t:as,v:gt(i)}),i="",t.sp(),(n=Et(t))||t.error("Expected valid expression"),s.push({t:ys,x:n}),t.sp(),t.matchString("}")||t.error("Expected closing '}' after interpolated expression")):i+="$":i+=e:(e=t.matchPattern(Ws))?i+="\\u"+("000"+e.charCodeAt(1).toString(16)).slice(-4):r=!0;if(i.length&&s.push({t:as,v:gt(i)}),t.matchString("`")||t.error("Expected closing '`'"),s.length){if(1===s.length)return s[0];for(var o,a=s.pop();o=s.pop();)a={t:ws,s:"+",o:[o,a]};return{t:ys,x:a}}return{t:as,v:""}}(t)||function(t){var e=t.pos;if(t.sp(),!t.matchString("{"))return t.pos=e,null;var n=bt(t);return t.sp(),t.matchString("}")?{t:us,m:n}:(t.pos=e,null)}(t)||function(t){var e=t.pos;if(t.sp(),!t.matchString("["))return t.pos=e,null;var n=St(t,!0);return t.matchString("]")?{t:hs,m:n}:(t.pos=e,null)}(t)||ht(t);var e,n}function xt(t){var e,n=t.pos,i=t.matchPattern(oo)||"",r=!i&&t.relaxedNames&&t.matchPattern(no)||t.matchPattern(eo),s=i.length+(r&&r.length||0);if("@."===i&&(i="@",r=r?"this."+r:"this"),!r&&i&&(r=i,i=""),!r)return null;if("@"===i)if(ao.test(r))if(r.indexOf("event")&&r.indexOf("node")||t.inEvent){if(!r.indexOf("context"))return t.pos=t.pos-(r.length-7),{t:ys,x:{t:ps,n:"@context"}}}else t.error("@event and @node are only valid references within an event directive");else t.error("Unrecognized special reference @"+r);return i||t.relaxedNames||!so.test(r)?!i&&ro.test(r)?(e=ro.exec(r)[0],t.pos=n+e.length,{t:ds,v:e}):(e=(i||"")+m(r),t.matchString("(")&&(-1!==(i=e.lastIndexOf("."))&&"]"!==r[r.length-1]?0===i?(e=".",t.pos=n):(r=e.length,e=e.substr(0,i),t.pos=n+(s-(r-i))):--t.pos),{t:ps,n:e.replace(/^this\./,"./").replace(/^this$/,".")}):(t.pos=n,null)}function kt(t){return wt(t)||xt(t)||function(t){if(!t.matchString("("))return null;t.sp();var e=Et(t);return e||t.error(Us),t.sp(),t.matchString(")")||t.error($s),{t:ys,x:e}}(t)}function _t(t){var e=kt(t);if(!e)return null;for(;e;){var n=function(t){if(t.strictRefinement||t.sp(),t.matchString(".")){t.sp();var e=t.matchPattern(Xs);if(e)return{t:ms,n:e};t.error("Expected a property name")}if(t.matchString("[")){t.sp();e=Et(t);return e||t.error(Us),t.sp(),t.matchString("]")||t.error("Expected ']'"),{t:ms,x:e}}return null}(t);if(n)e={t:gs,x:e,r:n};else{if(!t.matchString("("))break;t.sp();n=St(t,!0);t.sp(),t.matchString(")")||t.error($s),e={t:xs,x:e},n&&(e.o=n)}}return e}function Et(t){if(!1!==t.allowExpressions)return function(t){var e=co(t);if(!e)return null;var n=t.pos;if(t.sp(),!t.matchString("?"))return t.pos=n,e;t.sp();var i=Et(t);return i||t.error(Us),t.sp(),t.matchString(":")||t.error('Expected ":"'),t.sp(),(n=Et(t))||t.error(Us),{t:bs,o:[e,i,n]}}(t);var e=xt(t);return t.sp(),e}function St(t,e){var n,i=[],r=t.pos;do{t.sp(),e&&(n=t.matchPattern(to));var s=Et(t);if(null===s&&i.length)t.error(Us);else if(null===s)return t.pos=r,null}while(n&&(s.p=!0),i.push(s),t.sp(),t.matchString(","));return i}function At(t,e){var n=t.pos,i=Et(t);if(!i){var r=t.matchPattern(/^(\w+)/);return r?{t:ps,n:r}:null}for(var s=0;s<e.length;s+=1)if(t.remaining().substr(0,e[s].length)===e[s])return i;return t.pos=n,xt(t)}function Ct(t){function n(t){if(A(t))return t;switch(t.t){case ls:case ds:case os:case cs:return t.v;case as:return JSON.stringify(String(t.v));case hs:return t.m&&Ot(t.m)?"[].concat("+r(t.m,"[","]",n)+")":"["+(t.m?t.m.map(n).join(","):"")+"]";case us:return t.m&&Ot(t.m)?"Object.assign({},"+r(t.m,"{","}",i)+")":"{"+(t.m?t.m.map(function(t){return t.k+":"+n(t.v)}).join(","):"")+"}";case vs:return("typeof"===t.s?"typeof ":t.s)+n(t.o);case ws:return n(t.o[0])+("in"===t.s.substr(0,2)?" "+t.s+" ":t.s)+n(t.o[1]);case xs:if(t.o&&Ot(t.o)){var e=o++;return"(x$"+e+"="+n(t.x)+").apply(x$"+e+","+n({t:hs,m:t.o})+")"}return n(t.x)+"("+(t.o?t.o.map(n).join(","):"")+")";case ys:return"("+n(t.x)+")";case gs:return n(t.x)+n(t.r);case ms:return t.n?"."+t.n:"["+n(t.x)+"]";case bs:return n(t.o[0])+"?"+n(t.o[1])+":"+n(t.o[2]);case ps:return"_"+s.indexOf(t.n);default:throw new Error("Expected legal JavaScript")}}function i(t){return t.p?n(t.k):t.k+":"+n(t.v)}function r(t,n,i,r){t=t.reduce(function(t,e){return e.p?t.str+=(t.open?i+",":t.str.length?",":"")+r(e):t.str+=""+(t.str.length?t.open?",":","+n:n)+r(e),t.open=!e.p,t},{open:!1,str:""});return t.open&&(t.str+=i),t.str}var s,o=0;!function t(e,n){e.t===ps&&A(e.n)&&(~n.indexOf(e.n)||n.unshift(e.n));var i=e.o||e.m;if(i)if(b(i))t(i,n);else for(var r=i.length;r--;)t(i[r],n);e.k&&e.t===fs&&!A(e.k)&&t(e.k,n),e.x&&t(e.x,n),e.r&&t(e.r,n),e.v&&t(e.v,n)}(t,s=[]);t=n(t);return{r:s,s:function(t){for(var e=[],n=o-1;0<=n;n--)e.push("x$"+n);return e.length?"(function(){var "+e.join(",")+";return("+t+");})()":t}(t)}}function Ot(t){for(var e=0;e<t.length;e++)if(t[e].p)return 1}function Nt(t,e){var n;if(t){for(;t.t===ys&&t.x;)t=t.x;return t.t===ps?~t.n.indexOf("@context")?e.x=Ct(t):e.r=t.n:(n=function(t){for(var e,n=[];t.t===gs&&t.r.t===ms;)(e=t.r).x?e.x.t===ps?n.unshift(e.x):n.unshift(Ct(e.x)):n.unshift(e.n),t=t.x;return t.t!==ps?null:{r:t.n,m:n}}(t))?e.rx=n:e.x=Ct(t),e}}function jt(t){var e=t.pos;if(/[=\/>\s]/.test(t.nextChar())||t.error("Expected `=`, `/`, `>` or whitespace"),t.sp(),!t.matchString("="))return t.pos=e,null;t.sp();var n=t.pos,i=t.sectionDepth,e=Vt(t,"'")||Vt(t,'"')||function(t){t.inAttribute=!0;for(var e=[],n=Rt(t)||Tt(t);n;)e.push(n),n=Rt(t)||Tt(t);return e.length?(t.inAttribute=!1,e):null}(t);return null===e&&t.error("Expected valid attribute value"),t.sectionDepth!==i&&(t.pos=n,t.error("An attribute value must contain as many opening section tags as closing section tags")),e.length?1===e.length&&A(e[0])?ct(e[0]):e:""}function Tt(t){var e,n=t.pos,i=t.matchPattern(xo);return i?(-1!==(e=lt(i,t.tags.map(function(t){return t.open})))&&(i=i.substr(0,e),t.pos=n+i.length),i):null}function Vt(t,e){var n=t.pos;if(!t.matchString(e))return null;t.inAttribute=e;for(var i=[],r=Rt(t)||Pt(t,e);null!==r;)i.push(r),r=Rt(t)||Pt(t,e);return t.matchString(e)?(t.inAttribute=!1,i):(t.pos=n,null)}function Pt(t,e){var n=t.remaining(),i=t.tags.map(function(t){return t.open});i.push(e);i=lt(n,i);return-1===i&&t.error("Quoted attribute value must have a closing quote"),i?(t.pos+=i,n.substr(0,i)):null}function Mt(t){var e=function(t){var e,n,i,r;if(t.sp(),!(e=t.matchPattern(fo)))return null;for(i=e.length,n=0;n<t.tags.length;n++)~(r=e.indexOf(t.tags[n].open))&&r<i&&(i=r);return i<e.length&&(t.pos-=e.length-i,!(e=e.substr(0,i)))?null:{n:e}}(t);if(!e)return null;if(n=wo[e.n])e.t=n.t,n.v&&(e.v=n.v),delete e.n,t.sp(),"="===t.nextChar()&&(e.f=jt(t));else if(i=vo.exec(e.n))e.n=i[1],e.t=Es,It(t,e);else if(i=yo.exec(e.n))e.n=i[1],e.t=Ss,It(t,e),e.v="in-out"===i[2]?"t0":"in"===i[2]?"t1":"t2";else if(i=mo.exec(e.n))e.n=function(t){for(var e=[],n=0,i=0;i<t.length;i++)"-"===t[i]&&"\\"!==t[i-1]&&(e.push(t.substring(n,i).replace(Eo,"")),n=i+1);return e.push(t.substring(n).replace(Eo,"")),e}(i[1]),e.t=_s,t.matchString("(")&&(e.a=Ct({t:hs,m:St(t)}),t.matchString(")")||t.error("Expected closing ')'")),t.inEvent=!0,function(t,e){var n=t.pos;t.matchString("=")||t.error("Missing required directive arguments");var i=t.matchString("'")||t.matchString('"');t.sp();var r=t.matchPattern(ko);if(void 0!==r)if(i){if(t.sp(),t.matchString(i))return(e.f=r)||!0;t.pos=n}else{if(t.matchPattern(_o))return(e.f=r)||!0;t.pos=n}else t.pos=n}(t,e)?go.test(e.f)&&(t.pos-=e.f.length,t.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, complete, detach, insert, destruct, attachchild, detachchild)")):It(t,e,!0),t.inEvent=!1;else if(i=bo.exec(e.n)){var n="bind"===i[2];e.n=n?i[3]:i[1],e.t=ns,It(t,e,!1,!0),!e.f&&n&&(e.f=[{t:Hr,r:i[3]}])}else{t.sp();var i="="===t.nextChar()?jt(t):null;if(e.f=null!=i?i:e.f,t.sanitizeEventAttributes&&po.test(e.n))return{exclude:!0};e.f=e.f||(""===e.f?"":0),e.t=ns}return e}function It(t,e,n,i){if(void 0===n&&(n=!1),void 0===i&&(i=!1),t.sp(),!t.matchString("="))return n&&t.error("Missing required directive arguments"),0;t.sp();var r=t.matchString('"')||t.matchString("'"),s=t.spreadArgs;t.spreadArgs=!0,t.inUnquotedAttribute=!r;n=i?At(t,[r||" ","/",">"]):{m:St(t),t:hs};t.inUnquotedAttribute=!1,t.spreadArgs=s,r&&(t.sp(),t.matchString(r)!==r&&t.error("Expected matching quote '"+r+"'")),i?(Nt(n,i={t:Hr}),e.f=[i]):e.f=Ct(n)}function Rt(t){var e,n;if(!1===t.interpolate[t.inside])return null;for(n=0;n<t.tags.length;n+=1)if(e=function(t,e){var n,i,r,s=t.pos;if(t.matchString("\\"+e.open)){if(0===s||"\\"!==t.str[s-1])return e.open}else if(!t.matchString(e.open))return null;if(n=function(t){if(!t.matchString("="))return null;var e=t.pos;t.sp();var n=t.matchPattern(Cs);if(!n)return t.pos=e,null;if(!t.matchPattern(Os))return null;var i=t.matchPattern(Cs);return i?(t.sp(),t.matchString("=")?[n,i]:(t.pos=e,null)):(t.pos=e,null)}(t))return t.matchString(e.close)?(e.open=n[0],e.close=n[1],t.sortMustacheTags(),So):null;if(t.sp(),t.matchString("/")){--t.pos;var o=t.pos;if(ht(t))t.pos=o;else{if(t.pos=o-e.close.length,t.inAttribute)return t.pos=s,null;t.error("Attempted to close a section that wasn't open")}}for(r=0;r<e.readers.length;r+=1)if(i=e.readers[r],n=i(t,e))return e.isStatic&&(n.s=1),t.includeLinePositions&&(n.q=t.getLinePos(s)),n;return t.pos=s,null}(t,t.tags[n]))return e;return t.inTag&&!t.inAttribute&&(e=Mt(t))?(t.sp(),e):void 0}function Bt(t){var e,n=[],i=t.pos;if(t.sp(),e=Kt(t)){for(e.x=Nt(e.x,{}),n.push(e),t.sp();t.matchString(",");)(e=Kt(t))||t.error("Expected another alias."),e.x=Nt(e.x,{}),n.push(e),t.sp();return n}return t.pos=i,null}function Kt(t){var e=t.pos;t.sp();var n=Et(t);if(!n)return t.pos=e,null;t.sp(),t.matchPattern(Co),t.sp();var i=t.matchPattern(Ao);return i?{n:i,x:n}:(t.pos=e,null)}function Lt(t,e){var n=t.pos;if(!t.matchString(e.open))return null;if(t.sp(),!t.matchString("/"))return t.pos=n,null;t.sp();var i=t.remaining(),r=i.indexOf(e.close);if(-1===r)return t.pos=n,null;i={t:Qr,r:i.substr(0,r).split(" ")[0]};return t.pos+=r,t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),i}function Dt(t,e,n){var i=t.pos;if(!t.matchString(e.open))return null;if(!t.matchPattern(Oo[n]))return t.pos=i,null;i={t:No[n]};return"elseif"===n?i.x=Et(t):"catch"!==n&&"then"!==n||(n=t.matchPattern(Xs))&&(i.n=n),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),i}function Ft(t,e){for(var n,i,r,s,o=1;o<t.length;o+=1)n=t[o],i=t[o-1],r=t[o-2],A(n)&&((s=i).t===Xr||s.t===ts)&&A(r)&&Io.test(r)&&Mo.test(n)&&(t[o-2]=r.replace(Io,"\n"),t[o]=n.replace(Mo,"")),e||(zt(n)&&A(i)&&Io.test(i)&&A(n.f[0])&&Mo.test(n.f[0])&&(t[o-1]=i.replace(Io,"\n"),n.f[0]=n.f[0].replace(Mo,"")),A(n)&&zt(i)&&(A(r=N(i.f))&&Io.test(r)&&Mo.test(n)&&(i.f[i.f.length-1]=r.replace(Io,"\n"),t[o]=n.replace(Mo,""))));return t}function zt(t){return(t.t===Wr||t.t===Gr)&&t.f}function Ut(t,e,n){var i;!e||A(i=t[0])&&((i=i.replace(e,""))?t[0]=i:t.shift()),!n||A(i=N(t))&&((i=i.replace(n,""))?t[t.length-1]=i:t.pop())}function $t(t,e,n,i,r,s,o){if(!A(t)){var a,h;for(Ft(t,o),a=t.length;a--;)((c=t[a]).exclude||e&&c.t===Xr)&&t.splice(a,1);for(Ut(t,i?Bo:null,r?Ko:null),a=t.length;a--;){var u,l,c,d,f,p=h=!1;(c=t[a]).w&&(d=t[a-1],u=!0,"string"==typeof d&&(t[a-1]=d.replace(Fo,"$1")),c.f&&("string"==typeof c.f[0]&&(c.f[0]=c.f[0].replace(zo,"")),f=c.f.length-1,"string"==typeof c.f[f]&&(c.f[f]=c.f[f].replace(Fo,function(t,e){return(u=e)||""}))),l=t[a+1],u&&"string"==typeof l&&(t[a+1]=l.replace(zo,""))),c.f&&(d=c.t===Yr&&(s[c.e.toLowerCase()]||s[c.e]),f=n||d,!n&&d&&Ut(c.f,Lo,Do),f||(l=t[a-1],d=t[a+1],(!l||A(l)&&Ko.test(l))&&(p=!0),(!d||A(d)&&Bo.test(d))&&(h=!0)),$t(c.f,e,f,p,h,s)),c.l&&(c.w&&c.l.forEach(function(t){return t.w=1}),$t(c.l,e,n,p,h,s),c.l.forEach(function(t){return t.l=1}),c.l.unshift(a+1,0),t.splice.apply(t,c.l),delete c.l),c.m&&($t(c.m,e,n,p,h,s),c.m.length<1&&delete c.m),delete c.w}for(a=t.length;a--;)A(t[a])&&(A(t[a+1])&&(t[a]=t[a]+t[a+1],t.splice(a+1,1)),n||(t[a]=t[a].replace(Ro," ")),""===t[a]&&t.splice(a,1))}}function qt(t){return t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()})}function Ht(r,s){Ji(r).forEach(function(t){if(n=r,"s"===t&&tr(n.r))return e=s,n=(i=r).s,i=r.r,void(e[n]||(e[n]=st(n,i.length)));var e,n,i=r[t];(tr(t=i)||b(t))&&Ht(i,s)})}function Zt(t,e){return new sa(t,e||{}).result}function Wt(t,e,n){t||c("Missing Ractive.parse - cannot parse "+e+". "+n)}function Gt(t,e){Wt(Zt,'compution string "${str}"',ha);var n=Zt(t,{expression:!0});return function(){return n.e.apply(e,n.r.map(function(t){return e.get(t)}))}}function Qt(t,e,n){var i,r,s,o,a;return w(n)&&(i=I(n,t),s=n.toString(),o=!0),A(n)&&(i=Gt(n,t),s=n),y(n)&&(A(n.get)?(i=Gt(n.get,t),s=n.get):w(n.get)?(i=I(n.get,t),s=n.get.toString(),o=!0):c("`%s` computation must have a `get()` method",e),w(n.set)&&(r=I(n.set,t),a=n.set.toString())),{getter:i,setter:r,getterString:s,setterString:a,getterUseStack:o}}function Yt(t){!t.started||t.outros.length||t.outroChildren||(t.outrosComplete||(t.outrosComplete=!0,t.parent&&t.parent.decrementOutros(t),function t(e){return!e||e.outrosComplete&&t(e.parent)}(t)&&t.detachNodes()),t.intros.length||t.totalChildren||(w(t.callback)&&t.callback(),t.parent&&!t.notifiedTotal&&(t.notifiedTotal=!0,t.parent.decrementTotal())))}function Jt(t){var e=t.detachQueue,n=function t(e,n){var i=n;if(i){for(var r=e.children.length;r--;)i=t(e.children[r],i);return i=e.outros.length?i.concat(e.outros):i}i=[];for(var s=e;s.parent;)s=s.parent;return t(s,i)}(t);if(n.length){var i,r,s=e.length,o=0,a=t.detachQueue=[];t:for(;s--;){for(i=e[s].node,o=n.length;o--;)if((r=n[o].element.node)===i||r.contains(i)||i.contains(r)){a.push(e[s]);continue t}e[s].detach()}}else t.detachNodes()}function Xt(t){t.dispatch()}function te(){pa.start();for(var t=performance.now(),e=0;e<ma.length;e+=1)ma[e].tick(t)||ma.splice(e--,1);pa.end(),ma.length?requestAnimationFrame(te):ga=!1}function ee(i){var r;return ya[i]||(r=i?i+".":"",ya[i]=function(t,e){var n;return A(t)?((n={})[r+t]=e,n):y(t)?r?function(t,e){var n,i={};if(!e)return t;for(n in e+=".",t)v(t,n)&&(i[e+n]=t[n]);return i}(t,i):t:void 0}),ya[i]}function ne(t,e){var n=t;if("."===e)return t.findContext();if("~"===e[0])return t.ractive.viewmodel.joinAll(S(e.slice(2)));if("."===e[0]||"^"===e[0]){for(var i=t,r=e.split("/"),s="^^"===r[0];i&&!i.context;)i=ie(i);for(var o=i&&i.context;i&&"^^"===r[0];){for(r.shift(),i=i.isIteration?i.parent.parent:ie(i);i&&!i.context;)i=ie(i);o=i&&i.context}if(!o&&s)throw new Error("Invalid context parent reference ('"+e+"'). There is not context at that level.");for(;"."===r[0]||".."===r[0];)".."===r.shift()&&(o=o.parent);return"."===(e=r.join("/"))[0]&&(e=e.slice(1)),o.joinAll(S(e))}var a=S(e);if(a.length){var h=a.shift();if("@"===h[0]){if("@this"===h||"@"===h)return t.ractive.viewmodel.getRactiveModel().joinAll(a);if("@index"===h||"@key"===h){a.length&&se(h);s=re(t);return s&&s["get"+("i"===h[1]?"Index":"Key")]()}if("@last"===h){var u=re(t);return u&&u.parent.getLast()}if("@global"===h)return Ea.joinAll(a);if("@shared"===h)return _a.joinAll(a);if("@keypath"===h||"@rootpath"===h){for(var l="r"===e[1]?t.ractive.root:null,c=t;c&&(!c.context||c.isRoot&&c.ractive.component&&(l||!c.ractive.isolated));)c=c.isRoot?c.componentParent:c.parent;return c.getKeypath(l)}if("@context"===h)return new ka(t.getContext(),"context").joinAll(a);if("@local"===h)return t.getContext()._data.joinAll(a);if("@style"===h)return t.ractive.constructor._cssModel.joinAll(a);if("@helpers"===h)return t.ractive.viewmodel.getHelpers().joinAll(a);if("@macro"!==h)throw new Error("Invalid special reference '"+h+"'");u=function(t){for(var e=t;e;){if(e.owner.handle)return e.owner.handle;e=ie(e)}}(t);return u?new ka(u,"macro").joinAll(a):void 0}if(h&&!a.length){var d=t.ractive.viewmodel.getHelpers();if(d.has(h))return d.joinKey(h)}for(var f,u=(u=function(t){for(var e=t;e&&!e.context&&!e.aliases;)e=e.parent;return e}(t))&&u.context?u.context:t.findContext(),p=!1,m=t.ractive.warnAboutAmbiguity,g=0;t;){if(t.isIteration&&(h===t.parent.keyRef?f=t.getKey():h===t.parent.indexRef&&(f=t.getIndex()),f&&a.length&&se(h)),!(f=!f&&t.aliases&&v(t.aliases,h)?t.aliases[h]:f)&&t.context&&t.context.has(h)&&(f=t.context.joinKey(h),p?m&&k("'"+e+"' resolved but is ambiguous and will create a mapping to a parent component."):m&&g&&k("'"+e+"' resolved but is ambiguous.")),f)return p&&(f=n.ractive.viewmodel.createLink(h,f,h,{implicit:!0})),f=0<a.length&&w(f.joinAll)?f.joinAll(a):f;t.context&&!t.aliases&&(g=1),t.ractive.isolated||t.owner&&t.owner.containerFragment||!(t.componentParent||!t.parent&&t.ractive.component)?t=t.parent:(t=t.componentParent||t.ractive.component.up,p=!0)}d=n.ractive;return d.resolveInstanceMembers&&"data"!==h&&h in d?d.viewmodel.getRactiveModel().joinKey(h).joinAll(a):(m&&k("'"+e+"' is ambiguous and did not resolve."),u.joinKey(h).joinAll(a))}}function ie(t){return t&&(!t.ractive.isolated&&!(t.owner&&t.owner.containerFragment)&&(t.componentParent||!t.parent&&t.ractive.component)||t.parent)}function re(t){for(var e,n=t;!n.isIteration&&(e=ie(n));)n=e;return n.isIteration&&n}function se(t){throw new Error("An index or key reference ("+t+") cannot have child properties")}function oe(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];t=t.fragment||t._fakeFragment||(t._fakeFragment=new Aa(t));return t.getContext.apply(t,e)}function ae(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return this.ctx||(this.ctx=new Sa.Context(this)),t.unshift(Gi(this.ctx)),Wi.apply(null,t)}function he(t){for(var e=t;e&&!e.context;)e=e.parent;return e||t&&t.ractive.fragment}function ue(t,e){var n=Na,i=e&&e.deep,r=e&&e.shuffle,s=pa.start();e&&"keep"in e&&(Na=e.keep);for(var o=t.length;o--;){var a=t[o][0],h=t[o][1],u=t[o][2];if(!a)throw pa.end(),new Error("Failed to set invalid keypath '"+u+"'");if(i)!function t(e,n){var i=e.get(!1,Ta);if(null==i||!y(n))return e.set(n);if(!y(i))return e.set(n);for(var r in n)v(n,r)&&t(e.joinKey(r),n[r])}(a,h);else if(r){var l=h,u=a.get(),l=l||u;if(x(u))a.set(l);else{if(!tr(u)||!tr(l))throw pa.end(),new Error("You cannot merge an array with a non-array");u=function(e){if(!0===e)return null;if(w(e))return e;if(A(e))return Va[e]||(Va[e]=function(t){return t[e]});throw new Error("If supplied, options.compare must be a string, function, or true")}(r);a.merge(l,u)}}else a.set(h)}return pa.end(),Na=n,1===t.length?s.then(function(){return t[0][1]}):s}function le(t,e,n,i){if(!n&&("."===e[0]||"^"===e[1]))return k("Attempted to set a relative keypath from a non-relative context. You can use a context object to set relative keypaths."),[];var r=S(e),n=n||t.viewmodel;return ja.test(e)?n.findMatches(r):n!==t.viewmodel||!t.component||t.isolated||n.has(r[0])||"@"===e[0]||!e[0]||i?[n.joinAll(r)]:[ne(t.fragment||new Aa(t),e)]}function ce(t,n,e,i){var r=[];if(b(n))for(var s in n)!function(e){v(n,e)&&r.push.apply(r,le(t,e,null,i).map(function(t){return[t,n[e],e]}))}(s);else r.push.apply(r,le(t,n,null,i).map(function(t){return[t,e,n]}));return r}function de(t,e,n,i){if(!A(e)||!o(n))throw new Error("Bad arguments");return ue(ce(t,e,n,i&&i.isolated).map(function(t){var e=t[0],n=t[1],t=e.get();if(!o(n)||!o(t))throw new Error(Pa);return[e,t+n]}))}function fe(t){t=Promise.resolve(t);return Qi(t,"stop",{value:a}),t}function pe(t,e,n,i){var r,s;r=t,i={easing:(s=(o=(o=i)||{}).easing?w(o.easing)?o.easing:r.easing[o.easing]:s)||Ma,duration:"duration"in o?o.duration:400,complete:o.complete||a,step:o.step||a,interpolator:o.interpolator};var o=e.get();if(h(o,n))return i.complete(i.to),fe(n);t=E(o,n,t,i.interpolator);return t?e.animate(o,n,i,t):(pa.start(),e.set(n),pa.end(),fe(n))}function me(t,e){t.event&&t._eventQueue.push(t.event),t.event=e}function ge(t){t._eventQueue.length?t.event=t._eventQueue.pop():t.event=null}function ve(t,e){var n=e?Ia:Ra;if(n[t])return n[t];var i=t.split("."),r=[],s=!1;e&&(i.unshift("this"),s=!0);for(var o=Math.pow(2,i.length)-(e?1:0),a=0;a<o;a++){for(var h=[],u=0;u<i.length;u++)h.push(1&a>>u?"*":i[u]);r.unshift(h.join("."))}return s&&(2<i.length?r.push.apply(r,ve(t,!1)):(r.push("*"),r.push(t))),n[t]=r}function ye(t,e,n,i){if(void 0===i&&(i=[]),e)return n.name=e,i.unshift(n),function t(e,n,i,r,s){void 0===s&&(s=!1);var o=!0;if(s||e._nsSubs){me(e,i);for(var a=n.length;a--;)n[a]in e._subs&&(o=be(e,e._subs[n[a]],i,r)&&o);ge(e)}e.parent&&o&&(s&&e.component&&(s=e.component.name+"."+n[n.length-1],n=ve(s,!1),i&&!i.component&&(i.component=e)),o=t(e.parent,n,i,r));return o}(t,t._nsSubs?ve(e,!0):["*",e],n,i,!0)}function be(t,e,n,i){for(var r=null,s=!1,o=0,a=(e=e.slice()).length;o<a;o+=1)e[o].off||!1!==e[o].handler.apply(t,i)||(s=!0);return n&&s&&(r=n.event)&&(r.preventDefault&&r.preventDefault(),r.stopPropagation&&r.stopPropagation()),!s}function we(t,e){return t[e._guid]||(t[e._guid]=[])}function xe(t,e){var n=[];return function e(t,n,i,r){{var s;t.isAnchor?n&&t.name!==n||i.push(t):t.items?t.items.forEach(function(t){return e(t,n,i,r)}):t.iterations?t.iterations.forEach(function(t){return e(t,n,i,r)}):!t.fragment||t.component&&t.fragment.ractive!==r?t.instance&&t.instance.fragment&&(s=[],e(t.instance.fragment,n,s,r),s.forEach(function(t){return t.ractive===r&&i.push(t)})):e(t.fragment,n,i,r)}}(t,e=void 0===e?null:e,n,t.ractive),n}function ke(t,e){var e=xe(t.fragment,e=void 0===e?null:e),i={},r=t._children.byName;e.forEach(function(t){var e=t.name;e in i||(i[e]=0);var n=i[e],n=(r[e]||[])[n];n&&n.lastBound!==t&&(n.lastBound&&n.lastBound.removeChild(n),t.addChild(n)),i[e]++})}function _e(){pa.addFragment(this.instance.fragment)}function Ee(){return this.anchor?this.anchor.findNextNode():void 0}function Se(t,e){(A(this.computed[t]=e)||w(e))&&(e=this.computed[t]={get:e});var n=S(t);if(!~t.indexOf("*")){t=n.pop();return this.viewmodel.joinAll(n).compute(t,e)}e.pattern=new RegExp("^"+n.map(function(t){return t.replace(/\*\*/g,"(.+)").replace(/\*/g,"((?:\\\\.|[^\\.])+)")}).join("\\.")+"$")}function Ae(t,e,n){for(void 0===e&&(e=!0);t&&(t.type!==Yr||n&&t.name!==n)&&(!e||t.type!==rs&&t.type!==es);)t=t.owner||(t.component||t.yield?t.containerFragment||t.component.up:t.parent||t.up||void 0);return t}function Ce(t,e,n){var i=[],n=function(t,e,n){switch(e){case"splice":for(void 0!==n[0]&&n[0]<0&&(n[0]=t+Math.max(n[0],-t)),x(n[0])&&(n[0]=0);n.length<2;)n.push(t-n[0]);return l(n[1])||(n[1]=t-n[0]),n[1]=Math.min(n[1],t-n[0]),n;case"sort":case"reverse":return null;case"pop":return t?[t-1,1]:[0,0];case"push":return[t,0].concat(n);case"shift":return[0,t?1:0];case"unshift":return[0,0].concat(n)}}(t,e,n);if(!n)return null;var r,s=n.length-2-n[1],o=Math.min(t,n[0]),a=o+n[1];for(i.startIndex=o,r=0;r<o;r+=1)i.push(r);for(;r<a;r+=1)i.push(-1);for(;r<t;r+=1)i.push(r+s);return i.touchedFrom=0!=s?n[0]:t,i}function Oe(o){function i(t,e){var n=t.get();if(!tr(n)){if(x(n)){var n=[],i=Fa[o].apply(n,e),r=pa.start().then(function(){return i});return t.set(n),pa.end(),r}throw new Error("shuffle array method "+o+" called on non-array at "+t.getKeypath())}var r=Ce(n.length,o,e),s=Fa[o].apply(n,e),e=pa.start().then(function(){return s});return e.result=s,r?t.shuffle?t.shuffle(r):t.mark():t.set(s),pa.end(),e}return{path:function(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];return i(this.viewmodel.joinAll(S(t)),e)},model:i}}function Ne(t,e,n){e.parent&&e.parent.wrapper&&e.parent.adapt();var i=pa.start();return e.mark(n&&n.force),e.notifyUpstream(),pa.end(),La.update.fire(t,e),i}function je(t,e,n){var i=[];if(b(e))for(var r in e)v(e,r)&&i.push([Te(t,r).model,e[r]]);else i.push([Te(t,e).model,n]);return i}function Te(t,e){t=t.fragment;return A(e)?{model:ne(t,e),instance:t.ractive}:{model:t.findContext(),instance:e}}function Ve(t,e){return t.events&&t.events.find&&t.events.find(function(t){return~t.template.n.indexOf(e)})}function Pe(t){var e;if(t=A(t)&&ah?ah.call(document,t):t)return t._ractive?t._ractive.proxy.getContext():(e=t.__ractive_instances__)?1===e.length?oe(e[0]):void 0:Pe(t.parentNode)}function Me(t){return ch?t:{is:t}}function Ie(){return lr.createDocumentFragment()}function Re(t){var e;if(t&&"boolean"!=typeof t){if(!ur||!lr||!t)return null;if(t.nodeType)return t;if(A(t)){if(!(e=lr.getElementById(t))&&lr.querySelector)try{e=lr.querySelector(t)}catch(t){}if(e&&e.nodeType)return e}return t[0]&&t[0].nodeType?t[0]:null}}function Be(t){return t&&"unknown"!=typeof t.parentNode&&t.parentNode&&t.parentNode.removeChild(t),t}function Ke(t){return null==t||l(t)&&isNaN(t)||!t.toString?"":""+t}function Le(t){return Ke(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function De(t,e){for(var n=e;n;){if(n===t||n.owner===t)return 1;n=n.target||n.parent}}function Fe(e,n){n=n&&e.model?e.model.get():e.newValue;try{e.oldValue=e.oldFn?e.oldFn.call(e.oldContext,void 0,n,e.keypath):n}catch(t){k("Failed to execute observer oldValue callback for '"+this.keypath+"': "+(t.message||t)),e.oldValue=n}}function ze(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return t.map(p).join(".")}function Ue(i,r,t){var s=i.oldValues;i.oldFn?(t||(i.oldValues={}),Ji(r).forEach(function(t){var e=[s[t],r[t],t],n=i.pattern.exec(t);n&&e.push.apply(e,n.slice(1)),i.oldValues[t]=i.oldFn.apply(i.oldContext,e)})):t?Ji(r).forEach(function(t){return s[t]=r[t]}):i.oldValues=r}function $e(){return-1}function qe(t){return void 0===t?Oh:Oh=t}function He(t){Eh.push(t),Sh=!0}function Ze(t){var e=Ah=Ah||Ge();e&&(t||Sh)&&(Oh?Eh.forEach(function(t){var e,e=(e=t.id,lr&&(lr.querySelector('[data-ractive-css="'+e+'"]')||Ge(e)));e&&(t=We(t.id),Ch?e.styleSheet.cssText!==t&&(e.styleSheet.cssText=t):e.innerHTML!==t&&(e.innerHTML=t))}):Ch?e.styleSheet.cssText=We(null):e.innerHTML=We(null),Sh=!1)}function We(e){var t=(e=e&&!tr(e)?[e]:e)?Eh.filter(function(t){return~e.indexOf(t.id)}):Eh;return t.forEach(function(t){return t.applied=!0}),t.reduce(function(t,e){return t?t+"\n\n/* {"+e.id+"} */\n"+e.styles:""},_h)}function Ge(t){if(lr){var e=lr.createElement("style");return e.type="text/css",e.setAttribute("data-ractive-css",t||""),lr.getElementsByTagName("head")[0].appendChild(e),null===Ch&&(Ch=!!e.styleSheet),e}}function Qe(e,t,n){void 0===n&&(n=[]);var i=[];return e=e.replace(Th,function(t){return"\0"+(i.push(t)-1)}).replace(jh,""),n.forEach(function(t){e=e.replace(t,function(t){return"\0"+(i.push(t)-1)})}),t(e,function(t){return t.replace(Vh,function(t,e){return i[e]})})}function Ye(t){return t.trim()}function Je(t){return t.str}function Xe(t,e){var i='[data-ractive-css~="{'+e+'}"]';return Lh.test(t)?t.replace(Lh,i):Qe(t,function(t,e){return e(t=t.replace(Mh,"$&").replace(Ph,function(t,e){if(Kh.test(e))return t;var n=e.split(",").map(Ye).map(function(t){return function(t,e){for(var n,i=[];n=Bh.exec(t);)i.push({str:n[0],base:n[1],modifiers:n[2]});for(var r=i.map(Je),s=[],o=i.length;o--;){var a=r.slice(),h=i[o];a[o]=h.base+e+h.modifiers||"";h=r.slice();h[o]=e+" "+h[o],s.push(a.join(" "),h.join(" "))}return s.join(", ")}(t,i)}).join(", ")+" ";return t.replace(e,n)}).replace(Ih,""))},[Rh])}function tn(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function en(t,e,n){var i=y(t)?e:n,n=this._cssModel;n.locked=!0;e=ue(ce({viewmodel:n},t,e,!0),i);n.locked=!1;var r=pa.start();return this.extensions.forEach(function(t){t=t._cssModel;t.mark(),t.downstreamChanged("",1)}),pa.end(),nn(this,!i||!1!==i.apply),e.then(function(){return r})}function nn(t,e){var n=rn(t),i=t.extensions.map(function(t){return nn(t,!1)}).reduce(function(t,e){return e||t},!1);return e&&(n||i)&&((t=t._cssDef)&&!t.applied||Ze(!0)),n||i}function rn(t){var e=t.css;if(w(e)){var n=t._cssDef,e=sn(t,e),e=n.transform?Xe(e,n.id):e;if(n.styles!==e)return n.styles=e,!0}}function sn(t,e){if(A(e))return e;var n=t.cssData,i=t._cssModel,r=function(t){return i.joinAll(S(t)).get()};r.__proto__=n;r=e.call(t,r);return A(r)?r:""}function on(t,n,e){var i=!0===t.css?"":A(t.css)&&!Fh.test(t.css)&&Re(t.css)||t.css,r=i,s=t.cssId||tn()+tn()+"-"+tn()+"-"+tn()+"-"+tn()+"-"+tn()+tn()+tn();y(i)?(i="textContent"in i?i.textContent:i.innerHTML,r=i):w(i)&&(i=sn(n,r=i));var o={transform:"noCSSTransform"in t?!t.noCSSTransform:!t.noCssTransform};Qi(n,"_cssDef",{configurable:!0,value:o}),Qi(n,"css",{get:function(){return r},set:function(t){var e=sn(n,r=t),t=o.styles;o.styles=o.transform?Xe(e,s):e,o.applied&&t!==o.styles&&Ze(!0)}}),o.styles=o.transform?Xe(i,s):i,o.id=e.cssId=s,n._cssIds.push(s),He(n._cssDef)}function an(){return{}}function hn(t,e){var n;(n=e)&&n.constructor!==Object&&(w(n)||(y(n)?k("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged"):c("data option must be an object or a function, `"+n+"` is not valid")));var i=w(t),r=w(e=!e&&!i?an:e);return i||r?function(){return ln(r?un(e,this):e,i?un(t,this):t)}:ln(e,t)}function un(t,e){e=t.call(e);if(e)return y(e)||c("Data function must return an object"),e.constructor!==Object&&_("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),e}function ln(t,e){if(t&&e){for(var n in e)n in t||(t[n]=e[n]);return t}return t||e}function cn(n,t){return t.call(n,{fromId:ua.fromId,isParsed:ua.isParsed,parse:function(t,e){return void 0===e&&(e=ua.getParseOptions(n)),ua.parse(t,e)}})}function dn(t,e){return A(t)?(n=e,"#"===(e=t)[0]&&(e=ua.fromId(e)),t=ua.parseFor(e,n)):(function(t){if(null==t)throw new Error("The template cannot be "+t+".");if(!l(t.v))throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(t.v!==zr)throw new Error("Mismatched template version (expected "+zr+", got "+t.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app")}(t),at(t)),t;var n}function fn(t,e,n){if(e)for(var i in e)!n&&v(t,i)||(t[i]=e[i])}function pn(t,i,r){function s(){var t=function(t,e){if(e in t){var n=t[e];return w(n)?n:function(){return n}}return a}(s._parent,i),e="_super"in this,n=this._super;this._super=t;t=r.apply(this,arguments);return e?this._super=n:delete this._super,t}return/_super/.test(r)?(s._parent=t,s._method=r,s):r}function mn(t,e,n){return"options."+t+" has been deprecated in favour of options."+e+"."+(n?" You cannot specify both options, please use options."+e+".":"")}function gn(t,e,n){if(e in t){if(n in t)throw new Error(mn(e,n,!0));k(mn(e,n)),t[n]=t[e]}}function vn(e,n,i,r,s){var t,o,a;for(o in gn(t=r,"beforeInit","onconstruct"),gn(t,"init","onrender"),gn(t,"complete","oncomplete"),gn(t,"eventDefinitions","events"),tr(t.adaptors)&&gn(t,"adaptors","adapt"),r)v(Qh,o)&&(a=r[o],"el"!==o&&w(a)?k(o+" is a Ractive option that does not expect a function and will be ignored","init"===e?i:null):i[o]=a);if(i.append&&i.enhance)throw new Error("Cannot use append and enhance at the same time");Zh.forEach(function(t){t[e](n,i,r,s)}),Nh[e](n,i,r,s),$h[e](n,i,r,s),zh[e](n,i,r,s),function(t,e,n){for(var i in n){var r;!Yh[i]&&v(n,i)&&(w(r=n[i])&&((i in Ml||"on"===i.slice(0,2)&&i.slice(2)in La&&i in e)&&!Xh.test(r.toString())&&k("Overriding Ractive prototype function '"+i+"' without calling the '"+Xh+"' method can be very dangerous."),r=pn(t,i,r)),e[i]=r)}}(n.prototype,i,r)}function yn(t){var e={};return t.forEach(function(t){return e[t]=!0}),e}function bn(t){for(var e=t.split(tu),n=e.length;n--;)e[n]||e.splice(n,1);return e}function wn(t){var e=this.getValue();tr(e)||(e=[e]);var n=this.node.options,i=n.length;if(t)for(;i--;)n[i].selected=!1;else for(;i--;){var r=n[i],s=(r._ractive||r).value;r.selected=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]==e)return!0;return!1}(e,s)}}function xn(t){var e=this.getValue();if(!this.locked){this.node._ractive.value=e;var n=this.node.options,i=n.length,r=!1;if(t)for(;i--;)n[i].selected=!1;else for(;i--;){var s=n[i],o=(s._ractive||s).value;if(s.disabled&&s.selected&&(r=!0),o==e)return void(s.selected=!0)}r||(this.node.selectedIndex=-1)}}function kn(t){var e=this.getValue();this.locked||(this.node.innerHTML=t||x(e)?"":e)}function _n(t){var e=this.node,n=e.checked,i=this.getValue();return t?e.checked=!1:(e.value=this.node._ractive.value=i,e.checked=this.element.compare(i,this.element.getAttribute("name")),void(n&&!e.checked&&this.element.binding&&this.element.binding.rendered&&this.element.binding.group.model.set(this.element.binding.group.getValue())))}function En(t){this.locked||(t?(this.node.removeAttribute("value"),this.node.value=this.node._ractive.value=null):(t=this.getValue(),this.node.value=this.node._ractive.value=t,this.node.setAttribute("value",Ke(t))))}function Sn(t){this.locked||(t?(this.node._ractive.value="",this.node.removeAttribute("value")):(t=this.getValue(),t=Ke(this.node._ractive.value=t),this.node.value!==t&&(this.node.value=t),this.node.setAttribute("value",t)))}function An(t){this.node.checked=!t&&this.element.compare(this.getValue(),this.element.binding.getValue())}function Cn(t){var e=this.element,n=this.node,i=e.binding,r=this.getValue(),s=e.getAttribute("value");if(tr(r)){for(var o=r.length;o--;)if(e.compare(s,r[o]))return void(i.isChecked=n.checked=!0);i.isChecked=n.checked=!1}else i.isChecked=n.checked=e.compare(r,s)}function On(t){for(var e,n=t?{}:A(t=this.getValue()||"")?Qe(t,function(t,e){return t.split(";").filter(function(t){return!!t.trim()}).map(e).reduce(function(t,e){var n=e.indexOf(":");return t[e.substr(0,n).trim()]=e.substr(n+1).trim(),t},{})}):{},i=this.node.style,r=Ji(n),s=this.previous||[],o=0;o<r.length;)r[o]in i&&(e=n[r[o]].replace("!important",""),i.setProperty(r[o],e,e.length!==n[r[o]].length?"important":"")),o++;for(o=s.length;o--;)!~r.indexOf(s[o])&&s[o]in i&&i.setProperty(s[o],"","");this.previous=r}function Nn(t){var e;this.style||(this.style=qt(this.name.substr(6))),t&&this.node.style.getPropertyValue(this.style)!==this.last||(t=(e=t?"":Ke(this.getValue())).replace("!important",""),this.node.style.setProperty(this.style,t,t.length!==e.length?"important":""),this.last=this.node.style.getPropertyValue(this.style))}function jn(t){var e=t?[]:bn(Ke(this.getValue())),n=this.node.className,t=bn(n=void 0!==n.baseVal?n.baseVal:n),i=this.previous||[],t=e.concat(t.filter(function(t){return!~i.indexOf(t)})).join(" ");t!==n&&(A(this.node.className)?this.node.className=t:this.node.className.baseVal=t),this.previous=e}function Tn(t){var e=this.name.substr(6),n=this.node.className,n=bn(n=void 0!==n.baseVal?n.baseVal:n),t=!t&&this.getValue();this.inlineClass||(this.inlineClass=e),t&&!~n.indexOf(e)?n.push(e):!t&&~n.indexOf(e)&&n.splice(n.indexOf(e),1),A(this.node.className)?this.node.className=n.join(" "):this.node.className.baseVal=n.join(" ")}function Vn(t){this.locked||(t?(this.useProperty&&(this.node[this.propertyName]=!1),this.node.removeAttribute(this.propertyName)):this.useProperty?this.node[this.propertyName]=this.getValue():(t=this.getValue())?this.node.setAttribute(this.propertyName,A(t)?t:""):this.node.removeAttribute(this.propertyName))}function Pn(t){t?this.node.getAttribute(this.name)===this.value&&this.node.removeAttribute(this.name):(this.value=Ke(this.getString()),this.node.setAttribute(this.name,this.value))}function Mn(t){t?this.value===this.node.getAttributeNS(this.namespace,this.name.slice(this.name.indexOf(":")+1))&&this.node.removeAttributeNS(this.namespace,this.name.slice(this.name.indexOf(":")+1)):(this.value=Ke(this.getString()),this.node.setAttributeNS(this.namespace,this.name.slice(this.name.indexOf(":")+1),this.value))}function In(t,e,n){t.value=0===e||("true"===e||"false"!==e&&"0"!==e&&e);e=t.element[t.flag];return t.element[t.flag]=t.value,n&&!t.element.attributes.binding&&e!==t.value&&t.element.recreateTwowayBinding(),t.value}function Rn(t){Hh.call(this,t)}function Bn(t,e){t.torndown=!0,t.fragment.unbind(),t._observers.slice().forEach(n),t.el&&t.el.__ractive_instances__&&j(t.el.__ractive_instances__,t);e=e();return La.teardown.fire(t),e.then(function(){La.destruct.fire(t),t.viewmodel.teardown()}),e}function Kn(n,t,i){var t=(n.constructor["_"+i]||[]).concat(s(t[i]||[])),r="on"===i?"once":i+"Once";t.forEach(function(t){var e=t[0],t=t[1];w(t)?n[i](e,t):y(t)&&w(t.handler)&&n[t.once?r:i](e,t.handler,Gi(t))})}function Ln(t,e){qi.DEBUG&&vr(),(o=t)._guid="r-"+pu++,o._subs=Gi(null),o._nsSubs=0,o._config={},o.event=null,o._eventQueue=[],o._observers=[],o._children=[],o._children.byName={},o.children=o._children,o.component||((o.root=o).parent=o.container=null),function(t){var e=t.component,n=t.constructor.attributes;if(n&&e){var i=e.template,r=i.m?i.m.slice():[],s=r.filter(function(t){return t.t===ns}).map(function(t){return t.n});n.required.forEach(function(t){~s.indexOf(t)||k("Component '"+e.name+"' requires attribute '"+t+"' to be provided")});for(var o=n.optional.concat(n.required),a=[],h=r.length;h--;){var u=r[h];u.t!==ns||~o.indexOf(u.n)?n.mapAll||u.t!==Es&&u.t!==Ss&&u.t!==As||a.unshift(r.splice(h,1)[0]):n.mapAll?a.unshift({t:ns,n:u.n,f:[{t:Hr,r:"~/"+u.n}]}):a.unshift(r.splice(h,1)[0])}a.length&&(e.template={t:i.t,e:i.e,f:i.f,m:r,p:i.p}),t._attributePartial=a}}(t),Kn(t,e,"on"),!v(e,"delegate")&&t.parent&&t.parent.delegate!==t.delegate&&(t.delegate=!1),tr(e.use)&&t.use.apply(t,e.use.filter(function(t){return t.construct})),La.construct.fire(t,e),e.onconstruct&&e.onconstruct.call(t,oe(t),e);for(var n=du.length;n--;){var i=du[n];t[i]=Wi(Gi(t.constructor[i]||null),e[i])}for(n=fu.length;n--;){var r=fu[n];t[r]=Wi(Gi(t.constructor.prototype[r]),e[r])}t._attributePartial&&(t.partials["extra-attributes"]=t._attributePartial,delete t._attributePartial);var s,o=new cu({adapt:function(e,t,n){function i(t){return A(t)&&((t=d("adaptors",e,t))||c(_r(t,"adaptor"))),t}t=t.map(i);n=O(n.adapt).map(i),n=[t,n];return e.parent&&!e.isolated&&n.push(e.parent.viewmodel.adaptors),T.apply(null,n)}(t,t.adapt,e),data:Uh.init(t.constructor,t,e),ractive:t});for(s in t.adapt=o.adaptors,t.viewmodel=o,t.computed)Se.call(t,s,t.computed[s])}function Dn(t){this.item&&this.removeChild(this.item);var e=t.instance;t.anchor=this,t.up=this.up,t.name=t.nameOption||this.name,this.name=t.name,e.isolated||e.viewmodel.attached(this.up),this.rendered&&function(t,e){{var n,i;t.rendered&&(e.shouldDestroy=!1,e.up=t.up,t.item=e,t.instance=e.instance,n=t.up.findNextNode(t),e.instance.fragment.rendered&&e.instance.unrender(),e.partials=e.instance.partials,e.instance.partials=Wi(Gi(e.partials),e.partials,t._partials),e.instance.fragment.unbind(!0),e.instance.fragment.componentParent=t.up,e.instance.fragment.bind(e.instance.viewmodel),t.attributes.forEach($),t.eventHandlers.forEach($),t.attributes.forEach(Q),t.eventHandlers.forEach(Q),i=t.up.findParentNode(),Ii(e.instance,i,i.contains(n)?n:null,t.occupants),e.lastBound!==t&&(e.lastBound=t))}}(this,t)}function Fn(t){this.item===t&&(zn(this,t),this.name=this.template.n)}function zn(t,e){t.rendered&&(e.shouldDestroy=!0,e.instance.unrender(),t.eventHandlers.forEach(tt),t.attributes.forEach(tt),t.eventHandlers.forEach(X),t.attributes.forEach(X),e.instance.el=e.instance.anchor=null,e.instance.fragment.componentParent=null,e.up=null,e.anchor=null,t.item=null,t.instance=null)}function Un(){var t=gu;gu=[],t.forEach(ke)}function $n(t){t.deps.length||t.refs||t.links.length||t.teardown()}function qn(t,e,n,i){void 0===i&&(i={}),e&&e.f&&e.f.s&&(i.register?(t.model=new vu(n,e.f),t.model.register(t)):t.fn=ot(e.f.s,e.f.r.length))}function Hn(t,e,i,r){return void 0===r&&(r={}),e.f.r.map(function(t,e){var n;return r.specialRef&&(n=r.specialRef(t,e))?n:ne(i,t)})}function Zn(){this._ractive.binding.handleChange()}function Wn(t,e,n){t+="-bindingGroup";return e[t]||(e[t]=new wu(t,e,n))}function Gn(){var e=this,t=this.bindings.filter(function(t){return t.node&&t.node.checked}).map(function(t){return t.element.getAttribute("value")}),n=[];return t.forEach(function(t){e.bindings[0].arrayContains(n,t)||n.push(t)}),n}function Qn(){Zn.call(this);var t=this._ractive.binding.model.get();this.value=null==t?"":t}function Yn(t){return t.selectedOptions?V(t.selectedOptions):t.options?V(t.options).filter(function(t){return t.selected}):[]}function Jn(){var t=this.bindings.filter(function(t){return t.node.checked});return 0<t.length?t[0].element.getAttribute("value"):void 0}function Xn(t){return!(!t||!t.template.f||1!==t.template.f.length||t.template.f[0].s)&&(t.template.f[0].t===Hr||(t.template.f[0].t===Zr&&k("It is not possible create a binding using a triple mustache."),!1))}function ti(t){t=t.toString();return t?" "+t:""}function ei(){Iu=!0}function ni(){Ru=!0}function ii(){Bu=!0}function ri(t){var e,n=t.type,i=t.currentTarget,r=i._ractive&&i._ractive.proxy,s=t.target,o=!0,a=!1;Iu=Ru=Bu=!1;var h=t.stopPropagation,u=t.stopImmediatePropagation,l=t.preventDefault;for(t.stopPropagation=ei,t.stopImmediatePropagation=ni,t.preventDefault=ii;o&&s&&s!==i;){var c=s._ractive&&s._ractive.proxy;if(c&&c.up.delegate===r&&function(t,e,n){if(Ku&&t instanceof Ku)for(var i=e;i&&i!==n;){if(i.disabled)return!1;i=i.parentNode||i.correspondingUseElement}return!0}(t,s,i)&&(e=c.listeners&&c.listeners[n]))for(var d=e.length,f=0;f<d;f++){if(o=!1!==e[f].call(s,t)&&o,Ru){o=!1;break}Iu&&(o=!1),Bu&&!a&&(a=!0,l.call(t))}s=s.parentNode||s.correspondingUseElement}return o=o&&(!Iu&&!Ru),Iu&&h.call(t),Ru&&u.call(t),t.stopPropagation=h,t.stopImmediaitePropagation=u,t.preventDefault=l,o}function si(t){var e,n=this._ractive.proxy;if(n.listeners&&(e=n.listeners[t.type]))for(var i=e.length,r=0;r<i;r++)e[r]&&e[r].call(this,t)}function oi(){var t=this._ractive.proxy;pa.start(),t.formBindings.forEach(ai),pa.end()}function ai(t){t.model.set(t.resetValue)}function hi(t,e,n,i){var r,s;n?((r=n[0])&&3===r.nodeType?(s=r.nodeValue.indexOf(i),n.shift(),0===s?r.nodeValue.length!==i.length&&n.unshift(r.splitText(i.length)):r.nodeValue=i):(r=t.node=lr.createTextNode(i),n[0]?e.insertBefore(r,n[0]):e.appendChild(r)),t.node=r):(t.node||(t.node=lr.createTextNode(i)),e.appendChild(t.node))}function ui(e){e.base&&e.base.unregister(e.proxy),e.models&&e.models.forEach(function(t){t.unregister&&t.unregister(e)})}function li(t,e){return e.r?ne(t,e.r):e.x?new vu(t,e.x):e.rx?new Uu(t,e.rx):void 0}function ci(t){$u.call(this,t)}function di(t,e){return new Yu(t,{values:e}).result}function fi(t,e,n){n=function(t,e,n){var i=function t(e,n){if(n)return n.template&&n.template.p&&!tr(n.template.p)&&v(n.template.p,e)?n.template.p[e]:n.up&&n.up.owner?t(e,n.up.owner):void 0}(e,n.owner);if(i)return i;var r,s=f("partials",t,e);if(s){if(w(i=s.partials[e])){if((r=i).styleSet)return r;(r=i.bind(s)).isOwner=v(s.partials,e),i=r.call(t,ua)}if(i||""===i)return ua.isParsed(i)||((n=ua.parseFor(i,s)).p&&k("Partials ({{>%s}}) cannot contain nested inline partials",e,{ractive:t}),(r?s:function(t,e){return v(t.partials,e)?t:function t(e,n){return e?v(e.partials,n)?e:t(e.Parent,n):void 0}(t.constructor,e)}(s,e)).partials[e]=i=n.t),r&&(i._fn=r),i.v?(at(i),s.partials[e]=i.t):i;k(Er,e,"partial","partial",{ractive:t})}}(t,e,n||{});if(n)return n;if(n=ua.fromId(e,{noThrow:!0})){n=ua.parseFor(n,t);return n.p&&function(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];for(var i=0;i<e.length;i++){var r,s=e[i];for(r in s)r in t||!v(s,r)||(t[r]=s[r])}}(t.partials,n.p),t.partials[e]=n.t}}function pi(t){ci.call(this,t);var e=t.template;e.t===ss?this.yielder=1:e.t===Yr&&(this.type=Jr,this.macro=t.macro)}function mi(t){t.template.c&&(t.partial=[{t:Wr,n:ks,f:t.partial}],Wi(t.partial[0],t.template.c),t.yielder?t.partial[0].y=t:t.partial[0].z=t.template.z)}function gi(t,e,n){var i=e;return tr(i)?t.partial=i:i&&y(i)?tr(i.t)?t.partial=i.t:A(i.template)&&(t.partial=bi(i.template,i.template,t.ractive).t):w(i)&&i.styleSet?(t.fn=i,t.fragment&&(t.fragment.cssIds=i._cssIds)):null!=i&&((i=fi(t.ractive,""+i,t.containerFragment||t.up))?(t.name=e,i.styleSet?(t.fn=i,t.fragment&&(t.fragment.cssIds=i._cssIds)):t.partial=i):n?t.partial=bi(""+e,""+e,t.ractive).t:t.name=e),t.partial}function vi(t,e){var n=this.fragment.aliases||(this.fragment.aliases={});e?n[e]=this._data.joinAll(S(t)):n[t]=this._data}function yi(n){var i,t,e=n.fn,r=n.fragment,s=n.template=Wi({},n.template),o=n.handle=r.getContext({proxy:n,aliasLocal:vi,name:n.template.e||n.name,attributes:{},setTemplate:function(t){if(gi(this,t,!0),!this.initing){if(this.dirtyTemplate=!0,this.fnTemplate=this.partial,!this.updating){t=pa.start();return this.bubble(),pa.end(),t}this.bubble(),pa.promise()}}.bind(n),template:s,macro:e});s.p||(s.p={}),s.p=o.partials=Wi({},s.p),v(s.p,"content")||(s.p.content=s.f||[]),tr(e.attributes)?(n._attrs={},i=function(){this.dirty=!0,n.dirtyAttrs=!0,n.bubble()},tr(s.m)?(t=s.m,s.p[tl]=s.m=t.filter(function(t){return!~e.attributes.indexOf(t.n)}),t.filter(function(t){return~e.attributes.indexOf(t.n)}).forEach(function(t){var e=new Vl({template:t.f,owner:n});e.bubble=i,e.findFirstNode=a,n._attrs[t.n]=e})):s.p[tl]=[]):s.p[tl]=s.m,n._attrs&&(Ji(n._attrs).forEach(function(t){n._attrs[t].bind()}),n.refreshAttrs()),n.initing=1,n.proxy=e.call(n.ractive,o,o.attributes)||{},n.partial||(n.partial=[]),n.fnTemplate=n.partial,n.initing=0,mi(n),r.resetTemplate(n.partial)}function bi(e,t,n){var i;try{i=ua.parse(t,ua.getParseOptions(n))}catch(t){k("Could not parse partial from expression '"+e+"'\n"+t.message)}return i||{t:[]}}function wi(t,e,n,i){var r=t.context?ki(t,0,n):void 0;e.key=n,e.index=i,e.context=r,t.source&&(e.lastValue=r&&r.get()),e.idxModel&&e.idxModel.applyValue(i),e.keyModel&&e.keyModel.applyValue(n),e.pathModel&&(e.pathModel.context=r,e.pathModel.applyValue(r.getKeypath())),e.rootModel&&(e.rootModel.context=r,e.rootModel.applyValue(r.getKeypath(e.ractive.root)));var s=e.aliases;t.aliases&&t.aliases.forEach(function(t){"."===t.x.r?s[t.n]=r:"@index"===t.x.r?s[t.n]=e.getIndex():"@key"===t.x.r?s[t.n]=e.getKey():"@keypath"===t.x.r?s[t.n]=e.getKeypath():"@rootpath"===t.x.r&&(s[t.n]=e.getKeypath(!0))})}function xi(t,e){t=t.context.get()||[];return!0===e?t.slice():t.map(function(t){return e.reduce(function(t,e){return t&&t[e]},t)})}function ki(t,e,n){if(t.source){var i,r=t.source.model.get();if(r.indexOf&&~(i=r.indexOf(t.context.joinKey(n).get())))return t.source.model.joinKey(i)}return t.context.joinKey(n)}function _i(t,e){var n,i=(t.containerFragment||t.up).findNextNode(t);i?(n=Ie(),e.render(n),i.parentNode.insertBefore(n,i)):e.render(t.up.findParentNode())}function Ei(){rl=!lr[hl]}function Si(){rl=!1}function Ai(){rl=!0}function Ci(t,e,n){for(var i=e;i;){if(v(i,t)&&(x(n)||n?i.rendering:i.unrendering))return i[t];i=i.component&&i.component.ractive}return e[t]}function Oi(t){return Nl[t]||(Nl[t]=dh(t))}function Ni(t,e,n){t=t.f.find(function(t){return t.t===e});return t?t.n?[{t:19,n:54,f:t.f||[],z:[{n:t.n,x:{r:"__await."+n}}]}]:t.f||[]:[]}function ji(t){if(A(t.template))return new il(t);var e,n,i,r,s,o,a,h=t.template.t;if(h===Yr){if(n=t.template.e,(e=f("partials",t.up.ractive,n))&&(e=e.partials[n]).styleSet)return t.macro=e,new pi(t);if(e=function t(e,n){var i,r=f("components",e,n);if(r&&(i=r.components[n])&&!i.isInstance)if(i.default&&i.default.isInstance)i=i.default;else if(!i.then&&w(i)){var s=i.bind(r);if(s.isOwner=v(r.components,n),!(i=s()))return void k(Er,n,"component","component",{ractive:e});(i=A(i)?t(e,i):i)._fn=s,r.components[n]=i}return i}(t.up.ractive,n)){if(w(e.then))return i=e,s=(r=t).template.p||{},o=r.template.e,new pi(Wi({},r,{template:{t:Yr,e:o},macro:function(e){e.setTemplate(s["async-loading"]||[]),i.then(function(t){r.up.ractive.components[o]=t,s["async-loaded"]?(e.partials.component=[r.template],e.setTemplate(s["async-loaded"])):e.setTemplate([r.template])},function(t){s["async-failed"]?(e.aliasLocal("error","error"),e.set("@local.error",t),e.setTemplate(s["async-failed"])):e.setTemplate([])})}}));if(w(e))return new mu(t,e)}return new(e=Tl[n.toLowerCase()]||Mu)(t)}if(!(a=h===ns?((a=t.owner)&&(a.type===es||a.type===rs||a.type===Yr)||(a=Ae(t.up)),(t.element=a).type===rs||a.type===es?Ju:hu):jl[h]))throw new Error("Unrecognised item type "+h);return new a(t)}function Ti(t,e,n){void 0===n&&(n={});for(var i,r=0;r<t.length;r++)n[t[r].n]||(i=li(e,t[r].x),(n[t[r].n]=i).reference());return n}function Vi(t){var e,n=he(this);if(t){if(this.rootModel)return this.rootModel;this.rootModel=new Xu(this.context.getKeypath(this.ractive.root),this.context,this.ractive.root),e=this.rootModel}else{if(this.pathModel)return this.pathModel;this.pathModel=new Xu(this.context.getKeypath(),this.context),e=this.pathModel}return n&&n.context&&n.getKeypath(t).registerChild(e),e}function Pi(e,t,n){var i=e.viewmodel.computed;if(i)for(var r in i)r in e.viewmodel.value&&i[r]&&!i[r].isReadonly&&i[r].set(e.viewmodel.value[r]);Wh.init(e.constructor,e,t),tr(t.use)&&e.use.apply(e,t.use.filter(function(t){return!t.construct})),La.config.fire(e),La.init.begin(e);var s,n=e.fragment=Mi(e,n);n&&n.bind(e.viewmodel),La.init.end(e),Kn(e,t,"observe"),n&&(s=e.el=e.target=Re(e.el||e.target))&&!e.component&&(s=e.render(s,e.append),qi.DEBUG_PROMISES&&s.catch(function(t){throw _("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;"),k("An error happened during rendering",{ractive:e}),function(){qi.DEBUG&&br.apply(null,arguments)}(t),t}))}function Mi(t,e){if(void 0===e&&(e={}),t.template){e=[].concat(t.constructor._cssIds||[],e.cssIds||[]);return new Vl({owner:t,template:t.template,cssIds:e})}}function Ii(t,e,n,i){t.rendering=!0;var r,s=pa.start();if(pa.scheduleTask(function(){return La.render.fire(t)},!0),t.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");return t.destroyed&&(t.destroyed=!1,t.fragment=Mi(t).bind(t.viewmodel)),n=Re(n)||t.anchor,t.el=t.target=e,t.anchor=n,t.cssId&&Ze(),e&&((e.__ractive_instances__||(e.__ractive_instances__=[])).push(t),n?(r=lr.createDocumentFragment(),t.fragment.render(r),e.insertBefore(r,n)):t.fragment.render(e,i)),pa.end(),t.rendering=!1,s.then(function(){t.torndown||La.complete.fire(t)})}function Ri(){var t=[this.cssId].concat(this.findAllComponents().map(function(t){return t.cssId}));return We(Ji(t.reduce(function(t,e){return t[e]=!0,t},{})))}function Bi(){return this.fragment.toString(!0)}function Ki(t){return t&&t instanceof this}function Li(t,e){return this._cssModel.joinAll(S(t)).get(!0,e)}function Di(e){return Il.map(function(t){return"\n/* ---- extra style "+t.id+" */\n"+(w(t.css)?t.css(e):t.css)}).join("")}function Fi(){for(var e=this,t=[],n=arguments.length;n--;)t[n]=arguments[n];return t.forEach(function(t){w(t)&&t({proto:e.prototype,Ractive:e.Ractive,instance:e})}),this}function zi(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return t.length?t.reduce($i,this):$i(this)}function Ui(t,e){return $i(this,e=void 0===e?{}:e,t)}function $i(t,e,n){var i,r=w(n)&&n;if((e=void 0===e?{}:e).prototype instanceof qi)throw new Error("Ractive no longer supports multiple inheritance.");if(r){if(!(r.prototype instanceof t))throw new Error("Only classes that inherit the appropriate prototype may be used with extend");if(!Rl.test(r.toString()))throw new Error("Only classes that call super in their constructor may be used with extend");i=r.prototype}else r=function(t){return this instanceof r?void(t&&!0===t.component||(Ln(this,t||{}),Pi(this,t||{},{}))):new r(t)},((i=Gi(t.prototype)).constructor=r).prototype=i;return Yi(r,{defaults:{value:i},extend:{value:zi,writable:!0,configurable:!0},extendWith:{value:Ui,writable:!0,configurable:!0},extensions:{value:[]},use:{value:Fi},isInstance:{value:Ki},Parent:{value:t},Ractive:{value:qi},styleGet:{value:Li.bind(r),configurable:!0},styleSet:{value:en.bind(r),configurable:!0}}),Wh.extend(t,i,e,r),r._on=(t._on||[]).concat(s(e.on)),r._observe=(t._observe||[]).concat(s(e.observe)),t.extensions.push(r),e.attributes&&(n=tr(e.attributes)?{optional:e.attributes,required:[]}:e.attributes,tr(n.required)||(n.required=[]),tr(n.optional)||(n.optional=[]),r.attributes=n),Uh.extend(t,i,e,r),Qi(r,"helpers",{writable:!0,value:i.helpers}),tr(e.use)&&r.use.apply(r,e.use),r}function qi(t){return this instanceof qi?void(t&&t.component||(Ln(this,t||{}),Pi(this,t||{},{}))):new qi(t)}Object.assign||(Object.assign=function(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),r=e.length,s=0;s<r;s++){var o,a=e[s];for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])}return i});var Hi,Zi=Object,Wi=Zi.assign,Gi=Zi.create,Qi=Zi.defineProperty,Yi=Zi.defineProperties,Ji=Zi.keys,Xi=Object.prototype.toString,tr=Array.isArray;Array.prototype.find||Qi(Array.prototype,"find",{value:function(t,e){if(null===this||x(this))throw new TypeError("Array.prototype.find called on null or undefined");if(!w(t))throw new TypeError(t+" is not a function");for(var n=Object(this),i=n.length>>>0,r=0;r<i;r++)if(v(n,r)&&t.call(e,n[r],r,n))return n[r]},configurable:!0,writable:!0}),"undefined"!=typeof window&&window.Node&&window.Node.prototype&&!window.Node.prototype.contains&&(Node.prototype.contains=function(t){if(!t)throw new TypeError("node required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1}),"undefined"!=typeof window&&window.performance&&!window.performance.now&&(window.performance=window.performance||{},Hi=Date.now(),window.performance.now=function(){return Date.now()-Hi});var er,nr,ir,rr,sr,or,ar,hr,ur="undefined"!=typeof window?window:null,lr=ur?document:null,cr=!!lr,dr="undefined"!=typeof global?global:ur,fr="undefined"!=typeof console&&w(console.warn)&&w(console.warn.apply),pr=!!lr&&lr.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),mr=["o","ms","moz","webkit"];dr.Promise||(er={},nr={},ir={},(rr=dr.Promise=function(t){var o,a=[],h=[],u=er,e=function(e){return function(t){u===er&&(o=or((u=e)===nr?a:h,t),sr(o))}},n=e(nr),e=e(ir);try{t(n,e)}catch(t){e(t)}return{then:function(e,n){var s=new rr(function(i,r){function t(e,t,n){w(e)?t.push(function(t){try{ar(s,e(t),i,r)}catch(t){r(t)}}):t.push(n)}t(e,a,i),t(n,h,r),u!==er&&sr(o)});return s},catch:function(t){return this.then(null,t)},finally:function(e){return this.then(function(t){return e(),t},function(t){throw e(),t})}}}).all=function(e){return new rr(function(n,i){var t,r=[];if(e.length)for(var s=t=e.length;t--;)!function(t,e){t&&w(t.then)?t.then(function(t){r[e]=t,--s||n(r)},i):(r[e]=t,--s||n(r))}(e[t],t);else n(r)})},rr.race=function(o){return new rr(function(e,n){function t(t){r&&(r=!1,e(t))}function i(t){r&&(r=!1,n(t))}for(var r=!0,s=0;s<o.length;s++)o[s]&&w(o[s].then)&&o[s].then(t,i)})},rr.resolve=function(e){return e&&w(e.then)?e:new rr(function(t){t(e)})},rr.reject=function(n){return n&&w(n.then)?n:new rr(function(t,e){e(n)})},sr=function(t){setTimeout(t,0)},or=function(e,n){return function(){for(var t=void 0;t=e.shift();)t(n)}},ar=function(e,t,n,i){var r;if(t===e)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(t instanceof rr)t.then(n,i);else if(t&&(y(t)||w(t))){try{r=t.then}catch(t){return void i(t)}if(w(r)){var s;try{r.call(t,function(t){s||(s=!0,ar(e,t,n,i))},function(t){s||(s=!0,i(t))})}catch(t){if(!s)return i(t),void(s=!0)}}else n(t)}else n(t)}),"undefined"==typeof window||window.requestAnimationFrame&&window.cancelAnimationFrame||(hr=0,window.requestAnimationFrame=function(t){var e=Date.now(),n=Math.max(0,16-(e-hr)),i=window.setTimeout(function(){t(e+n)},n);return hr=e+n,i},window.cancelAnimationFrame=function(t){clearTimeout(t)});var gr,vr,yr,br,wr={el:void 0,append:!1,delegate:!0,enhance:!1,template:null,allowExpressions:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],staticDelimiters:["[[","]]"],staticTripleDelimiters:["[[[","]]]"],csp:!0,interpolate:!1,preserveWhitespace:!1,preserveStandaloneSections:!1,sanitize:!1,stripComments:!0,contextLines:0,data:Gi(null),helpers:Gi(null),computed:Gi(null),syncComputedChildren:!1,resolveInstanceMembers:!1,warnAboutAmbiguity:!1,adapt:[],isolated:!0,twoway:!0,lazy:!1,noIntro:!1,noOutro:!1,transitionsEnabled:!0,complete:void 0,nestedTransitions:!0,css:null,noCSSTransform:!1},xr={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}},kr={};fr?(gr=["%cRactive.js %c1.4.0-edge %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"],vr=function(){var t,e;vr=(!1!==qi.WELCOME_MESSAGE&&(t="WELCOME_MESSAGE"in qi?qi.WELCOME_MESSAGE:"You're running Ractive 1.4.0-edge in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://ractive.js.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n",(e=!!console.groupCollapsed)&&console.groupCollapsed.apply(console,gr),console.log(t),e&&console.groupEnd(gr)),a)},yr=function(t,e){var n,i,r;vr(),y(e[e.length-1])&&(r=(n=e.pop())?n.ractive:null)&&(r.component&&(i=r.component.name)&&(t="<"+i+"> "+t),(r=n.node||r.fragment&&r.fragment.rendered&&r.find("*"))&&e.push(r)),console.warn.apply(console,["%cRactive.js: %c"+t,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(e))},br=function(){console.log.apply(console,arguments)}):yr=br=vr=a;function _r(t,e){return'Missing "'+t+'" '+e+" plugin. You may need to download a plugin via http://ractive.js.org/integrations/#"+e+"s"}var Er='A function was specified for "%s" %s, but no %s was returned',Sr={number:function(e,t){if(!o(e)||!o(t))return null;var n=(t=+t)-(e=+e);return n?function(t){return e+t*n}:function(){return e}},array:function(t,e){var n;if(!tr(t)||!tr(e))return null;for(var i=[],r=[],s=n=Math.min(t.length,e.length);s--;)r[s]=E(t[s],e[s]);for(s=n;s<t.length;s+=1)i[s]=t[s];for(s=n;s<e.length;s+=1)i[s]=e[s];return function(t){for(var e=n;e--;)i[e]=r[e](t);return i}},object:function(e,n){if(!b(e)||!b(n))return null;var t,i,r=[],s={},o={};for(t in e)!function(t){v(e,t)&&(v(n,t)?(r.push(t),o[t]=E(e[t],n[t])||function(){return n[t]}):s[t]=e[t])}(t);for(i in n)v(n,i)&&!v(e,i)&&(s[i]=n[i]);var a=r.length;return function(t){for(var e=a;e--;){var n=r[e];s[n]=o[n](t)}return s}}},Ar=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,Cr=/([^\\](?:\\\\)*)\./,Or=/\\|\./g,Nr=/((?:\\)+)\1|\\(\.)/g,jr=Function.prototype.bind,Tr={early:[],mark:[]},Vr={early:[],mark:[]},Pr={virtual:!1},Mr=function(t){this.deps=[],this.children=[],this.childByKey={},this.links=[],this.bindings=[],t&&(this.parent=t,this.root=t.root)},Ir=Mr.prototype;Ir.addShuffleTask=function(t,e){Tr[e=void 0===e?"early":e].push(t)},Ir.addShuffleRegister=function(t,e){Vr[e=void 0===e?"early":e].push({model:this,item:t})},Ir.downstreamChanged=function(){},Ir.findMatches=function(t){for(var n,e=t.length,i=[this],r=0;r<e;r+=1)!function(){var e=t[r];"*"===e?(n=[],i.forEach(function(t){n.push.apply(n,t.getValueChildren(t.get()))})):n=i.map(function(t){return t.joinKey(e)}),i=n}();return n},Ir.getKeypath=function(t){return t!==this.ractive&&this._link?this._link.target.getKeypath(t):(this.keypath||(e=this.parent&&this.parent.getKeypath(t),this.keypath=e?this.parent.getKeypath(t)+"."+p(this.key):p(this.key)),this.keypath);var e},Ir.getValueChildren=function(t){var n,i=this;tr(t)?(n=[],"length"in this&&this.length!==t.length&&n.push(this.joinKey("length")),t.forEach(function(t,e){n.push(i.joinKey(e))})):b(t)||w(t)?n=Ji(t).map(function(t){return i.joinKey(p(t))}):null!=t&&(n=[]);t=this.computed;return t&&n.push.apply(n,Ji(t).map(function(t){return i.joinKey(t)})),n},Ir.getVirtual=function(t){var e=this.get(t,{virtual:!1});if(u(e)){for(var n=tr(e)?[]:Gi(null),i=Ji(e),r=i.length;r--;){var s=this.childByKey[i[r]];s?s._link?n[i[r]]=s._link.getVirtual():n[i[r]]=s.getVirtual():n[i[r]]=e[i[r]]}for(r=this.children.length;r--;){var o=this.children[r];o.key in n||!o._link||(n[o.key]=o._link.getVirtual())}if(this.computed)for(r=(i=Ji(this.computed)).length;r--;)n[i[r]]=this.computed[i[r]].get();return n}return e},Ir.has=function(t){var e=this;if(this._link)return this._link.has(t);var n=this.get(!1,Pr);if(!n)return!1;if(t=g(t),(w(n)||b(n))&&t in n)return!0;var i=this.computed;return!!(i&&t in this.computed)||((i=this.root.ractive&&this.root.ractive.computed)&&Ji(i).forEach(function(t){return!(!i[t].pattern||!i[t].pattern.test(e.getKeypath()))||void 0}),!1)},Ir.joinAll=function(t,e){for(var n=this,i=0;i<t.length;i+=1){if(e&&!1===e.lastLink&&i+1===t.length&&n.childByKey[t[i]]&&n.childByKey[t[i]]._link)return n.childByKey[t[i]];n=n.joinKey(t[i],e)}return n},Ir.notifyUpstream=function(t){for(var e=this,n=this.parent,i=t||[this.key];n;)n.patterns&&n.patterns.forEach(function(t){return t.notify(i.slice())}),i.unshift(n.key),n.links.forEach(function(t){return t.notifiedUpstream(i,e.root)}),n.deps.forEach(function(t){return t.handleChange(i)}),n.downstreamChanged(t),n=n.parent},Ir.rebind=function(t,e,n){var i=this;if(this._link&&this._link.rebind(t,e,!1),t!==this){for(var r=this.deps.length;r--;)i.deps[r].rebind&&i.deps[r].rebind(t,e,n);for(r=this.links.length;r--;){var s=i.links[r];s.owner&&s.owner._link&&s.relinking(t,n)}for(r=this.children.length;r--;){var o=i.children[r];o.rebind(t?t.joinKey(o.key):void 0,o._link||o,n),i.dataModel&&i.addShuffleTask(function(){return D(i,i.retrieve())},"early")}for(r=this.bindings.length;r--;)i.bindings[r].rebind(t,e,n)}},Ir.reference=function(){"refs"in this?this.refs++:this.refs=1},Ir.register=function(t){this.deps.push(t)},Ir.registerLink=function(t){C(this.links,t)},Ir.registerPatternObserver=function(t){(this.patterns||(this.patterns=[])).push(t),this.register(t)},Ir.registerTwowayBinding=function(t){this.bindings.push(t)},Ir.unreference=function(){"refs"in this&&this.refs--},Ir.unregister=function(t){j(this.deps,t)},Ir.unregisterLink=function(t){j(this.links,t)},Ir.unregisterPatternObserver=function(t){j(this.patterns,t),this.unregister(t)},Ir.unregisterTwowayBinding=function(t){j(this.bindings,t)},Ir.updateFromBindings=function(t){for(var e,n=this.bindings.length;n--;){var i=this.bindings[n].getValue();i!==this.value&&this.set(i)}this.bindings.length||(e=function(t){for(var e=t.length;e--;)if(t[e].bound){var n=t[e].owner;if(n)return{value:"checked"===n.name?n.node.checked:n.node.value}}}(this.deps))&&e.value!==this.value&&this.set(e.value),t&&(this.children.forEach(B),this.links.forEach(B),this._link&&this._link.updateFromBindings(t))};var Rr,Br=[],Kr={key:"@missing",animate:a,applyValue:a,get:a,getKeypath:function(){return this.key},joinAll:function(){return this},joinKey:function(){return this},mark:a,registerLink:a,shufle:a,set:a,unregisterLink:a};Kr.parent=Kr;var Lr=function(r){function n(t,e,n,i){r.call(this,t),this.owner=e,this.target=n,this.key=x(i)?e.key:i,e&&e.isLink&&(this.sourcePath=e.sourcePath+"."+this.key),n&&n.registerLink(this),t&&(this.isReadonly=t.isReadonly),this.isLink=!0}r&&(n.__proto__=r);var t=n.prototype=Object.create(r&&r.prototype);return t.constructor=n,t.animate=function(t,e,n,i){return this.target.animate(t,e,n,i)},t.applyValue=function(t){this.boundValue&&(this.boundValue=null),this.target.applyValue(t)},t.attach=function(t){t=ne(t,this.key);t?this.relinking(t,!1):this.owner.unlink()},t.detach=function(){this.relinking(Kr,!1)},t.get=function(t,e){void 0===e&&(e={}),t&&(U(this),e.unwrap=!("unwrap"in e)||e.unwrap);t=!("shouldBind"in e)||e.shouldBind;return e.shouldBind=this.mapping&&this.target.parent&&this.target.parent.isRoot,R(this,this.target.get(!1,e),t)},t.getKeypath=function(t){return t&&t!==this.root.ractive?this.target.getKeypath(t):r.prototype.getKeypath.call(this,t)},t.handleChange=function(){this.deps.forEach(H),this.links.forEach(H),this.notifyUpstream()},t.isDetached=function(){return this.virtual&&this.target===Kr},t.joinKey=function(t){return x(t)||""===t?this:(v(this.childByKey,t)||(e=new n(this,this,this.target.joinKey(t),t),this.children.push(e),this.childByKey[t]=e),this.childByKey[t]);var e},t.mark=function(t){this.target.mark(t)},t.marked=function(){this.boundValue&&(this.boundValue=null),this.links.forEach(G),this.deps.forEach(H)},t.markedAll=function(){this.children.forEach(e),this.marked()},t.notifiedUpstream=function(e,t){var n,i,r=this;this.links.forEach(function(t){return t.notifiedUpstream(e,r.root)}),this.deps.forEach(H),e&&this.rootLink&&(n=this.parent,this.root!==t?((t=e.slice(1)).unshift(this.key),this.notifyUpstream(t)):n&&n!==this.target&&(i=[n.key,this.key],n.links.forEach(function(t){return t.notifiedUpstream(i,n.root)}),n.deps.forEach(function(t){return t.handleChange(i)}),n.notifyUpstream(i)))},t.relinked=function(){this.target.registerLink(this),this.children.forEach(function(t){return t.relinked()})},t.relinking=function(e,n){var t=this;(e=this.rootLink&&this.sourcePath?rt(this.sourcePath,e,this.target):e)&&this.target!==e&&(this.target&&this.target.unregisterLink(this),this.target=e,this.children.forEach(function(t){t.relinking(e.joinKey(t.key),n)}),n||(this.keypath=void 0),this.rootLink&&this.addShuffleTask(function(){t.relinked(),n||(t.markedAll(),t.notifyUpstream())}))},t.set=function(t){this.boundValue&&(this.boundValue=null),this.target.set(t)},t.shuffle=function(t){this.shuffling||(this.target.shuffling?L(this,t,!0):this.target.shuffle?this.target.shuffle(t):this.target.mark())},t.source=function(){return this.target.source?this.target.source():this.target},t.teardown=function(){this._link&&this._link.teardown(),this.target.unregisterLink(this),this.children.forEach(J)},n}(Mr);Mr.prototype.link=function(t,e,n){var i=this._link||new Lr(this.parent,this,t,this.key);return i.implicit=n&&n.implicit,i.mapping=n&&n.mapping,i.sourcePath=e,i.rootLink=!0,this._link&&this._link.relinking(t,!1),this.rebind(i,this,!1),K(),(this._link=i).markedAll(),this.notifyUpstream(),i},Mr.prototype.unlink=function(){var t;this._link&&(t=this._link,this._link=void 0,t.rebind(this,t,!1),K(),t.teardown(),this.notifyUpstream())};function Dr(t){this.name="ParseError",this.message=t;try{throw new Error(t)}catch(t){this.stack=t.stack}}var Fr=Gi(null),zr=4,Ur=/^\s+/;Dr.prototype=Error.prototype;function $r(t,e){var n,i=0;this.str=t,this.options=e||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(t){t=i+t.length+1;return i=t},0),this.init&&this.init(t,e);for(var r=[];this.pos<this.str.length&&(n=this.read());)r.push(n);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(r,e):r}$r.prototype={read:function(t){var e;t=t||this.converters;for(var n=this.pos,i=t.length,r=0;r<i;r+=1)if(this.pos=n,e=t[r](this))return e;return null},getContextMessage:function(t,e){var n=this.getLinePos(t),i=n[0],r=n[1];if(-1===this.options.contextLines)return[i,r,e+" at line "+i+" character "+r];var s=this.lines[i-1],o="",t="";this.options.contextLines&&(n=i-1-this.options.contextLines<0?0:i-1-this.options.contextLines,(o=this.lines.slice(n,i-1-n).join("\n").replace(/\t/g,"  "))&&(o+="\n"),t=(t=this.lines.slice(i,i+this.options.contextLines).join("\n").replace(/\t/g,"  "))&&"\n"+t);var a=0,t=o+s.replace(/\t/g,function(t,e){return e<r&&(a+=1),"  "})+"\n"+new Array(r+a).join(" ")+"^----"+t;return[i,r,e+" at line "+i+" character "+r+":\n"+t]},getLinePos:function(t){for(var e=0,n=0;t>=this.lineEnds[e];)n=this.lineEnds[e],e+=1;return[e+1,1+(t-n),t]},error:function(t){var e,n=this.getContextMessage(this.pos,t),i=n[0],r=n[1],n=n[2];throw(e=new Dr(n)).line=i,e.character=r,e.shortMessage=t,e},matchString:function(t){return this.str.substr(this.pos,t.length)===t?(this.pos+=t.length,t):void 0},matchPattern:function(t){return(t=t.exec(this.remaining()))?(this.pos+=t[0].length,t[1]||t[0]):void 0},sp:function(){this.matchPattern(Ur)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)},warn:function(t){k(this.getContextMessage(this.pos,t)[2])}},$r.extend=function(t){function e(t,e){$r.call(this,t,e)}for(var n in e.prototype=Gi(this.prototype),t)v(t,n)&&(e.prototype[n]=t[n]);return e.extend=$r.extend,e};var qr,Hr=2,Zr=3,Wr=4,Gr=5,Qr=6,Yr=7,Jr=8,Xr=9,ts=10,es=11,ns=13,is=14,rs=15,ss=16,os=20,as=21,hs=22,us=23,ls=24,cs=25,ds=26,fs=27,ps=30,ms=31,gs=32,vs=33,ys=34,bs=35,ws=36,xs=40,ks=53,_s=70,Es=71,Ss=72,As=73,Cs=/^[^\s=]+/,Os=/^\s+/,Ns=/^(\/(?:[^\n\r\u2028\u2029/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/,js=/[-/\\^$*+?.()|[\]{}]/g,Ts={},Vs={allowfullscreen:1,async:1,autofocus:1,autoplay:1,checked:1,compact:1,controls:1,declare:1,default:1,defaultchecked:1,defaultmuted:1,defaultselected:1,defer:1,disabled:1,enabled:1,formnovalidate:1,hidden:1,indeterminate:1,inert:1,ismap:1,itemscope:1,loop:1,multiple:1,muted:1,nohref:1,noresize:1,noshade:1,novalidate:1,nowrap:1,open:1,pauseonexit:1,readonly:1,required:1,reversed:1,scoped:1,seamless:1,selected:1,sortable:1,translate:1,truespeed:1,typemustmatch:1,visible:1},Ps={area:1,base:1,br:1,col:1,command:1,doctype:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},Ms={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Is=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],Rs=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Ji(Ms).join("|")+"));?","g"),Bs=w(String.fromCodePoint),Ks=Bs?String.fromCodePoint:String.fromCharCode,Ls=/</g,Ds=/>/g,Fs=/&/g,zs=65533,Us="Expected a JavaScript expression",$s="Expected closing paren",qs=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,Hs=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,Zs=/^\\(?:[`'"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,Ws=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/,Gs=pt('"'),Qs=pt("'"),Ys=/^[^`"\\\$]+?(?:(?=[`"\\\$]))/,Js=/[\r\n\t\b\f]/g,Xs=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,to=/^\s*\.{3}/,eo=/^(?:[a-zA-Z$_0-9]|\\\.)+(?:(?:\.(?:[a-zA-Z$_0-9]|\\\.)+)|(?:\[[0-9]+\]))*/,no=/^[a-zA-Z_$][-\/a-zA-Z_$0-9]*(?:\.(?:[a-zA-Z_$][-\/a-zA-Z_$0-9]*))*/,io=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,ro=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null|Object|Number|String|Boolean)\b/,so=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/,oo=/^(?:\@\.|\@|~\/|(?:\^\^\/(?:\^\^\/)*(?:\.\.\/)*)|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/,ao=/^(key|index|keypath|rootpath|this|global|shared|context|event|node|local|style|helpers|last|macro)/;!function(){for(var t="! ~ + - typeof".split(" "),e=_t,n=0,i=t.length;n<i;n+=1)e=function(n,i){return function(t){var e;return(e=i(t))?e:t.matchString(n)?(t.sp(),(e=Et(t))||t.error(Us),{s:n,o:e,t:vs}):null}}(t[n],e);qr=e}();var ho,uo=qr;!function(){for(var t="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),e=uo,n=0,i=t.length;n<i;n+=1)e=function(r,s){return function(t){if(t.inUnquotedAttribute&&(">"===r||"/"===r))return s(t);var e,n,i=s(t);if(!i)return null;for(;;){if(e=t.pos,t.sp(),!t.matchString(r))return t.pos=e,i;if("in"===r&&/[a-zA-Z_$0-9]/.test(t.remaining().charAt(0)))return t.pos=e,i;if(t.sp(),!(n=s(t)))return t.pos=e,i;i={t:ws,s:r,o:[i,n]}}}}(t[n],e);ho=e}();function lo(t,e){this.callback=t,this.parent=e,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.outrosComplete=!1,this.id=la++,e&&e.addChild(this)}var co=ho,fo=/^[^\s"'>\/=(]+/,po=/^on/,mo=/^on-([a-zA-Z\*\.$_]((?:[a-zA-Z\*\.$_0-9\-]|\\-)+))$/,go=/^(?:change|reset|teardown|update|construct|config|init|render|complete|unrender|detach|insert|destruct|attachchild|detachchild)$/,vo=/^as-([a-z-A-Z][-a-zA-Z_0-9]*)$/,yo=/^([a-zA-Z](?:(?!-in-out)[-a-zA-Z_0-9])*)-(in|out|in-out)$/,bo=/^((bind|class)-(([-a-zA-Z0-9_])+))$/,wo={lazy:{t:As,v:"l"},twoway:{t:As,v:"t"},"no-delegation":{t:74}},xo=/^[^\s"'=<>\/`]+/,ko=/^[^\s"'=<>@\[\]()]*/,_o=/^\s+/,Eo=/\\/g,So={t:ts,exclude:!0},Ao=/^(?:[a-zA-Z$_0-9]|\\\.)+(?:(?:(?:[a-zA-Z$_0-9]|\\\.)+)|(?:\[[0-9]+\]))*/,Co=/^as/i,Oo={else:/^\s*else\s*/,elseif:/^\s*elseif\s+/,then:/^\s*then\s*/,catch:/^\s*catch\s*/},No={else:60,elseif:61,then:62,catch:63},jo={each:52,if:50,with:54,unless:51},To=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,Vo=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,Po=new RegExp("^("+Ji(jo).join("|")+")\\b"),Mo=/^[ \t\f\r\n]*\r?\n/,Io=/\r?\n[ \t\f\r\n]*$/,Ro=/[ \t\f\r\n]+/g,Bo=/^[ \t\f\r\n]+/,Ko=/[ \t\f\r\n]+$/,Lo=/^(?:\r\n|\r|\n)/,Do=/(?:\r\n|\r|\n)$/,Fo=/(\n)?[ \t]*$/,zo=/[ \t]*\n/,Uo=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/,$o=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,qo=/^[a-zA-Z_$][-a-zA-Z0-9_$]*/,Ho=/^[\s\n\/>]/,Zo=/;\s*$/,Wo={exclude:!0},Go={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]},Qo=/^\s*(elseif|else|then|catch)\s*/,Yo=/^\s*#\s*partial\s+/,Jo={},Xo=[function(t,e){var n,i=t.matchString(">")||t.matchString("yield"),r={t:">"===i?Jr:ss};if(!i)return null;if(t.sp(),">"===i||!(n=t.matchString("with"))){t.relaxedNames=t.strictRefinement=!0;var s=Et(t);if(t.relaxedNames=t.strictRefinement=!1,!s&&">"===i)return null;s&&(Nt(s,r),t.sp(),">"!==i&&(n=t.matchString("with")))}return t.sp(),!n&&">"!==i||((n=Bt(t))&&n.length?r.z=n:((s=Et(t))&&(r.c={},Nt(s,r.c)),!t.matchString(",")||(n=Bt(t))&&n.length&&(r.z=n)),">"===i||r.c||r.z||t.error("Expected a context or one or more aliases")),t.sp(),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),r},function(t,e){if(!t.matchString("&"))return null;t.sp();var n=Et(t);return n?(t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),Nt(n,e={t:Zr}),e):null},function(t,e){var n,i,r,s,o,a,h,u,l,c,d,f,p,m,g,v,y=!1,b=t.pos;if(t.matchString("^")){if(t.matchString("^/"))return t.pos=b,null;n={t:Wr,f:[],n:51}}else{if(!t.matchString("#"))return null;n={t:Wr,f:[]},t.matchString("partial")&&(t.pos=b-t.standardDelimiters[0].length,t.error("Partial definitions can only be at the top level of the template, or immediately inside components")),(o=t.matchString("await"))?(l=o,n.t=55):(o=t.matchPattern(Po))&&(l=o,n.n=jo[o])}t.sp(),"with"===o?(p=Bt(t))&&(y=!0,n.z=p,n.t=19):"each"!==o||(p=Kt(t))&&(n.z=[{n:p.n,x:{r:"."}}],v=p.x),y||((v=v||Et(t))||t.error("Expected expression"),"each"===o&&t.matchString(",")&&(m=Bt(t))&&(n.z&&m.unshift(n.z[0]),n.z=m),"each"!==o&&o||!(u=t.matchPattern(To))?"await"===o&&t.matchString("then")&&(t.sp(),c=!0,f=(f=t.matchPattern(Xs))||!0):(m=t.matchPattern(Vo))?n.i=u+","+m:n.i=u,!o&&v.n&&(l=v.n)),t.sp(),t.matchString("-")&&(n.w=1),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),t.sectionDepth+=1,r=n.f;do{if(g=t.pos,i=Lt(t,e))l&&i.r!==l&&(o?(t.pos=g,t.error("Expected "+e.open+"/"+l+e.close)):i.r&&t.warn("Expected "+e.open+"/"+l+e.close+" but found "+e.open+"/"+i.r+e.close)),--t.sectionDepth,h=!0;else if(!y&&((i=Dt(t,e,"elseif"))||(i=Dt(t,e,"else"))||"await"===o&&((i=Dt(t,e,"then"))||(i=Dt(t,e,"catch"))))){51===n.n&&t.error("{{else}} not allowed in {{#unless}}"),s&&(60===i.t?t.error("there can only be one {{else}} block, at the end of a section"):61===i.t&&t.error("illegal {{elseif...}} after {{else}}")),a||!f&&c||d||("await"===o?(n.f=[w={f:r}],f?(w.t=62,!0!==f&&(w.n=f)):w.t=Wr):a=[]);var w={t:Wr,f:r=[]};60===i.t?("await"===o?(n.f.push(w),w.t=60):(w.n=51,a.push(w)),s=!0):61===i.t?(w.n=50,Nt(i.x,w),a.push(w)):62===i.t?(s&&t.error("{{then}} block must appear before any {{else}} block"),d&&t.error("{{then}} block must appear before any {{catch}} block"),c&&t.error("there can only be one {{then}} block per {{#await}}"),w.t=62,c=!0,i.n&&(w.n=i.n),n.f.push(w)):63===i.t&&(s&&t.error("{{catch}} block must appear before any {{else}} block"),d&&t.error("there can only be one {{catch}} block per {{#await}}"),w.t=63,d=!0,w.n=i.n,n.f.push(w))}else{if(!(i=t.read(ea)))break;r.push(i)}}while(!h);return a&&(n.l=a),y||Nt(v,n),"await"!==o||!f&&c||d||s||(v={f:n.f},n.f=[v],f?(v.t=62,!0!==f&&(v.n=f)):v.t=Wr),n.f.length||delete n.f,n},function(t,e){var n,i,r=t.pos;try{n=At(t,[e.close])}catch(t){i=t}if(!n){if("!"===t.str.charAt(r))return t.pos=r,null;if(i)throw i}if(!t.matchString(e.close)&&(t.error("Expected closing delimiter '"+e.close+"' after reference"),!n)){if("!"===t.nextChar())return null;t.error("Expected expression or legal reference")}return Nt(n,t={t:Hr}),t},function(t,e){if(!t.matchString("!"))return null;var n=t.remaining().indexOf(e.close);return-1!==n?(t.pos+=n+e.close.length,{t:Xr}):void 0}],ta=[function(t,e){var n=Et(t);return n?(t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),Nt(n,e={t:Zr}),e):null}],ea=[Rt,function(t){var e=t.pos;if(t.textOnlyMode||!t.matchString("\x3c!--"))return null;var n=t.remaining(),i=n.indexOf("--\x3e");return-1===i&&t.error("Illegal HTML - expected closing comment sequence ('--\x3e')"),n=n.substr(0,i),t.pos+=i+3,n={t:Xr,c:n},t.includeLinePositions&&(n.q=t.getLinePos(e)),n},function(t){var e,n,i,r,s,o,a,h=t.pos;if(t.inside||t.inAttribute||t.textOnlyMode)return null;if(!t.matchString("<"))return null;if("/"===t.nextChar())return null;var u={};if(t.includeLinePositions&&(u.q=t.getLinePos(h)),t.matchString("!"))return u.t=18,t.matchPattern(/^doctype/i)||t.error("Expected DOCTYPE declaration"),u.a=t.matchPattern(/^(.+?)>/),u;if(a=t.matchString("#"))t.sp(),u.t=es,u.n=t.matchPattern(qo);else if(u.t=Yr,u.e=t.matchPattern($o),!u.e)return null;for(Ho.test(t.nextChar())||t.error("Illegal tag name"),t.sp(),t.inTag=!0;e=Rt(t);)!1!==e&&(u.m||(u.m=[]),u.m.push(e)),t.sp();if(t.inTag=!1,t.sp(),t.matchString("/")&&(n=!0),!t.matchString(">"))return null;var l,c,d,f,p,m,g,v=(u.e||u.n).toLowerCase(),y=t.preserveWhitespace;if(!n&&(a||!Ps[u.e.toLowerCase()])){a||(t.elementStack.push(v),v in t.interpolate&&(t.inside=v)),i=[],r=Gi(null);do{if(o=t.pos,!(g=t.remaining())){if("script"===t.inside){l=!0;break}t.error("Missing end "+(1<t.elementStack.length?"tags":"tag")+" ("+t.elementStack.reverse().map(function(t){return"</"+t+">"}).join("")+")")}a||function(t,e){e=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(e),t=Go[t];return!e||!t||!~t.indexOf(e[1].toLowerCase())}(v,g)?!a&&(g=m=void 0,g=(p=t).pos,p=p.matchString("</")?(m=p.matchPattern(Uo))?p.inside&&m!==p.inside?(p.pos=g,null):{t:is,e:m}:(p.pos-=2,void p.error("Illegal closing tag")):null)?(l=!0,(c=p.e.toLowerCase())===v||(t.pos=o,~t.elementStack.indexOf(c))||(d="Unexpected closing tag",Ps[c.toLowerCase()]&&(d+=" (<"+c+"> is a void element - it cannot contain children)"),t.error(d))):a&&(c=t,d=u.n,f=void 0,f=c.pos,c.matchString("</")?(c.matchString("#"),c.sp(),c.matchString(d)?(c.sp(),!!c.matchString(">")||(c.pos=f,null)):(c.pos=f,null)):null)?l=!0:Lt(t,f={open:t.standardDelimiters[0],close:t.standardDelimiters[1]})||function(t,e){var n=t.pos;if(t.matchString(e.open))return!!t.matchPattern(Qo)||void(t.pos=n)}(t,f)?(l=!0,t.pos=o):(f=t.read(na))?(r[f.n]&&(t.pos=o,t.error("Duplicate partial definition")),$t(f.f,t.stripComments,y,!y,!y,t.whiteSpaceElements),r[f.n]=f.f,s=!0):(f=t.read(ea))?i.push(f):l=!0:l=!0}while(!l);i.length&&(u.f=i),s&&(u.p=r),t.elementStack.pop()}if(t.inside=null,t.sanitizeElements&&-1!==t.sanitizeElements.indexOf(v))return Wo;if(u.m&&"input"!==v&&"select"!==v&&"textarea"!==v&&"option"!==v){for(var b,w,x,k,_,E=u.m,S=0;S<E.length;)(_=E[S]).t===ns?0!==_.n.indexOf("class-")||_.f?0===_.n.indexOf("style-")&&A(_.f)?((w=w||[]).push(qt(_.n.slice(6))+": "+_.f+";"),E.splice(S,1)):"class"===_.n&&A(_.f)?((b=b||[]).push(_.f),E.splice(S,1)):"style"===_.n&&A(_.f)?((w=w||[]).push(_.f+(Zo.test(_.f)?"":";")),E.splice(S,1)):("class"===_.n?x=_:"style"===_.n?k=_:!~_.n.indexOf(":")&&"value"!==_.n&&"contenteditable"!==_.n&&A(_.f)&&(_.g=1),S++):((b=b||[]).push(_.n.slice(6)),E.splice(S,1)):S++;b?x&&A(x.f)?x.f+=" "+b.join(" "):E.unshift({t:ns,n:"class",f:b.join(" "),g:1}):x&&A(x.f)&&(x.g=1),w?k&&A(k.f)?k.f+="; "+w.join(" "):E.unshift({t:ns,n:"style",f:w.join(" "),g:1}):k&&A(k.f)&&(k.g=1)}return u},function(t){var e,n=t.remaining(),i=t.textOnlyMode?lt(n,i=(i=t.tags.map(function(t){return t.open})).concat(t.tags.map(function(t){return"\\"+t.open}))):(e=t.inside?"</"+t.inside:"<",t.inside&&!t.interpolate[t.inside]?n.indexOf(e):(i=(i=t.tags.map(function(t){return t.open})).concat(t.tags.map(function(t){return"\\"+t.open})),!0===t.inAttribute?i.push('"',"'","=","<",">","`"):t.inAttribute?i.push(t.inAttribute):i.push(e),lt(n,i)));return i?(-1===i&&(i=n.length),t.pos+=i,t.inside&&"textarea"!==t.inside||t.textOnlyMode?n.substr(0,i):ct(n.substr(0,i))):null}],na=[function(t){var e,n,i=t.pos,r=t.standardDelimiters;if(!t.matchString(r[0]))return null;if(!t.matchPattern(Yo))return t.pos=i,null;(i=t.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-\/]*/))||t.error("expected legal partial name"),t.sp(),t.matchString(r[1])||t.error("Expected closing delimiter '"+r[1]+"'");for(var s=[],o=r[0],a=r[1];(e=Lt(t,{open:o,close:a}))?("partial"!==e.r&&t.error("Expected "+o+"/partial"+a),n=!0):((e=t.read(ea))||t.error("Expected "+o+"/partial"+a),s.push(e)),!n;);return{t:17,n:i,f:s}}],ia={pre:1,script:1,style:1,textarea:1},ra={textarea:!0,script:!0,style:!0,template:!0},sa=$r.extend({init:function(t,e){var n=e.tripleDelimiters||Jo.defaults.tripleDelimiters,i=e.staticDelimiters||Jo.defaults.staticDelimiters,r=e.staticTripleDelimiters||Jo.defaults.staticTripleDelimiters;this.standardDelimiters=e.delimiters||Jo.defaults.delimiters,this.tags=[{isStatic:!1,isTriple:!1,open:this.standardDelimiters[0],close:this.standardDelimiters[1],readers:Xo},{isStatic:!1,isTriple:!0,open:n[0],close:n[1],readers:ta},{isStatic:!0,isTriple:!1,open:i[0],close:i[1],readers:Xo},{isStatic:!0,isTriple:!0,open:r[0],close:r[1],readers:ta}],this.contextLines=e.contextLines||Jo.defaults.contextLines,this.sortMustacheTags(),this.sectionDepth=0,this.elementStack=[],this.interpolate=Wi({},ra,Jo.defaults.interpolate,e.interpolate),!0===e.sanitize&&(e.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),this.stripComments=!1!==e.stripComments,this.preserveWhitespace=!y(e.preserveWhitespace)&&e.preserveWhitespace,this.sanitizeElements=e.sanitize&&e.sanitize.elements,this.sanitizeEventAttributes=e.sanitize&&e.sanitize.eventAttributes,this.includeLinePositions=e.includeLinePositions,this.textOnlyMode=e.textOnlyMode,this.csp=e.csp,this.allowExpressions=e.allowExpressions,this.preserveStandaloneSections=this.preserveWhitespace&&e.preserveStandaloneSections,e.expression&&(this.converters=[Et]),e.attributes&&(this.inTag=!0),this.whiteSpaceElements=Wi({},e.preserveWhitespace,ia)},postProcess:function(t,e){var n=t[0];if(e.expression){e=Ct(n);return e.e=st(e.s,e.r.length),e}return t.length?(0<this.sectionDepth&&this.error("A section was left open"),$t(n.t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace,this.whiteSpaceElements,this.preserveStandaloneSections),!1!==this.csp&&(Ht(n.t,t={}),Ht(n.p||{},t),Ji(t).length&&(n.e=t)),n):{t:[],v:zr}},converters:[function(t){for(var e=[],n=Gi(null),i=!1,r=t.preserveWhitespace;t.pos<t.str.length;){var s,o=t.pos;(s=t.read(na))?(n[s.n]&&(t.pos=o,t.error("Duplicated partial definition")),$t(s.f,t.stripComments,r,!r,!r,t.whiteSpaceElements),n[s.n]=s.f,i=!0):(s=t.read(ea))?e.push(s):t.error("Unexpected template content")}var a={v:zr,t:e};return i&&(a.p=n),a}],sortMustacheTags:function(){this.tags.sort(function(t,e){return e.open.length-t.open.length})}}),oa=["delimiters","tripleDelimiters","staticDelimiters","staticTripleDelimiters","csp","interpolate","preserveWhitespace","preserveStandaloneSections","sanitize","stripComments","contextLines","allowExpressions","attributes"],aa="Either preparse or use a ractive runtime source that includes the parser. ",ha="Either include a version of Ractive that can parse or convert your computation strings to functions.",ua={fromId:function(t,e){if(!lr){if(e&&e.noThrow)return;throw new Error("Cannot retrieve template #"+t+" as Ractive is not running in a browser.")}var n;if(t=t&&t.replace(/^#/,""),!(n=lr.getElementById(t))){if(e&&e.noThrow)return;throw new Error("Could not find template element with id #"+t)}if("SCRIPT"===n.tagName.toUpperCase())return"textContent"in n?n.textContent:n.innerHTML;if(!e||!e.noThrow)throw new Error("Template element with id #"+t+", must be a <script> element")},isParsed:function(t){return!A(t)},getParseOptions:function(n){return n.defaults&&(n=n.defaults),oa.reduce(function(t,e){return t[e]=n[e],t},{})},parse:function(t,e){Wt(Zt,"template",aa);e=Zt(t,e);return at(e),e},parseFor:function(t,e){return this.parse(t,this.getParseOptions(e))}},la=0,ca=lo.prototype;ca.add=function(t){var e=t.isIntro?this.intros:this.outros;t.starting=!0,e.push(t)},ca.addChild=function(t){this.children.push(t),this.totalChildren+=1,this.outroChildren+=1},ca.checkStart=function(){this.parent&&this.parent.started&&this.start()},ca.decrementOutros=function(){--this.outroChildren,Yt(this)},ca.decrementTotal=function(){--this.totalChildren,Yt(this)},ca.detachNodes=function(){for(var t=this.detachQueue.length,e=0;e<t;e++)this.detachQueue[e].detach();for(var t=this.children.length,n=0;n<t;n++)this.children[n].detachNodes();this.detachQueue=[]},ca.ready=function(){this.detachQueue.length&&Jt(this)},ca.remove=function(t){j(t.isIntro?this.intros:this.outros,t),Yt(this)},ca.start=function(){this.started=!0,this.children.forEach(function(t){return t.start()}),this.intros.concat(this.outros).forEach(function(t){return t.start()}),Yt(this)};function da(t){this.duration=t.duration,this.step=t.step,this.complete=t.complete,this.easing=t.easing,this.start=performance.now(),this.end=this.start+this.duration,this.running=!0,ma.push(this),ga||requestAnimationFrame(te)}var fa,pa={active:function(){return!!fa},start:function(){var e,t=new Promise(function(t){return e=t});return fa={previousBatch:fa,transitionManager:new lo(e,fa&&fa.transitionManager),fragments:[],tasks:[],immediateObservers:[],deferredObservers:[],promise:t},t},end:function(){(function t(){var e=fa.immediateObservers;fa.immediateObservers=[],e.forEach(Xt);var n=fa.fragments.length,e=fa.fragments;for(fa.fragments=[];n--;)e[n].update();fa.transitionManager.ready(),e=fa.deferredObservers,fa.deferredObservers=[],e.forEach(Xt);var i=fa.tasks;for(fa.tasks=[],n=0;n<i.length;n+=1)i[n]();return fa.fragments.length||fa.immediateObservers.length||fa.deferredObservers.length||fa.tasks.length?t():void 0})(),fa.previousBatch?fa.transitionManager.checkStart():fa.transitionManager.start(),fa=fa.previousBatch},addFragment:function(t){C(fa.fragments,t)},addFragmentToRoot:function(t){if(fa){for(var e=fa;e.previousBatch;)e=e.previousBatch;C(e.fragments,t)}},addObserver:function(t,e){fa?C(e?fa.deferredObservers:fa.immediateObservers,t):t.dispatch()},registerTransition:function(t){t._manager=fa.transitionManager,fa.transitionManager.add(t)},detachWhenReady:function(t){fa.transitionManager.detachQueue.push(t)},scheduleTask:function(t,e){var n;if(fa){for(n=fa;e&&n.previousBatch;)n=n.previousBatch;n.tasks.push(t)}else t()},promise:function(){if(!fa)return Promise.resolve();for(var t=fa;t.previousBatch;)t=t.previousBatch;return t.promise||Promise.resolve()}},ma=[],ga=!1,va=da.prototype;va.tick=function(t){if(!this.running)return!1;if(t>this.end)return this.step&&this.step(1),this.complete&&this.complete(1),!1;t-=this.start,t=this.easing(t/this.duration);return this.step&&this.step(t),!0},va.stop=function(){this.abort&&this.abort(),this.running=!1};var ya={},ba={},wa=function(n){function a(t,e){n.call(this,t),this.ticker=null,t&&(this.key=g(e),this.isReadonly=t.isReadonly,t.value&&(this.value=t.value[this.key],tr(this.value)&&(this.length=this.value.length),this.adapt()))}n&&(a.__proto__=n);var t=a.prototype=Object.create(n&&n.prototype);return t.constructor=a,t.adapt=function(){var t=this,e=this.root.adaptors,n=e.length;if(this.rewrap=!1,0!==n){var i,r,s=this.wrapper?"newWrapperValue"in this?this.newWrapperValue:this.wrapperValue:this.value,o=this.root.ractive,a=this.getKeypath();if(this.wrapper){if(!(this.wrapperValue!==s&&(!this.wrapper.reset||!1===this.wrapper.reset(s))))return delete this.newWrapperValue,void(this.value=this.wrapper.get());this.wrapper.teardown(),delete this.wrapper,delete this.wrapperValue,delete this.newWrapperValue,void 0!==this.value&&((i=this.parent.value||this.parent.createBranch(this.key))[this.key]!==s&&(i[this.key]=s),this.value=s)}for(r=0;r<n;r+=1){var h=e[r];if(h.filter(s,a,o)){t.wrapper=h.wrap(o,s,a,ee(a)),t.wrapperValue=s,(t.wrapper.__model=t).value=t.wrapper.get();break}}}},t.animate=function(t,e,n,i){var r=this;this.ticker&&this.ticker.stop();var s,o=new Promise(function(t){return s=t});return this.ticker=new da({duration:n.duration,easing:n.easing,step:function(t){var e=i(t);r.applyValue(e),n.step&&n.step(t,e)},complete:function(){r.applyValue(e),n.complete&&n.complete(e),r.ticker=null,s(e)}}),o.stop=this.ticker.stop,o},t.applyValue=function(t,e){if(void 0===e&&(e=!0),!h(t,this.value)){if(this.boundValue&&(this.boundValue=null),this.parent.wrapper&&this.parent.wrapper.set)this.parent.wrapper.set(this.key,t),this.parent.value=this.parent.wrapper.get(),this.value=this.parent.value[this.key],this.wrapper&&(this.newWrapperValue=this.value),this.adapt();else if(this.wrapper)this.newWrapperValue=t,this.adapt();else{var n=this.parent.value||this.parent.createBranch(this.key);if(!u(n))return void k("Attempted to set a property of a non-object '"+this.getKeypath()+"'");n[this.key]=t,this.value=t,this.adapt()}(this.dataModel||t&&t.viewmodel&&t.viewmodel.isRoot)&&D(this,t),tr(t)?(this.length=t.length,this.isArray=!0):this.isArray=!1,this.links.forEach(H),this.children.forEach(Z),this.deps.forEach(H),e&&this.notifyUpstream(),this.parent.isArray&&("length"===this.key?this.parent.length=t:this.parent.joinKey("length").mark())}},t.compute=function(t,e){var n=this.computed||(this.computed={});return n[t]?(n[t].signature=Qt(this.root.ractive,t,e),n[t].mark()):n[t]=new ba.Computation(this,Qt(this.root.ractive,t,e),t),n[t]},t.createBranch=function(t){t=o(t)?[]:{};return this.applyValue(t,!1),t},t.get=function(t,e){return this._link?this._link.get(t,e):(t&&U(this),e&&e.virtual?this.getVirtual(!1):R(this,(e&&"unwrap"in e?!1!==e.unwrap:t)&&this.wrapper?this.wrapperValue:this.value,!e||!1!==e.shouldBind))},t.joinKey=function(t,e){var n,i,r;if(this._link)return e&&!1!==e.lastLink&&(x(t)||""===t)?this:this._link.joinKey(t);if(x(t)||""===t)return this;if(!(n=v(this.childByKey,t)?this.childByKey[t]:this.computed&&this.computed[t]))if(this.isRoot&&this.ractive&&(i=this.ractive.computed[t]))n=this.compute(t,i);else if(!this.isRoot&&this.root.ractive){var s,o=this.root.ractive.computed;for(s in o)i=o[s],i.pattern&&i.pattern.test(this.getKeypath()+"."+t)&&(n=this.compute(t,i))}return n||(n=new a(this,t),this.children.push(n),this.childByKey[t]=n,"data"!==t)||(r=this.retrieve())&&r.viewmodel&&r.viewmodel.isRoot&&(n.link(r.viewmodel,"data"),this.dataModel=r),!n._link||e&&!1===e.lastLink?n:n._link},t.mark=function(t){if(this._link)return this._link.mark(t);var e=this.value,n=this.retrieve();(this.dataModel||n&&n.viewmodel&&n.viewmodel.isRoot)&&D(this,n),!t&&h(n,e)||(this.value=n,this.boundValue&&(this.boundValue=null),e===n&&!this.rewrap||(this.wrapper&&(this.newWrapperValue=n),this.adapt()),tr(n)?(this.length=n.length,this.isArray=!0):this.isArray=!1,this.children.forEach(t?W:Z),this.links.forEach(G),this.deps.forEach(H))},t.merge=function(t,e){e=M(this.value===t?function(t){for(var e=[],n=0;n<t.length;n++)e[n]=(t.childByKey[n]||{}).value;return e}(this):this.value,t,e);this.parent.value[this.key]=t,this.shuffle(e,!0)},t.retrieve=function(){return this.parent.value?this.parent.value[this.key]:void 0},t.set=function(t){this.ticker&&this.ticker.stop(),this.applyValue(t)},t.shuffle=function(t,e){L(this,t,!1,e)},t.source=function(){return this},t.teardown=function(){var e=this;this._link&&(this._link.teardown(),this._link=null),this.children.forEach(J),this.wrapper&&this.wrapper.teardown(),this.computed&&Ji(this.computed).forEach(function(t){return e.computed[t].teardown()})},a}(Mr),xa={},ka=function(i){function t(t,e,n){i.call(this,null,"@"+e),this.key="@"+e,this.value=t,this.isRoot=!0,(this.root=this).adaptors=[],this.ractive=n}i&&(t.__proto__=i);var e=t.prototype=Object.create(i&&i.prototype);return e.constructor=t,e.getKeypath=function(){return this.key},e.retrieve=function(){return this.value},t}(wa),_a=new ka(xa,"shared"),Ea=new ka(dr,"global"),Sa={},Aa=function(t){this.ractive=t};Aa.prototype.findContext=function(){return this.ractive.viewmodel};var Ca=Aa.prototype;Ca.getContext=ae,Ca.find=Ca.findComponent=Ca.findAll=Ca.findAllComponents=a;function Oa(t){this.event=t,this.method="on"+t}var Na=!1,ja=/\*/,Ta={virtual:!1},Va={},Pa="Cannot add to a non-numeric value",Ma=xr.linear,Ia={},Ra={};Oa.prototype.fire=function(t,e){var n=oe(t),i=this.method;t[i]&&(e?t[i](n,e):t[i](n)),ye(t,this.event,n,e?[e,t]:[t])};var Ba=function(t){this.hook=new Oa(t),this.inProcess={},this.queue={}},Ka=Ba.prototype;Ka.begin=function(t){this.inProcess[t._guid]=!0},Ka.end=function(t){var e=t.parent;e&&this.inProcess[e._guid]?we(this.queue,e).push(t):function t(e,n){var i=we(e.queue,n);for(e.hook.fire(n);i.length;)t(e,i.shift());delete e.queue[n._guid]}(this,t),delete this.inProcess[t._guid]};var La={};["construct","config","attachchild","detach","detachchild","insert","complete","reset","render","unrendering","unrender","teardown","destruct","update"].forEach(function(t){La[t]=new Oa(t)}),La.init=new Ba("init");function Da(t,e){this.fragment=t,this.element=e||Ae(t),this.node=this.element&&this.element.node,this.ractive=t.ractive,this.root=this}var Fa=Array.prototype,za=Oe("push").model,Ua=Oe("pop").model,$a=Oe("shift").model,qa=Oe("unshift").model,Ha=Oe("sort").model,Za=Oe("splice").model,Wa=Oe("reverse").model,Ga={},Qa=function(e){function t(t){e.call(this,null,null),this.isRoot=!0,(this.root=this).value={},this.ractive=t.ractive,this.adaptors=[],this.context=t.context}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.getKeypath=function(){return"@context.data"},n.rebound=function(){},t}(wa),Ya=Da.prototype,Ja={decorators:{},_data:{}};Ja.decorators.get=function(){var e={};return this.element&&this.element.decorators.forEach(function(t){return e[t.name]=t.handle}),e},Ja._data.get=function(){return this.model||(this.root.model=new Qa({ractive:this.ractive,context:this.root}))},Ya.add=function(t,e,n){var i=l(e)?+e:1,n=y(e)?e:n;return ue(je(this,t,i).map(function(t){var e=t[0],n=t[1],t=e.get();if(!o(n)||!o(t))throw new Error("Cannot add non-numeric value");return[e,t+n]}),n)},Ya.animate=function(t,e,n){t=Te(this,t).model;return pe(this.ractive,t,e,n)},Ya.find=function(t,e){return this.fragment.find(t,e)},Ya.findAll=function(t,e){var n=[];return(e=e||{}).result=n,this.fragment.findAll(t,e),n},Ya.findAllComponents=function(t,e){var n=[];return(e=e||{}).result=n,this.fragment.findAllComponents(t,e),n},Ya.findComponent=function(t,e){return this.fragment.findComponent(t,e)},Ya.get=function(t){if(!t)return this.fragment.findContext().get(!0);t=Te(this,t).model;return t?t.get(!0):void 0},Ya.getParent=function(t){var e=this.fragment;return(e=!e.parent&&t?e.componentParent:e.context?he(e.parent):(e=he(e.parent))&&(!e.parent&&t?e.componentParent:he(e.parent)))&&e!==this.fragment?e.getContext():void 0},Ya.hasListener=function(t,e){var n,i=!this.fragment.owner.component&&this.element||this.fragment.owner;do{if((n=i.component||i).template.t===Yr&&Ve(n,t))return!0}while((i=(i=i.up&&i.up.owner)&&i.component?i.component:i)&&e)},Ya.link=function(t,e){var n=Te(this,t).model,i=Te(this,e).model,e=pa.start();return i.link(n,t),pa.end(),e},Ya.listen=function(t,e){var n=this.element;return n.on(t,e),{cancel:function(){n.off(t,e)}}},Ya.observe=function(t,e,n){return void 0===n&&(n={}),(n=b(t)?e||{}:n).fragment=this.fragment,this.ractive.observe(t,e,n)},Ya.observeOnce=function(t,e,n){return void 0===n&&(n={}),(n=b(t)?e||{}:n).fragment=this.fragment,this.ractive.observeOnce(t,e,n)},Ya.pop=function(t){return Ua(Te(this,t).model,[])},Ya.push=function(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];return za(Te(this,t).model,e)},Ya.raise=function(t,e){for(var n=[],i=arguments.length-2;0<i--;)n[i]=arguments[i+2];for(var r,s=this.element;s;){if(r=Ve(s=s.component?s.component:s,t))return r.fire(r.element.getContext(e||{},!e||"original"in e?{}:{original:{}}),n);s=s.up&&s.up.owner}},Ya.readLink=function(t,e){return this.ractive.readLink(this.resolve(t),e)},Ya.resolve=function(t,e){var n=Te(this,t),i=n.model,n=n.instance;return i?i.getKeypath(e||n):t},Ya.reverse=function(t){return Wa(Te(this,t).model,[])},Ya.set=function(t,e,n){return ue(je(this,t,e),n)},Ya.shift=function(t){return $a(Te(this,t).model,[])},Ya.splice=function(t,e,n){for(var i=[],r=arguments.length-3;0<r--;)i[r]=arguments[r+3];return i.unshift(e,n),Za(Te(this,t).model,i)},Ya.sort=function(t){return Ha(Te(this,t).model,[])},Ya.subtract=function(t,e,n){var i=l(e)?e:1,n=y(e)?e:n;return ue(je(this,t,i).map(function(t){var e=t[0],n=t[1],t=e.get();if(!o(n)||!o(t))throw new Error("Cannot add non-numeric value");return[e,t-n]}),n)},Ya.toggle=function(t,e){t=Te(this,t).model;return ue([[t,!t.get()]],e)},Ya.unlink=function(t){var e=Te(this,t).model,t=pa.start();return e.owner&&e.owner._link&&e.owner.unlink(),pa.end(),t},Ya.unlisten=function(t,e){this.element.off(t,e)},Ya.unshift=function(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];return qa(Te(this,t).model,e)},Ya.update=function(t,e){return Ne(this.ractive,Te(this,t).model,e)},Ya.updateModel=function(t,e){var n=Te(this,t).model,t=pa.start();return n.updateFromBindings(e),pa.end(),t},Ya.isBound=function(){return!!this.getBindingModel(this).model},Ya.getBindingPath=function(t){var e=this.getBindingModel(this),n=e.model,e=e.instance;return n?n.getKeypath(t||e):void 0},Ya.getBinding=function(){var t=this.getBindingModel(this).model;return t?t.get(!0):void 0},Ya.getBindingModel=function(t){t=t.element;return{model:t.binding&&t.binding.model,instance:t.up.ractive}},Ya.setBinding=function(t){return ue([[this.getBindingModel(this).model,t]])},Object.defineProperties(Ya,Ja),Da.forRactive=oe,Sa.Context=Da;var Xa,th,eh,nh,ih,rh,sh,oh,ah=lr&&lr.querySelector,hh="http://www.w3.org/1999/xhtml",uh="http://www.w3.org/2000/svg",lh={html:hh,mathml:"http://www.w3.org/1998/Math/MathML",svg:uh,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns"},ch=cr&&"registerElement"in lr,dh=pr?function(t,e,n){return e&&e!==hh?n?lr.createElementNS(e,t,Me(n)):lr.createElementNS(e,t):n?lr.createElement(t,Me(n)):lr.createElement(t)}:function(t,e,n){if(e&&e!==hh)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://ractive.js.org/support/#svgs for more information";return n?lr.createElement(t,Me(n)):lr.createElement(t)};if(cr){for(th=dh("div"),oh=function(n){return function(t,e){return t[n](e)}},rh=(eh=["matches","matchesSelector"]).length;rh--&&!Xa;)if(th[nh=eh[rh]])Xa=oh(nh);else for(sh=mr.length;sh--;)if(ih=mr[rh]+nh.substr(0,1).toUpperCase()+nh.substring(1),th[ih]){Xa=oh(ih);break}Xa=Xa||function(t,e){var n=t.parentNode;n||(th.innerHTML="",n=th,t=t.cloneNode(),th.appendChild(t));for(var i=n.querySelectorAll(e),r=i.length;r--;)if(i[r]===t)return!0;return!1}}else Xa=null;var fh=function(t,e,n,i){this.context=i.context||t,this.callback=n,this.ractive=t,this.keypath=i.keypath,this.options=i,e&&this.resolved(e),w(i.old)&&(this.oldContext=Gi(t),this.oldFn=i.old),!1!==i.init?(this.dirty=!0,this.dispatch()):Fe(this),this.dirty=!1},ph=fh.prototype;ph.cancel=function(){this.cancelled=!0,this.model?this.model.unregister(this):this.resolver.unbind(),j(this.ractive._observers,this)},ph.dispatch=function(){if(!this.cancelled){try{this.callback.call(this.context,this.newValue,this.oldValue,this.keypath)}catch(t){k("Failed to execute observer callback for '"+this.keypath+"': "+(t.message||t))}Fe(this,!0),this.dirty=!1}},ph.handleChange=function(){var t,e=this;this.dirty?this.newValue=this.model.get():h(t=this.model.get(),this.oldValue)||(this.newValue=t,this.options.strict&&this.newValue===this.oldValue||(pa.addObserver(this,this.options.defer),this.dirty=!0,this.options.once&&pa.scheduleTask(function(){return e.cancel()})))},ph.rebind=function(t,e){var n=this;return(t=rt(this.keypath,t,e))!==this.model&&(this.model&&this.model.unregister(this),void(t&&t.addShuffleTask(function(){return n.resolved(t)})))},ph.resolved=function(t){this.model=t,this.oldValue=void 0,this.newValue=t.get(),t.register(this)};var mh=/\*+/g,gh=function(t,e,n,i,r){var s=this;this.context=r.context||t,this.ractive=t,this.baseModel=e,this.keys=n,this.callback=i;var o=n.join("\\.").replace(mh,"(.+)"),i=this.baseKeypath=e.getKeypath(t);this.pattern=new RegExp("^"+(i?i+"\\.":"")+o+"$"),this.recursive=1===n.length&&"**"===n[0],this.recursive&&(this.keys=["*"]),r.old&&(this.oldContext=Gi(t),this.oldFn=r.old),this.oldValues={},this.newValues={},this.defer=r.defer,this.once=r.once,this.strict=r.strict,this.dirty=!1,this.changed=[],this.cache=[],this.partial=!1,this.links=r.links,e.findMatches(this.keys).forEach(function(t){s.newValues[t.getKeypath(s.ractive)]=t.get()}),!1!==r.init?this.dispatch():Ue(this,this.newValues),e.registerPatternObserver(this)},vh=gh.prototype;vh.cancel=function(){this.baseModel.unregisterPatternObserver(this),j(this.ractive._observers,this)},vh.dispatch=function(){var i=this,r=this.newValues;this.newValues={},Ji(r).forEach(function(t){var e=r[t],n=i.oldValues[t];if(!(i.strict&&e===n||h(e,n))){n=[e,n,t];!t||(t=i.pattern.exec(t))&&(n=n.concat(t.slice(1)));try{i.callback.apply(i.context,n)}catch(t){k("Failed to execute pattern observer callback for '"+i.keypath+"': "+(t.message||t))}}}),Ue(this,r,this.partial),this.dirty=!1},vh.notify=function(t){var e=ze(t);~this.cache.indexOf(e)||(this.cache.push(e),this.changed.push(t))},vh.shuffle=function(t){if(tr(this.baseModel.value)){for(var e=this.baseModel.value.length,n=0;n<t.length;n++)-1!==t[n]&&t[n]!==n&&this.changed.push([n]);for(var i=t.touchedFrom;i<e;i++)this.changed.push([i])}},vh.handleChange=function(){var n=this;if(!this.dirty||this.changed.length){if(this.dirty||(this.newValues={}),this.changed.length){var t,i,r=0;if(this.recursive?(t=this.changed.slice(),this.changed.length=0,this.dirty=!0,t.forEach(function(t){t=n.baseModel.joinAll(t);t.isLink&&!n.links||(r++,n.newValues[t.getKeypath(n.ractive)]=t.get())}),this.dirty=!1):(i=this.baseModel.isRoot?this.changed.map(function(t){return t.map(p).join(".")}):this.changed.map(function(t){return n.baseKeypath+"."+t.map(p).join(".")}),this.baseModel.findMatches(this.keys).forEach(function(t){var e=t.getKeypath(n.ractive);i.filter(function(t){return 0===t.indexOf(e)&&(t.length===e.length||"."===t[e.length])||0===e.indexOf(t)&&(t.length===e.length||"."===e[t.length])}).length&&(r++,n.newValues[e]=t.get())})),!r)return;this.partial=!0}else this.baseModel.findMatches(this.keys).forEach(function(t){var e=t.getKeypath(n.ractive);n.newValues[e]=t.get()}),this.partial=!1;pa.addObserver(this,this.defer),this.dirty=!0,this.changed.length=0,this.cache=[],this.once&&this.cancel()}};var yh=function(t,e,n,i){this.ractive=t,this.model=e,this.keypath=e.getKeypath(),this.callback=n,this.options=i,this.pending=null,e.register(this),!1!==i.init?(this.sliced=[],this.shuffle([]),this.dispatch()):this.sliced=this.slice()},Zi=yh.prototype;Zi.cancel=function(){this.model.unregister(this),j(this.ractive._observers,this)},Zi.dispatch=function(){try{this.callback(this.pending)}catch(t){k("Failed to execute array observer callback for '"+this.keypath+"': "+(t.message||t))}this.pending=null,this.options.once&&this.cancel()},Zi.handleChange=function(t){this.pending?pa.addObserver(this,this.options.defer):t||(this.shuffle(this.sliced.map($e)),this.handleChange())},Zi.shuffle=function(t){var n,i=this,e=this.slice(),r=[],s=[],o={};t.forEach(function(t,e){o[t]=!0,t!==e&&x(n)&&(n=e),-1===t&&s.push(i.sliced[e])}),x(n)&&(n=t.length);for(var a=e.length,h=0;h<a;h+=1)o[h]||r.push(e[h]);this.pending={inserted:r,deleted:s,start:n},this.sliced=e};function bh(t){return t.trim()}function wh(t){return""!==t}function xh(t,e){this.name=t,this.useDefaults=e}var kh={init:!(Zi.slice=function(){var t=this.model.get();return tr(t)?t.slice():[]}),once:!0},Ir=Oe("pop").path,ca=Oe("push").path,_h="/* Ractive.js component styles */",Eh=[],Sh=!1,Ah=null,Ch=null,Oh=!1,Nh={extend:function(t,e,n){e.adapt=T(e.adapt,O(n.adapt))},init:function(){}},jh=/\/\*(?:[\s\S]*?)\*\//g,Th=/url\(\s*(['"])(?:\\[\s\S]|(?!\1).)*\1\s*\)|url\((?:\\[\s\S]|[^)])*\)|(['"])(?:\\[\s\S]|(?!\2).)*\2/gi,Vh=/\0(\d+)/g,Ph=/(?:^|\}|\{|\x01)\s*([^\{\}\0\x01]+)\s*(?=\{)/g,Mh=/@import\s*\([^)]*\)\s*;?/gi,Ih=/\x01/g,Rh=/@keyframes\s+[^\{\}]+\s*\{(?:[^{}]+|\{[^{}]+})*}/gi,Bh=/((?:(?:\[[^\]]+\])|(?:[^\s\+\>~:]))+)((?:::?[^\s\+\>\~\(:]+(?:\([^\)]+\))?)*\s*[\s\+\>\~]?)\s*/g,Kh=/^(?:@|\d+%)/,Lh=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g,Dh=function(e){function t(t){e.call(this,t.cssData,"@style"),this.component=t}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.downstreamChanged=function(e,n){var t;this.locked||((t=this.component).extensions.forEach(function(t){t=t._cssModel;t.mark(),t.downstreamChanged(e,n||1)}),n||nn(t,!0))},t}(ka),Fh=/\{/,zh={name:"css",extend:function(t,e,n,i){i._cssIds=function(t){for(var e=t,n=[];e;)e.prototype.cssId&&n.push(e.prototype.cssId),e=e.Parent;return n}(t),Qi(i,"cssData",{configurable:!0,value:Wi(Gi(t.cssData),n.cssData||{})}),Qi(i,"_cssModel",{configurable:!0,value:new Dh(i)}),n.css&&on(n,i,e)},init:function(t,e,n){n.css&&k("\nThe css option is currently not supported on a per-instance basis and will be discarded. Instead, we recommend instantiating from a component definition with a css option.\n\nconst Component = Ractive.extend({\n\t...\n\tcss: '/* your css */',\n\t...\n});\n\nconst componentInstance = new Component({ ... })\n\t\t")}},Uh={name:"data",extend:function(t,e,n){var i,r;if(n.data&&b(n.data))for(i in n.data)r=n.data[i],r&&y(r)&&(b(r)||tr(r))&&k("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");e.data=hn(e.data,n.data)},init:function(t,e,n){var i,r=hn(t.prototype.data,n.data);if((r=w(r)?r.call(e):r)&&r.constructor===Object)for(var s in r)w(r[s])&&(i=r[s],r[s]=I(i,e),r[s]._r_unbound=i);return r||{}},reset:function(t){var e=this.init(t.constructor,t,t.viewmodel);return t.viewmodel.root.set(e),!0}},$h={name:"template",extend:function(t,e,n){"template"in n&&(w(n=n.template)?e.template=n:e.template=dn(n,e))},init:function(t,e,n){n=("template"in n?n:t.prototype).template;w(n=n||{v:zr,t:[]})&&(n=cn(e,t=n),e._config.template={fn:t,result:n}),n=dn(n,e),e.template=n.t,n.p&&fn(e.partials,n.p)},reset:function(t){var e=function(t){var e=t._config.template;if(e&&e.fn){t=cn(t,e.fn);return t!==e.result?e.result=t:void 0}}(t);if(e){e=dn(e,t);return t.template=e.t,fn(t.partials,e.p,!0),!0}}},qh=["computed","helpers"],va=xh.prototype;va.extend=function(t,e,n){t=this.useDefaults?t.defaults:t,e=this.useDefaults?e:e.constructor;this.configure(t,e,n)},va.init=function(){},va.configure=function(t,e,n){var i=this.name,n=n[i],t=Gi(t[i]);Wi(t,n),e[i]=t,"partials"===i&&e[i]&&Ji(e[i]).forEach(function(t){at(e[i][t])})},va.reset=function(t){var n=t[this.name],i=!1;return Ji(n).forEach(function(t){var e=n[t];e._fn&&(e._fn.isOwner?n[t]=e._fn:delete n[t],i=!0)}),i};function Hh(t){this.up=t.up,this.ractive=t.up.ractive,this.template=t.template,this.index=t.index,this.type=t.template.t,this.dirty=!1}var Zh=["adaptors","components","computed","decorators","easing","events","helpers","interpolators","partials","transitions"].map(function(t){var e=-1<qh.indexOf(t);return new xh(t,e)}),Wh={extend:function(t,e,n,i){return vn("extend",t,e,n,i)},init:function(t,e,n){return vn("init",t,e,n)},reset:function(e){return Jh.filter(function(t){return t.reset&&t.reset(e)}).map(function(t){return t.name})}},Gh={adapt:Nh,computed:Wh,css:zh,data:Uh,helpers:Wh,template:$h},Mr=Ji(wr),Qh=yn(Mr.filter(function(t){return!Gh[t]})),Yh=yn(Mr.concat(Zh.map(function(t){return t.name}),["on","observe","attributes","cssData","use"])),Jh=[].concat(Mr.filter(function(t){return!Zh[t]&&!Gh[t]}),Zh,Gh.template,Gh.css),Xh=/\b_super\b/,dr=Hh.prototype;dr.bubble=function(){this.dirty||(this.dirty=!0,this.up.bubble())},dr.destroyed=function(){this.fragment&&this.fragment.destroyed()},dr.find=function(){return null},dr.findComponent=function(){return null},dr.findNextNode=function(){return this.up.findNextNode(this)},dr.rebound=function(t){this.fragment&&this.fragment.rebound(t)},dr.shuffled=function(){this.fragment&&this.fragment.shuffled()},dr.valueOf=function(){return this.toString()},Hh.prototype.findAll=a,Hh.prototype.findAllComponents=a;var Ca=function(e){function t(t){e.call(this,t)}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.detach=function(){return this.fragment?this.fragment.detach():Ie()},n.find=function(t){return this.fragment?this.fragment.find(t):void 0},n.findAll=function(t,e){this.fragment&&this.fragment.findAll(t,e)},n.findComponent=function(t){return this.fragment?this.fragment.findComponent(t):void 0},n.findAllComponents=function(t,e){this.fragment&&this.fragment.findAllComponents(t,e)},n.firstNode=function(t){return this.fragment&&this.fragment.firstNode(t)},n.toString=function(t){return this.fragment?this.fragment.toString(t):""},t}(Hh),tu=/\s+/,eu=[void 0,"text","search","url","email","hidden","password","search","reset","submit"],nu={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor",class:"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName",for:"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},iu=lr?dh("div"):null,ru=!1,su=function(e){function t(t){e.call(this,t),this.attributes=[],this.owner=t.owner,this.fragment=new Vl({ractive:this.ractive,owner:this,template:this.template}),this.fragment.findNextNode=a,this.dirty=!1}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.bind=function(){this.fragment.bind()},n.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble())},n.destroyed=function(){this.unrender()},n.render=function(){this.node=this.owner.node,this.node&&(this.isSvg=this.node.namespaceURI===uh),ru=!0,this.rendered||this.fragment.render(),this.rendered=!0,this.dirty=!0,this.update(),ru=!1},n.toString=function(){return this.fragment.toString()},n.unbind=function(t){this.fragment.unbind(t)},n.unrender=function(){this.rendered=!1,this.fragment.unrender()},n.update=function(){var e,t,n,i,r=this;this.dirty&&(this.dirty=!1,t=ru,ru=!0,this.fragment.update(),this.rendered&&this.node&&(i=this.fragment.toString(),n=i,i=this.isSvg,e=ou.test(n)?[]:(i=i?"svg":"div",n?(iu.innerHTML="<"+i+" "+n+"></"+i+">")&&V(iu.childNodes[0].attributes):[]),this.attributes.filter(function(t){return function(t,e){for(var n=t.length;n--;)if(t[n].name===e.name)return!1;return!0}(e,t)}).forEach(function(t){r.node.removeAttribute(t.name)}),e.forEach(function(t){r.node.setAttribute(t.name,t.value)}),this.attributes=e),ru=t||!1)},t}(Hh),ou=/^\s*$/,au=!1,hu=function(e){function t(t){return e.call(this,t),this.name=t.template.n,this.namespace=null,this.owner=t.owner||t.up.owner||t.element||Ae(t.up),this.element=t.element||(this.owner.attributeByName?this.owner:Ae(t.up)),this.up=t.up,this.ractive=this.up.ractive,this.rendered=!1,this.updateDelegate=null,this.fragment=null,this.element.attributeByName[this.name]=this,tr(t.template.f)?(this.fragment=new Vl({owner:this,template:t.template.f}),this.interpolator=this.fragment&&1===this.fragment.items.length&&this.fragment.items[0].type===Hr&&this.fragment.items[0],void(this.interpolator&&(this.interpolator.owner=this))):(this.value=t.template.f,void(0===this.value?this.value="":x(this.value)&&(this.value=!0)))}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.bind=function(){this.fragment&&this.fragment.bind()},n.bubble=function(){this.dirty||(this.up.bubble(),this.element.bubble(),this.dirty=!0)},n.firstNode=function(){},n.getString=function(){au=!0;var t=this.fragment?this.fragment.toString():null!=this.value?""+this.value:"";return au=!1,t},n.getValue=function(){au=!0;var t=this.fragment?this.fragment.valueOf():!!Vs[this.name.toLowerCase()]||this.value;return au=!1,t},n.render=function(){var t,e=this.element.node;(this.node=e).namespaceURI&&e.namespaceURI!==lh.html||(this.propertyName=nu[this.name]||this.name,void 0!==e[this.propertyName]&&(this.useProperty=!0),(Vs[this.name.toLowerCase()]||this.isTwoway)&&(this.isBoolean=!0),"value"===this.propertyName&&(e._ractive.value=this.value)),e.namespaceURI&&(t=this.name.indexOf(":"),this.namespace=-1!==t?function(t,e){for(var n="xmlns:"+e;t;){if(t.hasAttribute&&t.hasAttribute(n))return t.getAttribute(n);t=t.parentNode}return lh[e]}(e,this.name.slice(0,t)):e.namespaceURI),this.rendered=!0,this.updateDelegate=function(t){var e=t.element,n=t.name;if("value"===n){if(t.interpolator&&(t.interpolator.bound=!0),"select"===e.name&&"value"===n)return e.getAttribute("multiple")?wn:xn;if("textarea"===e.name)return Sn;if(null!=e.getAttribute("contenteditable"))return kn;if("input"===e.name){var i=e.getAttribute("type");if("file"===i)return a;if("radio"===i&&e.binding&&"name"===e.binding.attribute.name)return _n;if(~eu.indexOf(i))return Sn}return En}if(i=e.node,t.isTwoway&&"name"===n){if("radio"===i.type)return An;if("checkbox"===i.type)return Cn}if("style"===n)return On;if(0===n.indexOf("style-"))return Nn;if("class"===n&&(!i.namespaceURI||i.namespaceURI===hh))return jn;if(0===n.indexOf("class-"))return Tn;if(t.isBoolean){e=e.getAttribute("type");return!t.interpolator||"checked"!==n||"checkbox"!==e&&"radio"!==e||(t.interpolator.bound=!0),Vn}return t.namespace&&t.namespace!==t.node.namespaceURI?Mn:Pn}(this),this.updateDelegate()},n.toString=function(){if(ru)return"";au=!0;var t=this.getValue();if("value"!==this.name||void 0===this.element.getAttribute("contenteditable")&&"select"!==this.element.name&&"textarea"!==this.element.name){if("name"===this.name&&"input"===this.element.name&&this.interpolator&&"radio"===this.element.getAttribute("type"))return'name="{{'+this.interpolator.model.getKeypath()+'}}"';if(this.owner!==this.element||"style"!==this.name&&"class"!==this.name&&!this.style&&!this.inlineClass){if(this.rendered||this.owner!==this.element||this.name.indexOf("style-")&&this.name.indexOf("class-")){if(Vs[this.name.toLowerCase()])return t?A(t)?this.name+'="'+Le(t)+'"':this.name:"";if(null==t)return"";t=Le(this.getString());return au=!1,t?this.name+'="'+t+'"':this.name}this.name.indexOf("style-")?this.inlineClass=this.name.substr(6):this.style=qt(this.name.substr(6))}}},n.unbind=function(t){this.fragment&&this.fragment.unbind(t)},n.unrender=function(){this.updateDelegate(!0),this.rendered=!1},n.update=function(){var t;this.dirty&&(this.dirty=!1,this.fragment&&this.fragment.update(),this.rendered&&this.updateDelegate(),this.isTwoway&&!this.locked?this.interpolator.twowayBinding.lastVal(!0,this.interpolator.model.get()):"value"!==this.name||!(t=this.element.binding)||(t=t.attribute)&&!t.dirty&&t.rendered&&this.element.binding.attribute.updateDelegate())},t}(Hh),Ka=function(e){function t(t){e.call(this,t),this.owner=t.owner||t.up.owner||Ae(t.up),this.element=this.owner.attributeByName?this.owner:Ae(t.up),this.flag="l"===t.template.v?"lazy":"twoway",this.bubbler=this.owner===this.element?this.element:this.up,this.element.type===Yr&&(tr(t.template.f)&&(this.fragment=new Vl({owner:this,template:t.template.f})),this.interpolator=this.fragment&&1===this.fragment.items.length&&this.fragment.items[0].type===Hr&&this.fragment.items[0])}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.bind=function(){this.fragment&&this.fragment.bind(),In(this,this.getValue(),!0)},n.bubble=function(){this.dirty||(this.bubbler.bubble(),this.dirty=!0)},n.getValue=function(){return this.fragment?this.fragment.valueOf():"value"in this?this.value:!("f"in this.template)||this.template.f},n.render=function(){In(this,this.getValue(),!0)},n.toString=function(){return""},n.unbind=function(t){this.fragment&&this.fragment.unbind(t),delete this.element[this.flag]},n.unrender=function(){this.element.rendered&&this.element.recreateTwowayBinding()},n.update=function(){this.dirty&&(this.dirty=!1,this.fragment&&this.fragment.update(),In(this,this.getValue(),!0))},t}(Hh),Ba=Gi(Hh.prototype);Wi(Ba,{bind:a,unbind:a,update:a,detach:function(){return Be(this.node)},firstNode:function(){return this.node},render:function(t){this.rendered=!0,this.node=lr.createComment(this.template.c),t.appendChild(this.node)},toString:function(){return"\x3c!-- "+this.template.c+" --\x3e"},unrender:function(t){this.rendered&&t&&this.detach(),this.rendered=!1}}),Rn.prototype=Ba;var uu=function(s){function t(t){s.call(this,t,"@this"),this.ractive=t}s&&(t.__proto__=s);var e=t.prototype=Object.create(s&&s.prototype);return e.constructor=t,e.joinKey=function(t){var e,n,i,r=s.prototype.joinKey.call(this,t);return"root"!==t&&"parent"!==t||r.isLink?"data"===t?this.ractive.viewmodel:"cssData"===t?this.ractive.constructor._cssModel:r:(n=t,(e=r).applyValue=function(t){(this.parent.value[n]=t)&&t.viewmodel?this.link(t.viewmodel.getRactiveModel(),n):this.link(Gi(Kr),n),this._link.markedAll()},"root"===n&&(i=e.mark,e.mark=function(t){this._marking||(this._marking=!0,i.apply(this,t),this._marking=!1)}),e.applyValue(e.parent.ractive[n],n),e._link.set=function(t){return e.applyValue(t)},e._link.applyValue=function(t){return e.applyValue(t)},e._link)},t}(ka),lu={"@this":function(t){return t.getRactiveModel()},"@global":function(){return Ea},"@shared":function(){return _a},"@style":function(t){return t.getRactiveModel().joinKey("cssData")},"@helpers":function(t){return t.getHelpers()}};lu["@"]=lu["@this"];var cu=function(i){function t(t){i.call(this,null,null),this.isRoot=!0,(this.root=this).ractive=t.ractive,this.value=t.data,this.adaptors=t.adapt,this.adapt()}i&&(t.__proto__=i);var e=t.prototype=Object.create(i&&i.prototype);return e.constructor=t,e.attached=function(t){!function t(e,n){for(var i in e._link&&e._link.implicit&&e._link.isDetached()&&e.attach(n),e.childByKey){var r;e.value&&(i in e.value?t(e.childByKey[i],n):e.childByKey[i]._link&&!e.childByKey[i]._link.isDetached()||(r=ne(n,i))&&e.childByKey[i].link(r,i,{implicit:!0}))}}(this,t)},e.createLink=function(t,e,n,i){for(var r=S(t),s=this;r.length;)var o=r.shift(),s=s.childByKey[o]||s.joinKey(o);return s.link(e,n,i)},e.detached=function(){!function t(e){for(var n in e._link&&e._link.implicit&&e.unlink(),e.childByKey)t(e.childByKey[n])}(this)},e.get=function(t,e){return t&&U(this),e&&!1===e.virtual?this.value:this.getVirtual()},e.getHelpers=function(){return this.helpers||(this.helpers=new ka(this.ractive.helpers,"helpers",this.ractive)),this.helpers},e.getKeypath=function(){return""},e.getRactiveModel=function(){return this.ractiveModel||(this.ractiveModel=new uu(this.ractive))},e.getValueChildren=function(){var n=i.prototype.getValueChildren.call(this,this.value);return this.children.forEach(function(t){var e;t._link&&(~(e=n.indexOf(t))?n.splice(e,1,t._link):n.push(t._link))}),n},e.has=function(t){if("~"===t[0]&&"/"===t[1]&&(t=t.slice(2)),lu[t]||""===t)return!0;if(i.prototype.has.call(this,t))return!0;t=g(t);return!(!this.childByKey[t]||!this.childByKey[t]._link)||void 0},e.joinKey=function(t,e){if("@"!==(t="~"===t[0]&&"/"===t[1]?t.slice(2):t)[0])return i.prototype.joinKey.call(this,t,e);t=lu[t];return t?t(this):void 0},e.set=function(t){var e=this.wrapper;e?e.reset&&!1!==e.reset(t)||(e.teardown(),this.wrapper=null,this.value=t,this.adapt()):(this.value=t,this.adapt()),this.deps.forEach(H),this.children.forEach(Z)},e.retrieve=function(){return this.wrapper?this.wrapper.get():this.value},e.teardown=function(){i.prototype.teardown.call(this),this.ractiveModel&&this.ractiveModel.teardown()},t}(wa);cu.prototype.update=a;var du=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],fu=["computed","helpers"],pu=0,mu=function(u){function t(t,e){var n=this;u.call(this,t);var i=t.template;this.isAnchor=i.t===es,this.type=this.isAnchor?es:rs;var r,s=i.m,o=i.p||{};if("content"in o||(o.content=i.f||[]),this._partials=o,this.isAnchor)this.name=i.n,this.addChild=Dn,this.removeChild=Fn;else{e=new e({component:!0});this.instance=e,this.name=i.e,(e.el||e.target)&&(k("The <"+this.name+"> component has a default '"+(e.el?"el":"target")+"' property; it has been disregarded"),e.el=e.target=null);for(var a,h=t.up;h;){if(h.owner.type===ss){a=h.owner.container;break}h=h.parent}e.parent=this.up.ractive,e.container=a||null,e.root=e.parent.root,Ln((e.component=this).instance,{partials:o}),s=(i=this.template).m,tr(this.mappings)?s=(s||[]).concat(this.mappings):A(this.mappings)&&(s=(s||[]).concat(ua.parse(this.mappings,{attributes:!0}).t)),e._inlinePartials=o}this.attributeByName={},this.attributes=[],s&&(r=[],s.forEach(function(t){switch(t.t){case ns:case _s:n.attributes.push(ji({owner:n,up:n.up,template:t}));break;case Ss:case As:case Es:break;default:r.push(t)}}),r.length&&this.attributes.push(new su({owner:this,up:this.up,template:r}))),this.eventHandlers=[]}u&&(t.__proto__=u);var e=t.prototype=Object.create(u&&u.prototype);return e.constructor=t,e.bind=function(){this.isAnchor||(this.attributes.forEach($),this.eventHandlers.forEach($),Pi(this.instance,{partials:this._partials},{cssIds:this.up.cssIds}),(this.instance.target||this.instance.el)&&(this.extern=!0),this.bound=!0)},e.bubble=function(){this.dirty||(this.dirty=!0,this.up.bubble())},e.destroyed=function(){!this.isAnchor&&this.instance.fragment&&this.instance.fragment.destroyed()},e.detach=function(){return!this.isAnchor||this.instance?this.instance.fragment.detach():Ie()},e.find=function(t,e){return this.instance?this.instance.fragment.find(t,e):void 0},e.findAll=function(t,e){this.instance&&this.instance.fragment.findAll(t,e)},e.findComponent=function(t,e){return t&&this.name!==t?this.instance.fragment?this.instance.fragment.findComponent(t,e):void 0:this.instance},e.findAllComponents=function(t,e){var n=e.result;!this.instance||t&&this.name!==t||n.push(this.instance),this.instance&&this.instance.findAllComponents(t,e)},e.firstNode=function(t){return this.instance?this.instance.fragment.firstNode(t):void 0},e.getContext=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return t.unshift(this.instance),oe.apply(null,t)},e.rebound=function(e){this.attributes.forEach(function(t){return t.rebound(e)})},e.render=function(t,e){this.isAnchor?(this.rendered=!0,this.target=t,gu.length||(gu.push(this.ractive),e?(this.occupants=e,Un(),this.occupants=null):pa.scheduleTask(Un,!0))):(this.attributes.forEach(Q),this.eventHandlers.forEach(Q),this.extern?(this.instance.delegate=!1,this.instance.render()):Ii(this.instance,t,null,e),this.rendered=!0)},e.shuffled=function(){u.prototype.shuffled.call(this),this.instance&&!this.instance.isolated&&this.instance.fragment&&this.instance.fragment.shuffled()},e.toString=function(){return this.instance?this.instance.toHTML():void 0},e.unbind=function(t){this.isAnchor||(this.bound=!1,this.attributes.forEach(X),t?this.instance.fragment.unbind():Bn(this.instance,function(){return pa.promise()}))},e.unrender=function(t){this.shouldDestroy=t,this.isAnchor?(this.item&&zn(this,this.item),this.target=null,gu.length||(gu.push(this.ractive),pa.scheduleTask(Un,!0))):(this.instance.unrender(),this.instance.el=this.instance.target=null,this.attributes.forEach(tt),this.eventHandlers.forEach(tt)),this.rendered=!1},e.update=function(){this.dirty=!1,this.instance&&(this.instance.fragment.update(),this.attributes.forEach(et),this.eventHandlers.forEach(et))},t}(Hh),gu=[],Ya=function(n){function i(t,e){n.call(this,t,e),this.isReadonly=!this.root.ractive.syncComputedChildren,this.dirty=!0,this.isComputed=!0}n&&(i.__proto__=n);var t=i.prototype=Object.create(n&&n.prototype);t.constructor=i;var e={setRoot:{}};return e.setRoot.get=function(){return this.parent.setRoot},t.applyValue=function(t){if(n.prototype.applyValue.call(this,t),!this.isReadonly){for(var e=this.parent;e&&e.shuffle;)e=e.parent;e&&e.dependencies.forEach(Z)}this.setRoot&&this.setRoot.set(this.setRoot.value)},t.get=function(t,e){var n;return t&&U(this),this.dirty&&(n=this.parent.get(),this.value=n?n[this.key]:void 0,this.wrapper&&(this.newWrapperValue=this.value),this.adapt()),this.dirty=!1,(e&&"unwrap"in e?!1!==e.unwrap:t)&&this.wrapper?this.wrapperValue:this.value},t.handleChange=function(){return this.dirty?void this.deps.forEach(H):(this.dirty=!0,this.boundValue&&(this.boundValue=null),this.links.forEach(G),this.deps.forEach(H),void this.children.forEach(H))},t.joinKey=function(t){return x(t)||""===t?this:(v(this.childByKey,t)||(e=new i(this,t),this.children.push(e),this.childByKey[t]=e),this.childByKey[t]);var e},Object.defineProperties(t,e),i}(wa),Ja=function(i){function t(t,e,n){i.call(this,t,n),this.signature=e,this.isReadonly=!this.signature.setter,this.isComputed=!0,this.dependencies=[],this.children=[],this.childByKey={},this.deps=[],this.dirty=!0,this.shuffle=void 0}i&&(t.__proto__=i);var e=t.prototype=Object.create(i&&i.prototype);e.constructor=t;var n={setRoot:{}};return n.setRoot.get=function(){return this.signature.setter?this:void 0},e.get=function(t,e){var n;return t&&U(this),this.dirty&&(n=this.value,this.value=this.getValue(),pa.active()?h(n,this.value)||this.notifyUpstream():(pa.start(),h(n,this.value)||this.notifyUpstream(),pa.end()),this.wrapper&&(this.newWrapperValue=this.value),this.adapt(),this.dirty=!1),R(this,this.wrapper&&(e&&"unwrap"in e?!1!==e.unwrap:t)?this.wrapperValue:this.value,!e||!1!==e.shouldBind)},e.getContext=function(){return this.parent.isRoot?this.root.ractive:this.parent.get(!1,Pr)},e.getValue=function(){var t;F();try{t=this.signature.getter.call(this.root.ractive,this.getContext(),this.getKeypath())}catch(t){k("Failed to compute "+this.getKeypath()+": "+(t.message||t)),fr&&(console.groupCollapsed&&console.groupCollapsed("%cshow details","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"),e=this.signature,console.error(t.name+": "+t.message+"\n\n"+e.getterString+(e.getterUseStack?"\n\n"+t.stack:"")),console.groupCollapsed&&console.groupEnd())}var e=z();return this.parent.keypath&&!~e.indexOf(this.parent)&&e.push(this.parent),this.setDependencies(e),t},e.mark=function(){this.handleChange()},e.rebind=function(t,e){t!==e&&this.handleChange()},e.set=function(t){if(this.isReadonly)throw new Error("Cannot set read-only computed value '"+this.key+"'");this.signature.setter(t,this.getContext(),this.getKeypath()),this.mark()},e.setDependencies=function(t){for(var e=this.dependencies.length;e--;){var n=this.dependencies[e];~t.indexOf(n)||n.unregister(this)}for(e=t.length;e--;){var i=t[e];~this.dependencies.indexOf(i)||i.register(this)}this.dependencies=t},e.teardown=function(){for(var t=this.dependencies.length;t--;)this.dependencies[t]&&this.dependencies[t].unregister(this);this.parent.computed[this.key]===this&&delete this.parent.computed[this.key],i.prototype.teardown.call(this)},Object.defineProperties(e,n),t}(wa),ph=Ja.prototype,vh=Ya.prototype;ph.handleChange=vh.handleChange,ph.joinKey=vh.joinKey,ba.Computation=Ja;var vu=function(i){function t(t,e){var n=this;i.call(this,t.ractive.viewmodel,null),this.fragment=t,this.template=e,this.isReadonly=!0,this.isComputed=!0,this.dirty=!0,this.fn=!1===t.ractive.allowExpressions?a:ot(e.s,e.r.length),this.models=this.template.r.map(function(t){return ne(n.fragment,t)}),this.dependencies=[],this.shuffle=void 0,this.bubble()}i&&(t.__proto__=i);var e=t.prototype=Object.create(i&&i.prototype);return e.constructor=t,e.bubble=function(t){void 0===t&&(t=!0),this.keypath=void 0,t&&this.handleChange()},e.getKeypath=function(){var n=this;return this.template?(this.keypath||(this.keypath="@"+this.template.s.replace(/_(\d+)/g,function(t,e){if(e>=n.models.length)return t;e=n.models[e];return e?e.getKeypath():"@undefined"})),this.keypath):"@undefined"},e.getValue=function(){var e=this;F();try{var t=this.models.map(function(t){return t?t.get(!0):void 0}),n=this.fn.apply(this.fragment.ractive,t)}catch(t){k("Failed to compute "+this.getKeypath()+": "+(t.message||t))}var i=z();return this.dependencies.filter(function(t){return!~i.indexOf(t)}).forEach(function(t){t.unregister(e),j(e.dependencies,t)}),i.filter(function(t){return!~e.dependencies.indexOf(t)}).forEach(function(t){t.register(e),e.dependencies.push(t)}),n},e.notifyUpstream=function(){},e.rebind=function(t,e,n){var i=this.models.indexOf(e);!~i||(t=rt(this.template.r[i],t,e))!==e&&(e.unregister(this),this.models.splice(i,1,t),t&&t.addShuffleRegister(this,"mark")),this.bubble(!n)},e.rebound=function(t){var e=this;this.models=this.template.r.map(function(t){return ne(e.fragment,t)}),t&&this.bubble(!0)},e.retrieve=function(){return this.get()},e.teardown=function(){var e=this;this.fragment=void 0,this.dependencies&&this.dependencies.forEach(function(t){return t.unregister(e)}),i.prototype.teardown.call(this)},e.unreference=function(){i.prototype.unreference.call(this),$n(this)},e.unregister=function(t){i.prototype.unregister.call(this,t),$n(this)},e.unregisterLink=function(t){i.prototype.unregisterLink.call(this,t),$n(this)},t}(wa),Zi=vu.prototype,va=Ja.prototype;Zi.get=va.get,Zi.handleChange=va.handleChange,Zi.joinKey=va.joinKey,Zi.mark=va.mark;var yu={update:Zi.unbind=a,teardown:a},Mr=function(t){this.owner=t.owner||t.up.owner||Ae(t.up),this.element=this.owner.attributeByName?this.owner:Ae(t.up),this.up=t.up||this.owner.up,this.ractive=this.up.ractive||this.owner.ractive;t=this.template=t.template;this.name=t.n,this.node=null,this.handle=null,this.element.decorators.push(this)},dr=Mr.prototype;dr.bind=function(){var t=this.element===this.owner?new Vl({owner:this.owner}):this.up;qn(this,this.template,t,{register:!0})},dr.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble(),this.up.bubble())},dr.destroyed=function(){this.handle&&(this.handle.teardown(),this.handle=null),this.shouldDestroy=!0},dr.handleChange=function(){this.bubble()},dr.rebound=function(t){this.model&&this.model.rebound(t)},dr.render=function(){var n=this;this.shouldDestroy=!1,this.handle&&this.unrender();var i=this.ractive;pa.scheduleTask(function(){if(n.element.rendered){var t=d("decorators",i,n.name);if(!t)return r(_r(n.name,"decorator")),void(n.handle=yu);n.node=n.element.node;var e=n.model?n.model.get():[];if(Ga.f=n.up,n.handle=t.apply(i,[n.node].concat(e)),Ga.f=null,!n.handle||!n.handle.teardown)throw new Error("The '"+n.name+"' decorator must return an object with a teardown method");n.shouldDestroy&&n.destroyed()}},!0)},dr.shuffled=function(){this.handle&&this.handle.shuffled&&this.handle.shuffled()},dr.toString=function(){return""},dr.unbind=function(){var t;(t=this).template,t.model&&t.model.unregister(t)},dr.unrender=function(t){t&&!this.element.rendered||!this.handle||(this.handle.teardown(),this.handle=null)},dr.update=function(){var t,e=this.handle;this.dirty?(this.dirty=!1,e&&(e.update?(t=this.model?this.model.get():[],e.update.apply(this.ractive,t)):(this.unrender(),this.render()))):e&&e.invalidate&&pa.scheduleTask(function(){return e.invalidate()},!0)},Mr.prototype.firstNode=a;Ba=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.toString=function(){return"<!DOCTYPE"+this.template.a+">"},e}(Hh),Ya=Ba.prototype;Ya.bind=Ya.render=Ya.teardown=Ya.unbind=Ya.unrender=Ya.update=a;ph=function(t,e){void 0===e&&(e="value"),this.element=t,this.ractive=t.ractive,this.attribute=t.attributeByName[e];var n=this.attribute.interpolator;n.twowayBinding=this;e=n.model;if(e.isReadonly&&!e.setRoot){n=e.getKeypath().replace(/^@/,"");return _("Cannot use two-way binding on <"+t.name+"> element: "+n+" is read-only. To suppress this warning use <"+t.name+" twoway='false'...>",{ractive:this.ractive}),!1}this.attribute.isTwoway=!0;t=(this.model=e).get();this.wasUndefined=x(t),x(t)&&this.getInitialValue&&(t=this.getInitialValue(),e.set(t)),this.lastVal(!0,t);e=Ae(this.element,!1,"form");e&&(this.resetValue=t,e.formBindings.push(this))},vh=ph.prototype;vh.bind=function(){this.model.registerTwowayBinding(this)},vh.handleChange=function(){var t=this,e=this.getValue();this.lastVal()!==e&&(pa.start(),this.attribute.locked=!0,this.model.set(e),this.lastVal(!0,e),this.model.get()!==e?this.attribute.locked=!1:pa.scheduleTask(function(){return t.attribute.locked=!1}),pa.end())},vh.lastVal=function(t,e){return t?void(this.lastValue=e):this.lastValue},vh.rebind=function(t,e){var n=this;this.model&&this.model===e&&e.unregisterTwowayBinding(this),t&&(this.model=t,pa.scheduleTask(function(){return t.registerTwowayBinding(n)}))},vh.rebound=function(){this.model&&this.model.unregisterTwowayBinding(this),this.model=this.attribute.interpolator.model,this.model&&this.model.registerTwowayBinding(this)},vh.render=function(){this.node=this.element.node,(this.node._ractive.binding=this).rendered=!0},vh.setFromNode=function(t){this.model.set(t.value)},vh.unbind=function(){this.model&&this.model.unregisterTwowayBinding(this)},ph.prototype.unrender=a;var bu=function(e){function t(t){e.call(this,t,"checked")}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.render=function(){e.prototype.render.call(this),this.element.on("change",Zn),this.node.attachEvent&&this.element.on("click",Zn)},n.unrender=function(){this.element.off("change",Zn),this.node.attachEvent&&this.element.off("click",Zn)},n.getInitialValue=function(){return!!this.element.getAttribute("checked")},n.getValue=function(){return this.node.checked},n.setFromNode=function(t){this.model.set(t.checked)},t}(ph),wu=function(t,e,n){var i=this;this.model=e,this.hash=t,this.getValue=function(){return i.value=n.call(i),i.value},this.bindings=[]},wa=wu.prototype;wa.add=function(t){this.bindings.push(t)},wa.bind=function(){var e=this;this.value=this.model.get(),this.bindings.forEach(function(t){return t.lastVal(!0,e.value)}),this.model.registerTwowayBinding(this),this.bound=!0},wa.remove=function(t){j(this.bindings,t),this.bindings.length||this.unbind()},wa.unbind=function(){this.model.unregisterTwowayBinding(this),this.bound=!1,delete this.model[this.hash]},wu.prototype.rebind=ph.prototype.rebind;function xu(t,e){-1!==t.indexOf("*")&&c('Only component proxy-events may contain "*" wildcards, <'+e.name+" on-"+t+'="..."/> is not valid'),this.name=t,this.owner=e,this.handler=null}var ku=[].push,_u=function(i){function t(t){var e;i.call(this,t,"name"),this.checkboxName=!0,this.group=Wn("checkboxes",this.model,Gn),this.group.add(this),this.noInitialValue&&(this.group.noInitialValue=!0),this.group.noInitialValue&&this.element.getAttribute("checked")&&(e=this.model.get(),t=this.element.getAttribute("value"),this.arrayContains(e,t)||ku.call(e,t))}i&&(t.__proto__=i);var e=t.prototype=Object.create(i&&i.prototype);return e.constructor=t,e.bind=function(){this.group.bound||this.group.bind()},e.getInitialValue=function(){return this.noInitialValue=!0,[]},e.getValue=function(){return this.group.value},e.handleChange=function(){this.isChecked=this.element.node.checked;var t=this.model.get();this.group.value=void 0===t?[]:t.slice();t=this.element.getAttribute("value");this.isChecked&&!this.arrayContains(this.group.value,t)?this.group.value.push(t):!this.isChecked&&this.arrayContains(this.group.value,t)&&this.removeFromArray(this.group.value,t),this.lastValue=null,i.prototype.handleChange.call(this)},e.render=function(){i.prototype.render.call(this);var t=this.node,e=this.model.get(),n=this.element.getAttribute("value");tr(e)?this.isChecked=this.arrayContains(e,n):this.isChecked=this.element.compare(e,n),t.name="{{"+this.model.getKeypath()+"}}",t.checked=this.isChecked,this.element.on("change",Zn),this.node.attachEvent&&this.element.on("click",Zn)},e.setFromNode=function(t){this.group.bindings.forEach(function(t){return t.wasUndefined=!0}),t.checked&&((t=this.group.getValue()).push(this.element.getAttribute("value")),this.group.model.set(t))},e.unbind=function(){this.group.remove(this)},e.unrender=function(){var t=this.element;t.off("change",Zn),this.node.attachEvent&&t.off("click",Zn)},e.arrayContains=function(t,e){for(var n=t.length;n--;)if(this.element.compare(e,t[n]))return!0;return!1},e.removeFromArray=function(t,e){if(t)for(var n=t.length;n--;)this.element.compare(e,t[n])&&t.splice(n,1)},t}(ph),Eu=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.getInitialValue=function(){return this.element.fragment?this.element.fragment.toString():""},n.getValue=function(){return this.element.node.innerHTML},n.render=function(){e.prototype.render.call(this);var t=this.element;t.on("change",Zn),t.on("blur",Zn),this.ractive.lazy||(t.on("input",Zn),this.node.attachEvent&&t.on("keyup",Zn))},n.setFromNode=function(t){this.model.set(t.innerHTML)},n.unrender=function(){var t=this.element;t.off("blur",Zn),t.off("change",Zn),t.off("input",Zn),t.off("keyup",Zn)},t}(ph),Su=function(s){function t(){s.apply(this,arguments)}s&&(t.__proto__=s);var e=t.prototype=Object.create(s&&s.prototype);return e.constructor=t,e.getInitialValue=function(){return""},e.getValue=function(){return this.node.value},e.render=function(){s.prototype.render.call(this);var e,n,t=this.ractive.lazy,i=!1,r=this.element;o(t="lazy"in this.element?this.element.lazy:t)&&(i=+t,t=!1),this.handler=i?(e=i,function(){var t=this;n&&clearTimeout(n),n=setTimeout(function(){t._ractive.binding.rendered&&Zn.call(t),n=null},e)}):Zn;i=this.node;r.on("change",Zn),"file"!==i.type&&(t||(r.on("input",this.handler),i.attachEvent&&r.on("keyup",this.handler)),r.on("blur",Qn))},e.unrender=function(){var t=this.element;this.rendered=!1,t.off("change",Zn),t.off("input",this.handler),t.off("keyup",this.handler),t.off("blur",Qn)},t}(ph),Au=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.getInitialValue=function(){},n.getValue=function(){return this.node.files},n.render=function(){this.element.lazy=!1,t.prototype.render.call(this)},n.setFromNode=function(t){this.model.set(t.files)},e}(Su),Cu=function(n){function t(){n.apply(this,arguments)}n&&(t.__proto__=n);var e=t.prototype=Object.create(n&&n.prototype);return e.constructor=t,e.getInitialValue=function(){return this.element.options.filter(function(t){return t.getAttribute("selected")}).map(function(t){return t.getAttribute("value")})},e.getValue=function(){for(var t=this.element.node.options,e=t.length,n=[],i=0;i<e;i+=1){var r=t[i];r.selected&&(r=(r._ractive||r).value,n.push(r))}return n},e.handleChange=function(){var t=this.attribute.getValue(),e=this.getValue();return!x(t)&&function(t,e){var n;if(tr(t)&&tr(e)&&t.length===e.length){for(n=t.length;n--;)if(t[n]!==e[n])return;return 1}}(e,t)||n.prototype.handleChange.call(this),this},e.render=function(){n.prototype.render.call(this),this.element.on("change",Zn),x(this.model.get())&&this.handleChange()},e.setFromNode=function(t){for(var e=Yn(t),n=e.length,i=new Array(n);n--;){var r=e[n];i[n]=(r._ractive||r).value}this.model.set(i)},e.unrender=function(){this.element.off("change",Zn)},t}(ph),Ou=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.getInitialValue=function(){},n.getValue=function(){var t=parseFloat(this.node.value);return isNaN(t)?void 0:t},n.setFromNode=function(t){t=parseFloat(t.value);isNaN(t)||this.model.set(t)},e}(Su),Nu={},ju=function(e){function t(t){e.call(this,t,"checked"),this.siblings=(t=this.ractive._guid+this.element.getAttribute("name"),Nu[t]||(Nu[t]=[])),this.siblings.push(this)}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.getValue=function(){return this.node.checked},n.handleChange=function(){pa.start(),this.siblings.forEach(function(t){t.model.set(t.getValue())}),pa.end()},n.render=function(){e.prototype.render.call(this),this.element.on("change",Zn),this.node.attachEvent&&this.element.on("click",Zn)},n.setFromNode=function(t){this.model.set(t.checked)},n.unbind=function(){j(this.siblings,this)},n.unrender=function(){this.element.off("change",Zn),this.node.attachEvent&&this.element.off("click",Zn)},t}(ph),Tu=function(n){function t(t){var e=this;n.call(this,t,"name"),this.group=Wn("radioname",this.model,Jn),this.group.add(this),t.checked&&(this.group.value=this.getValue()),this.attribute.interpolator.pathChanged=function(){return e.updateName()}}n&&(t.__proto__=n);var e=t.prototype=Object.create(n&&n.prototype);return e.constructor=t,e.bind=function(){this.group.bound||this.group.bind()},e.getInitialValue=function(){return this.element.getAttribute("checked")?this.element.getAttribute("value"):void 0},e.getValue=function(){return this.element.getAttribute("value")},e.handleChange=function(){this.node.checked&&(this.group.value=this.getValue(),n.prototype.handleChange.call(this)),this.updateName()},e.lastVal=function(t,e){return this.group?t?void(this.group.lastValue=e):this.group.lastValue:void 0},e.rebind=function(t,e){n.prototype.rebind.call(this,t,e),this.updateName()},e.rebound=function(t){n.prototype.rebound.call(this,t),this.updateName()},e.render=function(){n.prototype.render.call(this);var t=this.node;this.updateName(),t.checked=this.element.compare(this.model.get(),this.element.getAttribute("value")),this.element.on("change",Zn),t.attachEvent&&this.element.on("click",Zn)},e.setFromNode=function(t){t.checked&&this.group.model.set(this.element.getAttribute("value"))},e.unbind=function(){this.group.remove(this)},e.unrender=function(){var t=this.element;t.off("change",Zn),this.node.attachEvent&&t.off("click",Zn)},e.updateName=function(){this.node&&(this.node.name="{{"+this.model.getKeypath()+"}}")},t}(ph),Vu=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.forceUpdate=function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,pa.scheduleTask(function(){return t.attribute.locked=!1}),this.model.set(e))},n.getInitialValue=function(){if(void 0===this.element.getAttribute("value")){var t=this.element.options,e=t.length;if(e){for(var n,i,r=e;r--;){var s=t[r];if(s.getAttribute("selected")){s.getAttribute("disabled")||(n=s.getAttribute("value")),i=!0;break}}if(!i)for(;++r<e;)if(!t[r].getAttribute("disabled")){n=t[r].getAttribute("value");break}return void 0!==n&&(this.element.attributeByName.value.value=n),n}}},n.getValue=function(){for(var t=this.node.options,e=t.length,n=0;n<e;n+=1){var i=t[n];if(t[n].selected&&!t[n].disabled)return(i._ractive||i).value}},n.render=function(){t.prototype.render.call(this),this.element.on("change",Zn)},n.setFromNode=function(t){t=Yn(t)[0];this.model.set((t._ractive||t).value)},n.unrender=function(){this.element.off("change",Zn)},e}(ph),Pu=/;\s*$/,Mu=function(d){function t(t){if(d.call(this,t),this.name=t.template.e.toLowerCase(),this.parent=Ae(this.up,!1),this.parent&&"option"===this.parent.name)throw new Error("An <option> element cannot contain other elements (encountered <"+this.name+">)");this.decorators=[],this.attributeByName={};for(var e,n,i,r,s,o,a,h,u=this.template.m,l=u&&u.length||0,c=0;c<l;c++)if((a=u[c]).g)(this.statics||(this.statics={}))[a.n]=A(a.f)?a.f:a.n;else switch(a.t){case ns:case As:case Es:case _s:case Ss:i=ji({owner:this,up:this.up,template:a}),n=a.n,e=e||(this.attributes=[]),"value"===n?r=i:"name"===n?o=i:"class"===n?s=i:e.push(i);break;case 74:this.delegate=!1;break;default:(h=h||[]).push(a)}r&&e.push(r),o&&e.push(o),s&&e.unshift(s),h&&((e||(this.attributes=[])).push(new su({owner:this,up:this.up,template:h})),h=[]),t.template.f&&!t.deferContent&&(this.fragment=new Vl({template:t.template.f,owner:this,cssIds:null})),this.binding=null}d&&(t.__proto__=d);var e=t.prototype=Object.create(d&&d.prototype);return e.constructor=t,e.bind=function(){var t=this.attributes;if(t){t.binding=!0;for(var e=t.length,n=0;n<e;n++)t[n].bind();t.binding=!1}this.fragment&&this.fragment.bind(),this.binding?this.binding.bind():this.recreateTwowayBinding()},e.createTwowayBinding=function(){if(("twoway"in this?this:this.ractive).twoway){var t=function(t){var e=t.name,n=t.attributeByName;if("input"===e||"textarea"===e||"select"===e||n.contenteditable){var i=Xn(n.value),r=Xn(n.contenteditable);if((t.getAttribute("contenteditable")||r)&&i)return Eu;if("input"!==e)return"select"===e&&i?t.getAttribute("multiple")?Cu:Vu:"textarea"===e&&i?Su:null;var s=t.getAttribute("type");if("radio"===s){r=Xn(n.name),e=Xn(n.checked);return r&&e?(k("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:t.root}),Tu):r?Tu:e?ju:null}if("checkbox"!==s)return"file"===s&&i?Au:"number"===s&&i||"range"===s&&i?Ou:i?Su:null;i=Xn(n.name),n=Xn(n.checked);return i&&n?bu:i?_u:n?bu:null}}(this);if(t){t=new t(this);if(t&&t.model)return t}}},e.destroyed=function(){this.attributes&&this.attributes.forEach(q),this.fragment&&this.fragment.destroyed()},e.detach=function(){return this.rendered||this.destroyed(),Be(this.node)},e.find=function(t,e){return this.node&&Xa(this.node,t)?this.node:this.fragment?this.fragment.find(t,e):void 0},e.findAll=function(t,e){var n=e.result;Xa(this.node,t)&&n.push(this.node),this.fragment&&this.fragment.findAll(t,e)},e.findNextNode=function(){return null},e.firstNode=function(){return this.node},e.getAttribute=function(t){if(this.statics&&t in this.statics)return this.statics[t];t=this.attributeByName[t];return t?t.getValue():void 0},e.getContext=function(){for(var t,e=[],n=arguments.length;n--;)e[n]=arguments[n];return this.fragment?(t=this.fragment).getContext.apply(t,e):(this.ctx||(this.ctx=new Da(this.up,this)),e.unshift(Gi(this.ctx)),Wi.apply(null,e))},e.off=function(t,e,n){void 0===n&&(n=!1);var i,r=this.up.delegate,s=this.listeners&&this.listeners[t];s&&(j(s,e),r?(i=(r.listeners||(r.listeners=[]))&&(r.listeners[t]||(r.listeners[t]=[]))).refs&&!--i.refs&&r.off(t,ri,!0):this.rendered&&(i=(e=this.node).addEventListener,r=e.removeEventListener,s.length?s.length&&!s.refs&&n&&(r.call(e,t,si,!0),i.call(e,t,si,!1)):r.call(e,t,si,n)))},e.on=function(t,e,n){void 0===n&&(n=!1);var i,r,s=this.up.delegate,o=(this.listeners||(this.listeners={}))[t]||(this.listeners[t]=[]);s?((r=(s.listeners||(s.listeners=[]))&&s.listeners[t]||(s.listeners[t]=[])).refs||(r.refs=0,s.on(t,ri,!0)),r.refs++):this.rendered&&(s=(i=this.node).addEventListener,r=i.removeEventListener,o.length?o.length&&!o.refs&&n&&(r.call(i,t,si,!1),s.call(i,t,si,!0)):s.call(i,t,si,n)),C(this.listeners[t],e)},e.recreateTwowayBinding=function(){this.binding&&(this.binding.unbind(),this.binding.unrender()),(this.binding=this.createTwowayBinding())&&(this.binding.bind(),this.rendered&&this.binding.render())},e.rebound=function(e){d.prototype.rebound.call(this,e),this.attributes&&this.attributes.forEach(function(t){return t.rebound(e)}),this.binding&&this.binding.rebound(e)},e.render=function(t,e){var n,i,r=this;this.namespace=(i=(n=this).getAttribute("xmlns"))||("svg"===n.name?uh:(i=n.parent)?"foreignobject"===i.name?hh:i.node.namespaceURI:n.ractive.el.namespaceURI);var s,o,a=!1;if(e)for(;s=e.shift();){if(s.nodeName.toUpperCase()===r.template.e.toUpperCase()&&s.namespaceURI===r.namespace){r.node=o=s,a=!0;break}Be(s)}!a&&this.node&&(o=this.node,t.appendChild(o),a=!0),o||(h=this.template.e,o=dh(this.namespace===hh?h.toLowerCase():h,this.namespace,this.getAttribute("is")),this.node=o),Qi(o,"_ractive",{value:{proxy:this},configurable:!0}),this.statics&&Ji(this.statics).forEach(function(t){o.setAttribute(t,r.statics[t])}),a&&this.foundNode&&this.foundNode(o);var h=this.intro;if(h&&h.shouldFire("intro")&&(h.isIntro=!0,h.isOutro=!1,pa.registerTransition(h)),this.fragment&&(h=a?V(o.childNodes):void 0,this.fragment.render(o,h),h&&h.forEach(Be)),a){this.binding&&this.binding.wasUndefined&&this.binding.setFromNode(o);for(var u=o.attributes.length;u--;){var l=o.attributes[u].name;l in r.attributeByName||r.statics&&l in r.statics||o.removeAttribute(l)}}if(this.up.cssIds&&o.setAttribute("data-ractive-css",this.up.cssIds.map(function(t){return"{"+t+"}"}).join(" ")),this.attributes)for(var c=this.attributes.length,d=0;d<c;d++)r.attributes[d].render();if(this.binding&&this.binding.render(),!this.up.delegate&&this.listeners){var f,p=this.listeners;for(f in p)p[f]&&p[f].length&&r.node.addEventListener(f,si,!!p[f].refs)}a||t.appendChild(o),this.rendered=!0},e.shuffled=function(){d.prototype.shuffled.call(this),this.decorators.forEach(Y)},e.toString=function(){var t,e=this,n=this.template.e,i=this.attributes&&this.attributes.map(ti).join("")||"";this.statics&&Ji(this.statics).forEach(function(t){return"class"!==t&&"style"!==t&&(i=" "+t+'="'+Le(e.statics[t])+'"'+i)}),"option"===this.name&&this.isSelected()&&(i+=" selected"),"input"===this.name&&(o=(t=this).attributeByName.name,"radio"===t.getAttribute("type")&&(o||{}).interpolator&&t.getAttribute("value")===o.interpolator.model.get())&&(i+=" checked");var r=this.statics?this.statics.style:void 0,s=this.statics?this.statics.class:void 0;this.attributes&&this.attributes.forEach(function(t){"class"===t.name?s=(s||"")+(s?" ":"")+Le(t.getString()):"style"===t.name?(r=(r||"")+(r?" ":"")+Le(t.getString()))&&!Pu.test(r)&&(r+=";"):t.style?r=(r||"")+(r?" ":"")+t.style+": "+Le(t.getString())+";":t.inlineClass&&t.getValue()&&(s=(s||"")+(s?" ":"")+t.inlineClass)}),void 0!==r&&(i=" style"+(r?'="'+r+'"':"")+i),void 0!==s&&(i=" class"+(s?'="'+s+'"':"")+i),this.up.cssIds&&(i+=' data-ractive-css="'+this.up.cssIds.map(function(t){return"{"+t+"}"}).join(" ")+'"');var o="<"+n+i+">";return Ps[this.name.toLowerCase()]?o:("textarea"===this.name&&void 0!==this.getAttribute("value")?o+=dt(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(o+=this.getAttribute("value")||""),this.fragment&&(o+=this.fragment.toString(!/^(?:script|style)$/i.test(this.template.e))),o+"</"+n+">")},e.unbind=function(t){var e=this.attributes;if(e){e.unbinding=!0;for(var n=e.length,i=0;i<n;i++)e[i].unbind(t);e.unbinding=!1}this.binding&&this.binding.unbind(t),this.fragment&&this.fragment.unbind(t)},e.unrender=function(t){var e;this.rendered&&(this.rendered=!1,(e=this.intro)&&e.complete&&e.complete(),"option"===this.name?this.detach():t&&pa.detachWhenReady(this),(t=this.outro)&&t.shouldFire("outro")&&(t.isIntro=!1,t.isOutro=!0,pa.registerTransition(t)),this.fragment&&this.fragment.unrender(),this.binding&&this.binding.unrender())},e.update=function(){if(this.dirty){this.dirty=!1;var t=this.attributes;if(t)for(var e=t.length,n=0;n<e;n++)t[n].update();this.fragment&&this.fragment.update()}},t}(Ca),Iu=!1,Ru=!1,Bu=!1,Ku=null!==ur?ur.UIEvent:null,Ja=function(n){function t(t){n.call(this,t),this.formBindings=[]}n&&(t.__proto__=n);var e=t.prototype=Object.create(n&&n.prototype);return e.constructor=t,e.render=function(t,e){n.prototype.render.call(this,t,e),this.on("reset",oi)},e.unrender=function(t){this.off("reset",oi),n.prototype.unrender.call(this,t)},t}(Mu),va=xu.prototype;va.bind=function(){},va.render=function(n){function t(){var e=i.owner.node;i.owner.on(r,i.handler=function(t){return n.fire({node:e,original:t,event:t,name:r})})}var i=this,r=this.name;"load"!==r?pa.scheduleTask(t,!0):t()},va.unbind=function(){},va.unrender=function(){this.handler&&this.owner.off(this.name,this.handler)};function Lu(t,e,n,i){this.eventPlugin=t,this.owner=e,this.name=n,this.handler=null,this.args=i}Zi=Lu.prototype;Zi.bind=function(){},Zi.render=function(n){var i=this;pa.scheduleTask(function(){var e=i.owner.node;Ga.f=n.up,i.handler=i.eventPlugin.apply(i.owner.ractive,[e,function(t){return(t=void 0===t?{}:t).original?t.event=t.original:t.original=t.event,t.name=i.name,t.node=t.node||e,n.fire(t)}].concat(i.args||[])),Ga.f=null})},Zi.unbind=function(){},Zi.unrender=function(){var t=this;this.handler?this.handler.teardown():pa.scheduleTask(function(){return t.handler&&t.handler.teardown()})};function Du(t,e){this.component=t,this.name=e,this.handler=null}dr=Du.prototype;dr.bind=function(i){var r=this.component.instance;this.handler=r.on(this.name,function(){for(var t,e=[],n=arguments.length;n--;)e[n]=arguments[n];return e[0]instanceof Da?((t=e.shift()).component=r,i.fire(t,e)):i.fire({},e),!1})},dr.render=function(){},dr.unbind=function(){this.handler.cancel()},dr.unrender=function(){};var Fu=/^(event|arguments|@node|@event|@context)(\..+)?$/,zu=/^\$(\d+)(\..+)?$/,Ya=function(t){this.owner=t.owner||t.up.owner||Ae(t.up),this.element=this.owner.attributeByName?this.owner:Ae(t.up,!0),this.template=t.template,this.up=t.up,this.ractive=t.up.ractive,this.events=[]},vh=Ya.prototype;vh.bind=function(){var n,i=this;if(this.events.length&&(this.events.forEach(function(t){return t.unrender()}),this.events=[]),this.element.type===rs||this.element.type===es)this.template.n.forEach(function(t){i.events.push(new Du(i.element,t))});else{if(n=this.template.a){var t=n.r.map(function(t){t=ne(i.up,t);return t?t.get():void 0});try{n=ot(n.s,t.length).apply(null,t)}catch(t){n=null,k("Failed to compute args for event on-"+this.template.n.join("- ")+": "+(t.message||t))}}this.template.n.forEach(function(t){var e=d("events",i.ractive,t);e?i.events.push(new Lu(e,i.element,t,n)):i.events.push(new xu(t,i.element))})}this.models=null,C(this.element.events||(this.element.events=[]),this),qn(this,this.template),this.fn||(this.action=this.template.f),this.events.forEach(function(t){return t.bind(i)})},vh.destroyed=function(){this.events.forEach(function(t){return t.unrender()})},vh.fire=function(r,s){var o=this;void 0===s&&(s=[]);var a=r instanceof Da&&r.refire?r:this.element.getContext(r);if(this.fn){var h=[],t=Hn(0,this.template,this.up,{specialRef:function(t){var e=Fu.exec(t);if(e)return{special:e[1],keys:e[2]?S(e[2].substr(1)):[]};t=zu.exec(t);return t?{special:"arguments",keys:[t[1]-1].concat(t[2]?S(t[2].substr(1)):[])}:void 0}});t&&t.forEach(function(t){if(!t)return h.push(void 0);if(t.special){for(var e=t.special,n="@node"===e?o.element.node:"@event"===e?r&&r.event:"event"===e?(_("The event reference available to event directives is deprecated and should be replaced with @context and @event"),a):"@context"===e?a:s,i=t.keys.slice();n&&i.length;)n=n[i.shift()];return h.push(n)}return t.wrapper?h.push(t.wrapperValue):void h.push(t.get())});var e=this.ractive,n=e.event;e.event=a;var i=this.fn.apply(e,h),u=i.pop();return!1===u?(t=r?r.original:void 0)?(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()):_("handler '"+this.template.n.join(" ")+"' returned false, but there is no event available to cancel"):!i.length&&tr(u)&&A(u[0])&&(u=ye(this.ractive,u.shift(),a,u)),e.event=n,u}return ye(this.ractive,this.action,a,s)},vh.handleChange=function(){},vh.render=function(){var e=this;this.events.forEach(function(t){return t.render(e)})},vh.toString=function(){return""},vh.unbind=function(e){j(this.element.events,this),this.events.forEach(function(t){return t.unbind(e)})},vh.unrender=function(){this.events.forEach(function(t){return t.unrender()})};wa=Ya.prototype;wa.firstNode=wa.rebound=wa.update=a;var Uu=function(n){function t(t,e){n.call(this,null,null,null,"@undefined"),this.root=t.ractive.viewmodel,this.template=e,this.rootLink=!0,this.template=e,this.fragment=t,this.rebound()}n&&(t.__proto__=n);var e=t.prototype=Object.create(n&&n.prototype);return e.constructor=t,e.getKeypath=function(){return this.model?this.model.getKeypath():"@undefined"},e.rebound=function(){var n,i=this,r=this.fragment,s=this.template,o=this.base=li(r,s);this.proxy&&ui(this);var a=this.proxy={rebind:function(t,e){e===o?(t=rt(s,t,e))!==o&&(i.base=o=t):~(n=h.indexOf(e))&&((t=rt(s.m[n].n,t,e))!==h[n]&&h.splice(n,1,t||Kr)),t!==e&&(e.unregister(a),t&&t.addShuffleTask(function(){return t.register(a)}))},handleChange:function(){t()}};o.register(a);var h=this.members=s.m.map(function(t){return A(t)?{get:function(){return t}}:((e=t.t===ps?ne(r,t.n):new vu(r,t)).register(a),e);var e}),t=function(){var t=o&&o.joinAll(h.reduce(function(t,e){e=e.get();return tr(e)?t.concat(e):(t.push(p(String(e))),t)},[]));t!==i.model&&(i.model=t,i.relinking(t),K(),function t(e){for(var n,i=e.deps.length,r=0;r<i;r++)(n=e.deps[r]).pathChanged&&n.pathChanged(),n.fragment&&n.fragment.pathModel&&n.fragment.pathModel.applyValue(e.getKeypath());for(i=e.children.length,r=0;r<i;r++)t(e.children[r])}(i),i.fragment.shuffled())};t()},e.teardown=function(){ui(this),n.prototype.teardown.call(this)},e.unreference=function(){n.prototype.unreference.call(this),this.deps.length||this.refs||this.teardown()},e.unregister=function(t){n.prototype.unregister.call(this,t),this.deps.length||this.refs||this.teardown()},t}(Lr),ph=vu.prototype,va=Uu.prototype;va.unreference=ph.unreference,va.unregister=ph.unregister,va.unregisterLink=ph.unregisterLink;var $u=function(e){function t(t){e.call(this,t),t.owner&&(this.parent=t.owner),this.isStatic=!!t.template.s,this.model=null,this.dirty=!1}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.bind=function(t){var e=this.template.y?this.template.y.containerFragment:this.containerFragment||this.up,e=t||li(e,this.template);if(e){var n=e.get();if(this.isStatic)return this.model={get:function(){return n}},void e.unreference();e.register(this),this.model=e}},n.handleChange=function(){this.bubble()},n.rebind=function(t,e,n){return this.isStatic?void 0:(t=rt(this.template,t,e,this.up))!==this.model&&(this.model&&this.model.unregister(this),t&&t.addShuffleRegister(this,"mark"),this.model=t,n||this.handleChange(),!0)},n.rebound=function(t){var e;this.model&&(this.model.rebound?this.model.rebound(t):(e=li(this.template.y?this.template.y.containerFragment:this.containerFragment||this.up,this.template))!==this.model&&(this.model.unregister(this),this.bind(e)),t&&this.bubble()),this.fragment&&this.fragment.rebound(t)},n.unbind=function(){this.isStatic||(this.model&&this.model.unregister(this),this.model=void 0)},t}(Hh),Zi=ci.prototype=Object.create(Ca.prototype);Wi(Zi,$u.prototype,{constructor:ci});var dr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.bubble=function(){this.owner&&this.owner.bubble(),t.prototype.bubble.call(this)},n.detach=function(){return Be(this.node)},n.firstNode=function(){return this.node},n.getString=function(){return this.model?Ke(this.model.get()):""},n.render=function(t,e){var n;ru||(n=this.value=this.getString(),this.rendered=!0,hi(this,t,e,n))},n.toString=function(t){var e=this.getString();return t?dt(e):e},n.unrender=function(t){t&&this.detach(),this.rendered=!1},n.update=function(){var t;this.dirty&&(this.dirty=!1,this.rendered)&&((t=this.getString())!==this.value&&(this.node.data=this.value=t))},n.valueOf=function(){return this.model?this.model.get():void 0},e}($u),vh=function(n){function t(){n.apply(this,arguments)}n&&(t.__proto__=n);var e=t.prototype=Object.create(n&&n.prototype);return e.constructor=t,e.render=function(t,e){n.prototype.render.call(this,t,e),this.node.defaultValue=this.node.value},e.compare=function(t,e){var n=this.getAttribute("value-comparator");if(n){if(w(n))return n(t,e);if(t&&e)return t[n]==e[n]}return t==e},t}(Mu),qu={true:!0,false:!1,null:null,undefined:void 0},Hu=new RegExp("^(?:"+Ji(qu).join("|")+")"),Zu=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,Wu=/\$\{([^\}]+)\}/g,Gu=/^\$\{([^\}]+)\}/,Qu=/^\s*$/,Yu=$r.extend({init:function(t,e){this.values=e.values,this.sp()},postProcess:function(t){return 1===t.length&&Qu.test(this.leftover)?{value:t[0].v}:null},converters:[function(t){if(!t.values)return null;var e=t.matchPattern(Gu);return e&&v(t.values,e)?{v:t.values[e]}:void 0},function(t){t=t.matchPattern(Hu);return t?{v:qu[t]}:void 0},function(t){t=t.matchPattern(Zu);return t?{v:+t}:void 0},function(t){var e=mt(t),n=t.values;return e&&n?{v:e.v.replace(Wu,function(t,e){return e in n?n[e]:e})}:e},function(t){if(!t.matchString("{"))return null;var e,n={};if(t.sp(),t.matchString("}"))return{v:n};for(;e=function(t){t.sp();var e=yt(t);return e?(e={key:e},t.sp(),t.matchString(":")?(t.sp(),(t=t.read())?(e.value=t.v,e):null):null):null}(t);){if(n[e.key]=e.value,t.sp(),t.matchString("}"))return{v:n};if(!t.matchString(","))return null}return null},function(t){if(!t.matchString("["))return null;var e,n=[];if(t.sp(),t.matchString("]"))return{v:n};for(;e=t.read();){if(n.push(e.v),t.sp(),t.matchString("]"))return{v:n};if(!t.matchString(","))return null;t.sp()}return null}]}),Ju=function(e){function t(t){e.call(this,t),this.name=t.template.n,this.owner=t.owner||t.up.owner||t.element||Ae(t.up),this.element=t.element||(this.owner.attributeByName?this.owner:Ae(t.up)),this.up=this.element.up,this.ractive=this.up.ractive,(this.element.attributeByName[this.name]=this).value=t.template.f}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.bind=function(){var t,e,n,i,r=this.template.f,s=this.element.instance.viewmodel;0===r?s.joinKey(this.name).set(!0):A(r)?(e=di(r),s.joinKey(this.name).set(e?e.value:r)):tr(r)&&(n=(t=this).template.f,i=t.element.instance.viewmodel,s=i.value,1===n.length&&n[0].t===Hr?(r=(e=li(t.up,n[0])).get(!1),n[0].s?!y(r)||n[0].x?i.joinKey(S(t.name)).set(r):k("Cannot copy non-computed object value from static mapping '"+t.name+"'"):(t.model=e,t.link=i.createLink(t.name,e,n[0].r,{mapping:!0}),x(r)&&!e.isReadonly&&t.name in s&&e.set(s[t.name])),e!==t.model&&e.unregister()):(t.boundFragment=new Vl({owner:t,template:n}).bind(),t.model=i.joinKey(S(t.name)),t.model.set(t.boundFragment.valueOf()),t.boundFragment.bubble=function(){Vl.prototype.bubble.call(t.boundFragment),pa.scheduleTask(function(){t.boundFragment.update(),t.model.set(t.boundFragment.valueOf())})}))},n.rebound=function(t){this.boundFragment&&this.boundFragment.rebound(t),this.link&&(this.model=li(this.up,this.template.f[0]),this.element.instance.viewmodel.joinAll(S(this.name)).link(this.model,this.name,{mapping:!0}))},n.render=function(){},n.unbind=function(t){this.model&&this.model.unregister(this),this.boundFragment&&this.boundFragment.unbind(t),this.element.bound&&this.link.target===this.model&&this.link.owner.unlink()},n.unrender=function(){},n.update=function(){this.dirty&&(this.dirty=!1,this.boundFragment&&this.boundFragment.update())},t}(Hh),wa=function(n){function t(t){var e=t.template;e.a||(e.a={}),!x(e.a.value)||"disabled"in e.a||(e.a.value=e.f||""),n.call(this,t),this.select=Ae(this.parent||this.up,!1,"select")}n&&(t.__proto__=n);var e=t.prototype=Object.create(n&&n.prototype);return e.constructor=t,e.bind=function(){var t;this.select?((t=this.attributeByName.selected)&&void 0!==this.select.getAttribute("value")&&(t=this.attributes.indexOf(t),this.attributes.splice(t,1),delete this.attributeByName.selected),n.prototype.bind.call(this),this.select.options.push(this)):n.prototype.bind.call(this)},e.bubble=function(){var t=this.getAttribute("value");this.node&&this.node.value!==t&&(this.node._ractive.value=t),n.prototype.bubble.call(this)},e.getAttribute=function(t){var e=this.attributeByName[t];return e?e.getValue():"value"===t&&this.fragment?this.fragment.valueOf():void 0},e.isSelected=function(){var t=this.getAttribute("value");if(x(t)||!this.select)return!1;var e=this.select.getAttribute("value");if(this.select.compare(e,t))return!0;if(this.select.getAttribute("multiple")&&tr(e))for(var n=e.length;n--;)if(this.select.compare(e[n],t))return!0},e.render=function(t,e){n.prototype.render.call(this,t,e),this.attributeByName.value||(this.node._ractive.value=this.getAttribute("value"))},e.unbind=function(t){n.prototype.unbind.call(this,t),this.select&&j(this.select.options,this)},t}(Mu),va=pi.prototype=Gi(ci.prototype);Wi(va,{constructor:pi,bind:function(){var t,e=this.template;if(this.yielder){if(this.container=this.up.ractive,this.component=this.container.component,this.containerFragment=this.up,!this.component)return this.fragment=new Vl({owner:this,template:[]}),void this.fragment.bind();this.up=this.component.up,e.r||e.x||e.rx||(this.refName="content")}this.macro?this.fn=this.macro:(this.refName||(this.refName=e.r),this.refName&&gi(this,this.refName),this.partial||this.fn||(ci.prototype.bind.call(this),this.model&&gi(this,this.model.get()))),this.partial||this.fn||_("Could not find template for partial '"+this.name+"'"),e=(t=this).partial||[],t.partial=t.last=e,mi(t),e={owner:t,template:t.partial},t.yielder&&(e.ractive=t.container.parent),t.fn&&(e.cssIds=t.fn._cssIds),t.fragment=new Vl(e),this.fn&&yi(this),this.fragment.bind()},bubble:function(){this.dirty||(this.dirty=!0,(this.yielder?this.containerFragment:this.up).bubble())},findNextNode:function(){return(this.containerFragment||this.up).findNextNode(this)},handleChange:function(){this.dirtyTemplate=!0,this.externalChange=!0,this.bubble()},rebound:function(e){var n=this;this._attrs&&Ji(this._attrs).forEach(function(t){return n._attrs[t].rebound(e)}),ci.prototype.rebound.call(this,e)},refreshAttrs:function(){var e=this;Ji(this._attrs).forEach(function(t){e.handle.attributes[t]=!e._attrs[t].items.length||e._attrs[t].valueOf()})},resetTemplate:function(){var t=this;if(this.fn&&this.proxy){if(this.last=0,!this.externalChange)return this.partial=this.fnTemplate,!0;w(this.proxy.teardown)&&this.proxy.teardown(),this.fn=this.proxy=null}if(this.partial=null,this.refName&&(this.partial=fi(this.ractive,this.refName,this.up)),!this.partial&&this.model&&gi(this,this.model.get()),!this.fn){if(this.last&&this.partial===this.last)return!1;this.partial&&(this.last=this.partial,mi(this))}return this.unbindAttrs(),this.fn?(yi(this),w(this.proxy.render)&&pa.scheduleTask(function(){return t.proxy.render()})):this.partial||_("Could not find template for partial '"+this.name+"'"),!0},render:function(t,e){this.fn&&this.fn._cssDef&&!this.fn._cssDef.applied&&Ze(),this.fragment.render(t,e),this.proxy&&w(this.proxy.render)&&this.proxy.render()},unbind:function(t){this.fragment.unbind(t),this.unbindAttrs(t),ci.prototype.unbind.call(this,t)},unbindAttrs:function(e){var n=this;this._attrs&&Ji(this._attrs).forEach(function(t){n._attrs[t].unbind(e)})},unrender:function(t){this.proxy&&w(this.proxy.teardown)&&this.proxy.teardown(),this.fragment.unrender(t)},update:function(){var e=this,t=this.proxy;this.updating=1,this.dirtyAttrs&&(this.dirtyAttrs=!1,Ji(this._attrs).forEach(function(t){return e._attrs[t].update()}),this.refreshAttrs(),w(t.update)&&t.update(this.handle.attributes)),this.dirtyTemplate&&(this.dirtyTemplate=!1,this.resetTemplate()&&this.fragment.resetTemplate(this.partial||[])),this.dirty&&(this.dirty=!1,t&&w(t.invalidate)&&t.invalidate(),this.fragment.update()),this.externalChange=!1,this.updating=0}});function Xu(t,e,n){this.value=this.key=t,this.context=e,this.isReadonly=this.isKey=!0,this.deps=[],this.links=[],this.children=[],this.instance=n}var tl="extra-attributes",ph=Xu.prototype;ph.applyValue=function(t){t!==this.value&&(this.value=this.key=t,this.deps.forEach(H),this.links.forEach(H),this.children.forEach(function(t){t.applyValue(t.context.getKeypath(t.instance))}))},ph.destroyed=function(){this.upstream&&this.upstream.unregisterChild(this)},ph.get=function(t){return t&&U(this),g(this.value)},ph.getKeypath=function(){return g(this.value)},ph.has=function(){return!1},ph.rebind=function(t,e){for(var n=this.deps.length;n--;)this.deps[n].rebind(t,e,!1);for(n=this.links.length;n--;)this.links[n].relinking(t,!1)},ph.register=function(t){this.deps.push(t)},ph.registerChild=function(t){C(this.children,t),t.upstream=this},ph.registerLink=function(t){C(this.links,t)},ph.unregister=function(t){j(this.deps,t)},ph.unregisterChild=function(t){j(this.children,t)},ph.unregisterLink=function(t){j(this.links,t)},Xu.prototype.reference=a,Xu.prototype.unreference=a;function el(t){this.parent=t.owner.up,(this.up=this).owner=t.owner,this.ractive=this.parent.ractive,this.delegate=!1!==this.ractive.delegate&&(this.parent.delegate||function(t){var e,n,i=t;t:for(;i;){for(n=0;!n&&i;){if(i.owner.type===Yr&&(n=i.owner),i.owner.ractive&&!1===i.owner.ractive.delegate)break t;i=i.parent||i.componentParent}if(!1===n.delegate)break t;for(e=n.delegate||n;i&&!i.iterations;){if(i.owner.ractive&&!1===i.owner.ractive.delegate)break t;i=i.parent||i.componentParent}}return e}(this.parent)),this.delegate&&!1===this.delegate.delegate&&(this.delegate=!1),this.delegate&&(this.delegate.delegate=this.delegate),this.cssIds="cssIds"in t?t.cssIds:this.parent?this.parent.cssIds:null,this.context=null,this.rendered=!1,this.iterations=[],this.template=t.template,this.indexRef=t.indexRef,this.keyRef=t.keyRef,this.pendingNewIndices=null,this.previousIterations=null,this.isArray=!1}var nl=/^"(\\"|[^"])+"$/,Ca=el.prototype;Ca.bind=function(t){var n=this;this.context=t,this.bound=!0;var e=t.get(),i=this.aliases=this.owner.template.z&&this.owner.template.z.slice(),r=i&&i.find(function(t){return"shuffle"===t.n});r&&r.x&&r.x.x&&("true"===r.x.x.s?this.shuffler=!0:nl.test(r.x.x.s)&&(this.shuffler=S(r.x.x.s.slice(1,-1)))),this.shuffler&&(this.values=xi(this,this.shuffler)),this.source&&this.source.model.unbind(this.source);var s,i=t.isComputed&&i&&i.find(function(t){return"source"===t.n});if(i&&i.x&&i.x.r&&(s=li(this,i.x),this.source={handleChange:function(){},rebind:function(t){this.model.unregister(this),(this.model=t).register(this)}},(this.source.model=s).register(this.source)),this.isArray=tr(e)){this.iterations=[];for(var o=this.length=e.length,a=0;a<o;a+=1)n.iterations[a]=n.createIteration(a,a)}else b(e)&&(this.isArray=!1,this.indexRef&&(s=this.indexRef.split(","),this.keyRef=s[0],this.indexRef=s[1]),e=Ji(e),this.length=e.length,this.iterations=e.map(function(t,e){return n.createIteration(t,e)}));return this},Ca.bubble=function(t){this.bubbled||(this.bubbled=[]),this.bubbled.push(t),this.rebounding||this.owner.bubble()},Ca.createIteration=function(t,e){var n=new Vl({owner:this,template:this.template});return n.isIteration=!0,n.delegate=this.delegate,this.aliases&&(n.aliases={}),wi(this,n,t,e),n.bind(n.context)},Ca.destroyed=function(){for(var t=this.iterations.length,e=0;e<t;e++)this.iterations[e].destroyed();this.pathModel&&this.pathModel.destroyed(),this.rootModel&&this.rootModel.destroyed()},Ca.detach=function(){var e=Ie();return this.iterations.forEach(function(t){return e.appendChild(t.detach())}),e},Ca.find=function(e,n){return P(this.iterations,function(t){return t.find(e,n)})},Ca.findAll=function(e,n){return this.iterations.forEach(function(t){return t.findAll(e,n)})},Ca.findAllComponents=function(e,n){return this.iterations.forEach(function(t){return t.findAllComponents(e,n)})},Ca.findComponent=function(e,n){return P(this.iterations,function(t){return t.findComponent(e,n)})},Ca.findContext=function(){return this.context},Ca.findNextNode=function(t){if(t.index<this.iterations.length-1)for(var e=t.index+1;e<this.iterations.length;e++){var n=this.iterations[e].firstNode(!0);if(n)return n}return this.owner.findNextNode()},Ca.firstNode=function(t){return this.iterations[0]?this.iterations[0].firstNode(t):null},Ca.getLast=function(){return this.lastModel||(this.lastModel=new Xu(this.length-1))},Ca.rebind=function(t){var e=this;this.context=t,this.source||t&&this.iterations.forEach(function(t){wi(e,t,t.key,t.index)})},Ca.rebound=function(n){var i=this;this.context=this.owner.model,this.iterations.forEach(function(t,e){t.context=ki(i,0,e),t.rebound(n)})},Ca.render=function(t,e){var n=this.iterations;if(n)for(var i=n.length,r=0;r<i;r++)n[r].render(t,e);this.rendered=!0},Ca.shuffle=function(t,i){var r=this;this.pendingNewIndices||(this.previousIterations=this.iterations.slice()),this.pendingNewIndices||(this.pendingNewIndices=[]),this.pendingNewIndices.push(t);var s=[];t.forEach(function(t,e){var n;-1!==t&&(n=r.iterations[e],s[t]=n,t!==e&&n&&(n.dirty=!0,i&&(n.shouldRebind=1)))}),this.iterations=s,i||this.bubble()},Ca.shuffled=function(){this.iterations.forEach(Y)},Ca.toString=function(t){return this.iterations?this.iterations.map(t?it:nt).join(""):""},Ca.unbind=function(t){this.bound=!1,this.source&&this.source.model.unregister(this.source);for(var e=this.pendingNewIndices?this.previousIterations:this.iterations,n=e.length,i=0;i<n;i++)e[i].unbind(t);return this},Ca.unrender=function(t){for(var e=this.iterations.length,n=0;n<e;n++)this.iterations[n].unrender(t);if(this.pendingNewIndices&&this.previousIterations)for(var e=this.previousIterations.length,i=0;i<e;i++)this.previousIterations[i].unrender(t);this.rendered=!1},Ca.update=function(){var n=this;if(this.pendingNewIndices)return this.bubbled.length=0,void this.updatePostShuffle();if(!this.updating){if(this.updating=!0,this.shuffler){var t=xi(this,this.shuffler),e=M(this.values,t);e.same?this.iterations.forEach(et):(this.shuffle(e,!0),this.updatePostShuffle())}else{for(var i=this.iterations.length,r=0;r<i;r++){var s=n.iterations[r];s&&s.idxModel&&s.idxModel.applyValue(r)}var o,a,h,u=this.context.get(),t=this.isArray,e=!0;if(this.isArray=tr(u))this.source&&(this.rebounding=1,h=this.source.model.get(),this.iterations.forEach(function(t,e){e<u.length&&t.lastValue!==u[e]&&~(y=h.indexOf(u[e]))&&(wi(n,t,e,e),t.rebound(!0))}),this.rebounding=0),t&&(e=!1,this.iterations.length>u.length&&(o=this.iterations.splice(u.length)));else if(b(u)&&!t)for(e=!1,o=[],a={},y=this.iterations.length;y--;){var l=n.iterations[y];l.key in u?a[l.key]=!0:(n.iterations.splice(y,1),o.push(l))}var c,t=tr(u)?u.length:b(u)?Ji(u).length:0;if(this.length=t,this.updateLast(),e&&(o=this.iterations,this.iterations=[]),o)for(var i=o.length,d=0;d<i;d++)o[d].unbind().unrender(!0);if(!e&&this.isArray&&this.bubbled&&this.bubbled.length){var f=this.bubbled;this.bubbled=[],i=f.length;for(var p=0;p<i;p++)n.iterations[f[p]]&&n.iterations[f[p]].update()}else{i=this.iterations.length;for(var m=0;m<i;m++)n.iterations[m].update()}if(t>this.iterations.length){var g,v=this.rendered?Ie():null,y=this.iterations.length;if(tr(u))for(;y<u.length;)c=n.createIteration(y,y),n.iterations.push(c),n.rendered&&c.render(v),y+=1;else b(u)&&(this.indexRef&&!this.keyRef&&(g=this.indexRef.split(","),this.keyRef=g[0],this.indexRef=g[1]),Ji(u).forEach(function(t){a&&t in a||(c=n.createIteration(t,y),n.iterations.push(c),n.rendered&&c.render(v),y+=1)}));this.rendered&&(t=this.parent.findParentNode(),g=this.parent.findNextNode(this.owner),t.insertBefore(v,g))}}this.updating=!1}},Ca.updateLast=function(){this.lastModel&&this.lastModel.applyValue(this.length-1)},Ca.updatePostShuffle=function(){var i=this.pendingNewIndices[0],t=this.rendered?this.parent.findParentNode():null,e=t&&this.owner.findNextNode(),n=t?Ie():null;this.pendingNewIndices.slice(1).forEach(function(n){i.forEach(function(t,e){i[e]=n[t]})});var r,s,o,a,h,u,l=this.length=this.context.get().length,c=this.previousIterations,d=this.iterations,f=this.context.get(),p={},m=new Array(i.length);for(i.forEach(function(t,e){return m[t]=e}),this.updateLast(),r=o=0;r<l;)x(m[r])?(a=d[r]=this.createIteration(r,r),t&&(h=(h=c[o])&&t&&h.firstNode()||e,a.render(n),t.insertBefore(n,h)),r++):(-1===(s=i[o])?(c[o]&&c[o].unbind().unrender(!0),c[o++]=0):r<s?(p[s]=c[o],c[o++]=null):(d[r]=a=d[r]||p[r]||this.createIteration(r,r),!p[r]&&o===r||(u=this.source&&a.lastValue!==f[r],wi(this,a,r,r)),!t||!p[r]&&c[o]||(h=(h=c[o+1])&&t&&h.firstNode()||e,p[r]?t.insertBefore(a.detach(),h):(a.render(n),t.insertBefore(n,h))),c[o++]=0,r++),a&&y(a)&&((a.shouldRebind||u)&&(a.rebound(u),a.shouldRebind=0),a.update(),a.shuffled()));for(var g=c.length,v=0;v<g;v++)c[v]&&c[v].unbind().unrender(!0);this.shuffler&&(this.values=xi(this,this.shuffler)),this.pendingNewIndices=null,this.previousIterations=null},el.prototype.getContext=ae,el.prototype.getKeypath=Vi;var Zi=function(i){function t(t){i.call(this,t),this.isAlias=19===t.template.t,this.sectionType=t.template.n||this.isAlias&&ks||null,this.templateSectionType=this.sectionType,this.subordinate=1===t.template.l,this.fragment=null}i&&(t.__proto__=i);var e=t.prototype=Object.create(i&&i.prototype);return e.constructor=t,e.bind=function(){i.prototype.bind.call(this),this.subordinate&&(this.sibling=this.up.items[this.up.items.indexOf(this)-1],this.sibling.nextSibling=this),this.model||this.isAlias?(this.dirty=!0,this.update()):!this.sectionType||51!==this.sectionType||this.sibling&&this.sibling.isTruthy()||(this.fragment=new Vl({owner:this,template:this.template.f}).bind())},e.bubble=function(){!this.dirty&&this.yield?(this.dirty=!0,this.containerFragment.bubble()):i.prototype.bubble.call(this)},e.detach=function(){var t=this.fragment||this.detached;return t?t.detach():i.prototype.detach.call(this)},e.findNextNode=function(){return(this.containerFragment||this.up).findNextNode(this)},e.isTruthy=function(){if(this.subordinate&&this.sibling.isTruthy())return!0;var t=this.model?this.model.isRoot?this.model.value:this.model.get():void 0;return!(!t||54!==this.templateSectionType&&(!(t=t)||tr(t)&&0===t.length||b(t)&&0===Ji(t).length))},e.rebind=function(t,e,n){i.prototype.rebind.call(this,t,e,n)&&this.fragment&&50!==this.sectionType&&51!==this.sectionType&&this.fragment.rebind(t)},e.rebound=function(t){this.model&&(this.model.rebound?this.model.rebound(t):(i.prototype.unbind.call(this),i.prototype.bind.call(this),this.sectionType!==ks&&54!==this.sectionType&&52!==this.sectionType||!this.fragment||this.fragment.rebind(this.model),t&&this.bubble())),this.fragment&&this.fragment.rebound(t)},e.render=function(t,e){this.rendered=!0,this.fragment&&this.fragment.render(t,e)},e.shuffle=function(t){this.fragment&&52===this.sectionType&&this.fragment.shuffle(t)},e.unbind=function(t){i.prototype.unbind.call(this,t),this.fragment&&this.fragment.unbind(t)},e.unrender=function(t){this.rendered&&this.fragment&&this.fragment.unrender(t),this.rendered=!1},e.update=function(){var t,e,n,i,r,s=this;this.dirty&&(this.fragment&&50!==this.sectionType&&51!==this.sectionType&&(this.fragment.context=this.model),this.model||51===this.sectionType||this.isAlias)&&(this.dirty=!1,t=this.model?this.model.isRoot?this.model.value:this.model.get():void 0,e=!this.subordinate||!this.sibling.isTruthy(),n=this.sectionType,this.yield&&this.yield!==t?(this.up=this.containerFragment,this.container=null,this.yield=null,this.rendered&&this.fragment.unbind().unrender(!0),this.fragment=null):this.rendered&&!this.yield&&t instanceof Da&&(this.rendered&&this.fragment&&this.fragment.unbind().unrender(!0),this.fragment=null),null!==this.sectionType&&null!==this.templateSectionType||(this.sectionType=(r=t,this.template.i||tr(r)?52:u(r)?54:x(r)?null:50)),n&&n!==this.sectionType&&this.fragment&&(this.rendered&&this.fragment.unbind().unrender(!0),this.fragment=null),52===this.sectionType||this.sectionType===ks||e&&(51===this.sectionType?!this.isTruthy():this.isTruthy())||this.isAlias?(this.fragment||(this.fragment=this.detached),this.fragment?(this.detached&&(_i(this,this.fragment),this.detached=!1,this.rendered=!0),this.fragment.bound||this.fragment.bind(this.model),this.fragment.update()):i=52===this.sectionType?new el({owner:this,template:this.template.f,indexRef:this.template.i}).bind(this.model):(i=50!==this.sectionType&&51!==this.sectionType?this.model:null,t instanceof Da&&(this.yield=t,this.containerFragment=this.up,this.up=t.fragment,this.container=t.ractive,i=void 0),new Vl({owner:this,template:this.template.f}).bind(i))):(this.fragment&&this.rendered?!0!==Na?this.fragment.unbind().unrender(!0):(this.unrender(!1),this.detached=this.fragment,pa.promise().then(function(){s.detached&&s.detach()})):this.fragment&&this.fragment.unbind(),this.fragment=null),i&&(this.rendered&&_i(this,i),this.fragment=i),this.nextSibling&&(this.nextSibling.dirty=!0,this.nextSibling.update()))},t}(ci),va=function(r){function t(t){r.call(this,t),this.options=[]}r&&(t.__proto__=r);var e=t.prototype=Object.create(r&&r.prototype);return e.constructor=t,e.foundNode=function(t){!this.binding||0<(t=Yn(t)).length&&(this.selectedOptions=t)},e.render=function(t,e){r.prototype.render.call(this,t,e),this.sync();for(var n=this.node,i=n.options.length;i--;)n.options[i].defaultSelected=n.options[i].selected;this.rendered=!0},e.sync=function(){var n=this,t=this.node;if(t){var e=V(t.options);if(this.selectedOptions)return e.forEach(function(t){0<=n.selectedOptions.indexOf(t)?t.selected=!0:t.selected=!1}),this.binding.setFromNode(t),void delete this.selectedOptions;var i,r=this.getAttribute("value"),s=this.getAttribute("multiple"),o=s&&tr(r);void 0!==r?(e.forEach(function(t){var e=(t._ractive||t).value,e=s?o&&n.valueContains(r,e):n.compare(r,e);e&&(i=!0),t.selected=e}),i||s||this.binding&&this.binding.forceUpdate()):this.binding&&this.binding.forceUpdate&&this.binding.forceUpdate()}},e.valueContains=function(t,e){for(var n=t.length;n--;)if(this.compare(e,t[n]))return!0},e.compare=function(t,e){var n=this.getAttribute("value-comparator");if(n){if(w(n))return n(e,t);if(e&&t)return e[n]==t[n]}return e==t},e.update=function(){var t=this.dirty;r.prototype.update.call(this),t&&this.sync()},t}(Mu),ph=function(n){function t(t){var e=t.template;t.deferContent=!0,n.call(this,t),this.attributeByName.value||(e.f&&Xn({template:e})?(this.attributes||(this.attributes=[])).push(ji({owner:this,template:{t:ns,f:e.f,n:"value"},up:this.up})):this.fragment=new Vl({owner:this,cssIds:null,template:e.f}))}n&&(t.__proto__=n);var e=t.prototype=Object.create(n&&n.prototype);return e.constructor=t,e.bubble=function(){var t=this;this.dirty||(this.dirty=!0,this.rendered&&!this.binding&&this.fragment&&pa.scheduleTask(function(){t.dirty=!1,t.node.value=t.fragment.toString()}),this.up.bubble())},t}(vh),il=function(e){function t(t){e.call(this,t),this.type=1}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.detach=function(){return Be(this.node)},n.firstNode=function(){return this.node},n.render=function(t,e){ru||(this.rendered=!0,hi(this,t,e,this.template))},n.toString=function(t){return t?dt(this.template):this.template},n.unrender=function(t){this.rendered&&t&&this.detach(),this.rendered=!1},n.valueOf=function(){return this.template},t}(Hh),Ca=il.prototype;Ca.bind=Ca.unbind=Ca.update=a;var rl,sl,ol,al,hl="hidden";if(lr){if(hl in lr)sl="";else for(var ul=mr.length;ul--;){var ll=mr[ul];if((hl=ll+"Hidden")in lr){sl=ll;break}}void 0!==sl?(lr.addEventListener(sl+"visibilitychange",Ei),Ei()):("onfocusout"in lr?(lr.addEventListener("focusout",Si),lr.addEventListener("focusin",Ai)):(ur.addEventListener("pagehide",Si),ur.addEventListener("blur",Si),ur.addEventListener("pageshow",Ai),ur.addEventListener("focus",Ai)),rl=!0)}function cl(t){this.owner=t.owner||t.up.owner||Ae(t.up),this.element=this.owner.attributeByName?this.owner:Ae(t.up),this.ractive=this.owner.ractive,this.template=t.template,this.up=t.up,this.options=t,this.onComplete=[]}var dl,fl,pl,ml,gl,vl,yl,bl,wl=cr?(ol={},al=dh("div").style,function(t){if(!ol[t]){var e=qt(t);if(void 0!==al[t])ol[t]=e;else for(var n=mr.length;n--;){var i="-"+mr[n]+"-"+e;if(void 0!==al[i]){ol[t]=i;break}}}return ol[t]}):null,xl=new RegExp("^(?:"+mr.join("|")+")([A-Z])"),kl=cr?(cr=dh("div").style,gl=function(t){return t},vl={},yl={},bl=void 0!==cr.transition?(kl="transition",dl="transitionend",!0):void 0!==cr.webkitTransition&&(kl="webkitTransition",dl="webkitTransitionEnd",!0),kl&&(fl=kl+"Duration",pl=kl+"Property",ml=kl+"TimingFunction"),function(p,m,g,v,s){setTimeout(function(){function t(){clearTimeout(n)}function a(){u&&l&&(p.unregisterCompleteHandler(t),p.ractive.fire(p.name+":end",p.node,p.isIntro),s())}function h(t){t.target===p.node&&(-1!==(t=v.indexOf(t.propertyName))&&v.splice(t,1),v.length||(clearTimeout(n),e()))}function e(){d[pl]=i.property,d[ml]=i.duration,d[fl]=i.timing,p.node.removeEventListener(dl,h,!1),l=!0,a()}var u,l,n,c=(p.node.namespaceURI||"")+p.node.tagName,d=p.node.style,i={property:d[pl],timing:d[ml],duration:d[fl]};p.node.addEventListener(dl,h,!1),n=setTimeout(function(){v=[],e()},g.duration+(g.delay||0)+50),p.registerCompleteHandler(t),d[pl]=v.join(",");var r,r=(r=g.easing||"linear")?(r=xl.test(r)?"-"+r:r).replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()}):"";d[ml]=r;var f=d[ml]===r;d[fl]=g.duration/1e3+"s",setTimeout(function(){for(var t,e=v.length,n=null,i=[];e--;){var r,s=v[e],o=c+s;f&&bl&&!yl[o]&&(r=d[s],d[s]=m[s],o in vl||(n=p.getStyle(s),vl[o]=p.getStyle(s)!=m[s],yl[o]=!vl[o],yl[o]&&(d[s]=r))),f&&bl&&!yl[o]||(null===n&&(n=p.getStyle(s)),-1===(r=v.indexOf(s))?k("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{node:p.node}):v.splice(r,1),o=/[^\d]*$/.exec(n)[0],(r=E(parseFloat(n),parseFloat(m[s])))?i.push({name:s,interpolator:r,suffix:o}):d[s]=m[s],n=null)}i.length?(A(g.easing)?(t=p.ractive.easing[g.easing])||(_(_r(g.easing,"easing")),t=gl):t=w(g.easing)?g.easing:gl,new da({duration:g.duration,easing:t,step:function(t){for(var e=i.length;e--;){var n=i[e];d[n.name]=n.interpolator(t)+n.suffix}},complete:function(){u=!0,a()}})):u=!0,v.length?d[pl]=v.join(","):(d[pl]="none",p.node.removeEventListener(dl,h,!1),l=!0,a())},0)},g.delay||0)}):null,_l=kl,El=ur&&ur.getComputedStyle,Sl=Promise.resolve(),Al={t0:"intro-outro",t1:"intro",t2:"outro"},kl=cl.prototype;kl.animateStyle=function(t,e,u){var l,c=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");return rl?(A(t)?(l={})[t]=e:(l=t,u=e),new Promise(function(t){if(!u.duration)return c.setStyle(l),void t();for(var e=Ji(l),n=[],i=El(c.node),r=e.length;r--;){var s=e[r],o=wl(s),a=i[wl(s)],h=c.node.style[o];o in c.originals||(c.originals[o]=c.node.style[o]),c.node.style[o]=l[s],c.targets[o]=c.node.style[o],c.node.style[o]=h,a!=l[s]&&(n.push(o),l[o]=l[s],c.node.style[o]=a)}return n.length?void _l(c,l,u,n,t):void t()})):(this.setStyle(t,e),Sl)},kl.bind=function(){var t=this.options,e=t.template&&t.template.v;e&&("t0"!==e&&"t1"!==e||(this.element.intro=this),"t0"!==e&&"t2"!==e||(this.element.outro=this),this.eventName=Al[e]);e=this.owner.ractive;this.name=t.name||t.template.n,t.params&&(this.params=t.params),w(this.name)?(this._fn=this.name,this.name=this._fn.name):this._fn=d("transitions",e,this.name),this._fn||_(_r(this.name,"transition"),{ractive:e}),qn(this,t.template)},kl.getParams=function(){if(this.params)return this.params;if(this.fn){var t=Hn(0,this.template,this.up).map(function(t){return t?t.get():void 0});return this.fn.apply(this.ractive,t)}},kl.getStyle=function(t){var e=El(this.node);if(A(t))return e[wl(t)];if(!tr(t))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(var n={},i=t.length;i--;){var r=t[i],s=e[wl(r)];"0px"===s&&(s=0),n[r]=s}return n},kl.processParams=function(t,e){return t=l(t)?{duration:t}:A(t)?"slow"===t?{duration:600}:"fast"===t?{duration:200}:{duration:400}:t||{},Wi({},e,t)},kl.registerCompleteHandler=function(t){C(this.onComplete,t)},kl.setStyle=function(t,e){if(A(t)){var n=wl(t);v(this.originals,n)||(this.originals[n]=this.node.style[n]),this.node.style[n]=e,this.targets[n]=this.node.style[n]}else for(var i in t)v(t,i)&&this.setStyle(i,t[i]);return this},kl.shouldFire=function(t){if(!this.ractive.transitionsEnabled)return!1;if("intro"===t&&this.ractive.rendering&&Ci("noIntro",this.ractive,!0))return!1;if("outro"===t&&this.ractive.unrendering&&Ci("noOutro",this.ractive,!1))return!1;var e=this.getParams();if(!this.element.parent)return!0;if(e&&e[0]&&b(e[0])&&"nested"in e[0]){if(!1!==e[0].nested)return!0}else if(!1!==Ci("nestedTransitions",this.ractive))return!0;for(var n=this.element.parent;n;){if(n[t]&&n[t].starting)return!1;n=n.parent}return!0},kl.start=function(){var n,i=this,r=this.node=this.element.node,s=this.originals={},o=this.targets={},t=this.getParams();this.complete=function(t){if(i.starting=!1,!n){if(i.onComplete.forEach(function(t){return t()}),!t&&i.isIntro)for(var e in o)r.style[e]===o[e]&&(r.style[e]=s[e]);i._manager.remove(i),n=!0}},this._fn?(t=this._fn.apply(this.ractive,[this].concat(t)))&&t.then(this.complete):this.complete()},kl.toString=function(){return""},kl.unbind=function(){var t;this.element.attributes&&this.element.attributes.unbinding||("t0"!==(t=this.options&&this.options.template&&this.options.template.v)&&"t1"!==t||(this.element.intro=null),"t0"!==t&&"t2"!==t||(this.element.outro=null))},kl.unregisterCompleteHandler=function(t){j(this.onComplete,t)};kl=cl.prototype;kl.destroyed=kl.firstNode=kl.rebound=kl.render=kl.unrender=kl.update=a;var Cl,Ol,Nl={};try{dh("table").innerHTML="foo"}catch(t){Cl=!0,Ol={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var kl=function(e){function t(t){e.call(this,t)}e&&(t.__proto__=e);var n=t.prototype=Object.create(e&&e.prototype);return n.constructor=t,n.detach=function(){var e=Ie();return this.nodes&&this.nodes.forEach(function(t){return e.appendChild(t)}),e},n.find=function(t){for(var e=this.nodes.length,n=0;n<e;n+=1){var i=this.nodes[n];if(1===i.nodeType){if(Xa(i,t))return i;i=i.querySelector(t);if(i)return i}}return null},n.findAll=function(t,e){for(var n=e.result,i=this.nodes.length,r=0;r<i;r+=1){var s=this.nodes[r];1===s.nodeType&&(Xa(s,t)&&n.push(s),(s=s.querySelectorAll(t))&&n.push.apply(n,s))}},n.findComponent=function(){return null},n.firstNode=function(){return this.rendered&&this.nodes[0]},n.render=function(t,e,n){this.nodes||(r=this.model?this.model.get():"",this.nodes=function(t,e){var n,i,r,s,o,a=[];if(null==t||""===t)return a;for(Cl&&(i=Ol[e.tagName])?((n=Oi("DIV")).innerHTML=i[0]+t+i[1],"SELECT"===(n=n.querySelector(".x")).tagName&&(r=n.options[n.selectedIndex])):e.namespaceURI===uh?((n=Oi("DIV")).innerHTML='<svg class="x">'+t+"</svg>",n=n.querySelector(".x")):"TEXTAREA"===e.tagName?void 0!==(n=dh("div")).textContent?n.textContent=t:n.innerHTML=t:((n=Oi(e.tagName)).innerHTML=t,"SELECT"===n.tagName&&(r=n.options[n.selectedIndex]));s=n.firstChild;)a.push(s),n.removeChild(s);if("SELECT"===e.tagName)for(o=a.length;o--;)a[o]!==r&&(a[o].selected=!1);return a}(r,t));var i,r=this.nodes;if(e){for(var s,o=-1;e.length&&(s=this.nodes[o+1]);)for(var a;a=e.shift();){var h=a.nodeType;if(h===s.nodeType&&(1===h&&a.outerHTML===s.outerHTML||(3===h||8===h)&&a.nodeValue===s.nodeValue)){this.nodes.splice(++o,1,a);break}t.removeChild(a)}0<=o&&(r=this.nodes.slice(o)),e.length&&(n=e[0])}r.length&&(i=Ie(),r.forEach(function(t){return i.appendChild(t)}),n?t.insertBefore(i,n):t.appendChild(i)),this.rendered=!0},n.toString=function(){var t=null!=(t=this.model&&this.model.get())?""+t:"";return au?ct(t):t},n.unrender=function(){this.nodes&&this.nodes.forEach(function(t){pa.detachWhenReady({node:t,detach:function(){Be(t)}})}),this.rendered=!1,this.nodes=null},n.update=function(){this.rendered&&this.dirty?(this.dirty=!1,this.unrender(),this.render(this.up.findParentNode(),null,this.up.findNextNode(this))):this.dirty=!1},t}($u),jl={};jl[19]=Zi,jl[es]=mu,jl[55]=function(t){var e=t.template,i=Ni(e,62,"value"),r=Ni(e,63,"error"),s=Ni(e,Wr),o=Ni(e,60);return(e=Wi({},t,{template:{t:Yr,m:[{t:ns,n:"for",f:[{t:Hr,r:e.r,rx:e.rx,x:e.x}]}]},macro:function(e,t){function n(t){t.for&&w(t.for.then)?(e.setTemplate(s),t.for.then(function(t){e.set("@local.value",t),e.setTemplate(i)},function(t){e.set("@local.error",t),e.setTemplate(r)})):x(t.for)?e.setTemplate(o):(e.set("@local.value",t.for),e.setTemplate(i))}return e.aliasLocal("__await"),n(t),{update:n}}})).macro.attributes=["for"],new pi(e)},jl[18]=Ba,jl[Hr]=dr,jl[Jr]=pi,jl[Wr]=Zi,jl[Zr]=kl,jl[ss]=pi,jl[ns]=hu,jl[As]=Ka,jl[Es]=Mr,jl[_s]=Ya,jl[Ss]=cl,jl[Xr]=Rn;var Tl={doctype:Ba,form:Ja,input:vh,option:wa,select:va,textarea:ph},Vl=function(t){this.owner=t.owner,this.isRoot=!t.owner.up,this.parent=this.isRoot?null:this.owner.up,this.ractive=t.ractive||(this.isRoot?t.owner:this.parent.ractive),this.componentParent=this.isRoot&&this.ractive.component?this.ractive.component.up:this.owner.containerFragment||null,!this.isRoot||this.ractive.delegate?this.delegate=this.owner.containerFragment?this.owner.containerFragment&&this.owner.containerFragment.delegate:this.componentParent&&this.componentParent.delegate||this.parent&&this.parent.delegate:this.delegate=!1,this.context=null,this.rendered=!1,"cssIds"in t?this.cssIds=t.cssIds&&t.cssIds.length&&t.cssIds:this.cssIds=this.parent?this.parent.cssIds:null,this.dirty=!1,this.dirtyValue=!0,this.template=t.template||[],this.createItems()},ph=Vl.prototype;ph.bind=function(t){this.context=t,this.owner.template.z&&(this.aliases=Ti(this.owner.template.z,this.owner.containerFragment||this.parent));for(var e=this.items.length,n=0;n<e;n++)this.items[n].bind();return this.bound=!0,this.dirty&&this.update(),this},ph.bubble=function(){this.dirtyValue=!0,this.dirty||(this.dirty=!0,this.isRoot?this.ractive.component?this.ractive.component.bubble():this.bound&&pa.addFragment(this):this.owner.bubble(this.index))},ph.createItems=function(){var t=this.template.length;this.items=[];for(var e=0;e<t;e++)this.items[e]=ji({up:this,template:this.template[e],index:e})},ph.destroyed=function(){for(var t=this.items.length,e=0;e<t;e++)this.items[e].destroyed();this.pathModel&&this.pathModel.destroyed(),this.rootModel&&this.rootModel.destroyed()},ph.detach=function(){for(var t=Ie(),e=this.items,n=e.length,i=0;i<n;i++)t.appendChild(e[i].detach());return t},ph.find=function(e,n){return P(this.items,function(t){return t.find(e,n)})},ph.findAll=function(e,n){this.items&&this.items.forEach(function(t){return t.findAll&&t.findAll(e,n)})},ph.findComponent=function(e,n){return P(this.items,function(t){return t.findComponent(e,n)})},ph.findAllComponents=function(e,n){this.items&&this.items.forEach(function(t){return t.findAllComponents&&t.findAllComponents(e,n)})},ph.findContext=function(){var t=he(this);return t&&t.context?t.context:this.ractive.viewmodel},ph.findNextNode=function(t){if(t)for(var e=t.index+1;e<this.items.length;e++)if((n=this.items[e])&&n.firstNode){var n=n.firstNode(!0);if(n)return n}return this.isRoot?this.ractive.component?this.ractive.component.up.findNextNode(this.ractive.component):null:this.parent?this.owner.findNextNode(this):void 0},ph.findParentNode=function(){var t=this;do{if(t.owner.type===Yr)return t.owner.node;if(t.isRoot&&!t.ractive.component)return t.ractive.el}while(t=t.owner.type===ss?t.owner.containerFragment:t.componentParent||t.parent);throw new Error("Could not find parent node")},ph.firstNode=function(t){var e=P(this.items,function(t){return t.firstNode(!0)});return e||(t?null:this.parent.findNextNode(this.owner))},ph.getKey=function(){return this.keyModel||(this.keyModel=new Xu(this.key))},ph.getIndex=function(){return this.idxModel||(this.idxModel=new Xu(this.index))},ph.rebind=function(t){this.context=t,this.rootModel&&(this.rootModel.context=this.context),this.pathModel&&(this.pathModel.context=this.context)},ph.rebound=function(e){if(this.owner.template.z){var t,n=this.aliases;for(t in n)n[t].rebound?n[t].rebound(e):(n[t].unreference(),n[t]=0);Ti(this.owner.template.z,this.owner.containerFragment||this.parent,n)}this.items.forEach(function(t){return t.rebound(e)}),e&&(this.rootModel&&this.rootModel.applyValue(this.context.getKeypath(this.ractive.root)),this.pathModel&&this.pathModel.applyValue(this.context.getKeypath()))},ph.render=function(t,e){if(this.rendered)throw new Error("Fragment is already rendered!");this.rendered=!0;for(var n=this.items,i=n.length,r=0;r<i;r++)n[r].render(t,e)},ph.resetTemplate=function(t){var e=this.bound,n=this.rendered;e&&(n&&this.unrender(!0),this.unbind()),this.template=t,this.createItems(),e&&(this.bind(this.context),n)&&(t=this.findParentNode(),(e=this.findNextNode())?(n=Ie(),this.render(n),t.insertBefore(n,e)):this.render(t))},ph.shuffled=function(){this.items.forEach(Y),this.rootModel&&this.rootModel.applyValue(this.context.getKeypath(this.ractive.root)),this.pathModel&&this.pathModel.applyValue(this.context.getKeypath())},ph.toString=function(t){return this.items.map(t?it:nt).join("")},ph.unbind=function(t){if(this.owner.template.z&&!this.owner.yielder){for(var e in this.aliases)this.aliases[e].unreference();this.aliases={}}this.context=null;for(var n=this.items.length,i=0;i<n;i++)this.items[i].unbind(t);return this.bound=!1,this},ph.unrender=function(t){for(var e=this.items.length,n=0;n<e;n++)this.items[n].unrender(t);this.rendered=!1},ph.update=function(){if(this.dirty)if(this.updating)this.isRoot&&pa.addFragmentToRoot(this);else{this.dirty=!1,this.updating=!0;for(var t=this.items.length,e=0;e<t;e++)this.items[e].update();this.updating=!1}},ph.valueOf=function(){return 1===this.items.length?this.items[0].valueOf():(this.dirtyValue&&(t=di(function n(t,i,r,s){return void 0===s&&(s=0),t.map(function(t){if(1===t.type)return t.template;if(t.fragment)return t.fragment.iterations?t.fragment.iterations.map(function(t){return n(t.items,i,r,s)}).join(""):n(t.fragment.items,i,r,s);var e=r+"-"+s++,t=t.model||t.newModel;return i[e]=t?t.wrapper?t.wrapperValue:t.get():void 0,"${"+e+"}"}).join("")}(this.items,t={},this.ractive._guid),t),this.value=t?t.value:this.toString(),this.dirtyValue=!1),this.value);var t},Vl.prototype.getContext=ae,Vl.prototype.getKeypath=Vi;var Pl=["template","partials","components","decorators","events"],Ml={add:function(t,e,n){return de(this,t,l(e)?e:1,y(e)?e:n)},animate:function(e,t,n){if(y(e)){var i=Ji(e);throw new Error("ractive.animate(...) no longer supports objects. Instead of ractive.animate({\n  "+i.map(function(t){return"'"+t+"': "+e[t]}).join("\n  ")+"\n}, {...}), do\n\n"+i.map(function(t){return"ractive.animate('"+t+"', "+e[t]+", {...});"}).join("\n")+"\n")}return pe(this,this.viewmodel.joinAll(S(e)),t,n)},attachChild:function(t,e){void 0===e&&(e={});var n,i=this._children;if(t.parent&&t.parent!==this)throw new Error("Instance "+t._guid+" is already attached to a different instance "+t.parent._guid+". Please detach it from the other instance using detachChild first.");if(t.parent)throw new Error("Instance "+t._guid+" is already attached to this instance.");var r={instance:t,ractive:this,name:e.name||t.constructor.name||"Ractive",target:e.target||!1,bubble:_e,findNextNode:Ee};r.nameOption=e.name,r.target?((s=i.byName[r.target])||this.set("@this.children.byName."+r.target,s=[]),n=e.prepend?0:void 0!==e.insertAt?e.insertAt:s.length):(r.up=this.fragment,r.external=!0),t.parent=this,t.root=this.root,t.component=r,i.push(r);var s=pa.start();return(i=t.viewmodel.getRactiveModel()).joinKey("parent",{lastLink:!1}).link(this.viewmodel.getRactiveModel()),i.joinKey("root",{lastLink:!1}).link(this.root.viewmodel.getRactiveModel()),La.attachchild.fire(t),r.target?((i=r).instance.fragment.rendered&&(i.shouldDestroy=!0,i.instance.unrender()),i.instance.el=null,this.splice("@this.children.byName."+r.target,n,0,r),ke(this,r.target)):t.isolated||t.viewmodel.attached(this.fragment),pa.end(),s.ractive=t,s.then(function(){return t})},compute:function(t,e){var n=pa.start();return(e=Se.call(this,t,e))&&(1!==(t=S(t)).length||e.isReadonly||e.set(this.viewmodel.value[t[0]]),(t=t.reduce(function(t,e){return t&&t.childByKey[e]},this.viewmodel))&&(t.rebind(e,t,!1),t.parent&&delete t.parent.childByKey[t.key],K())),pa.end(),n},detach:function(){return this.isDetached||(this.el&&j(this.el.__ractive_instances__,this),this.el=this.fragment.detach(),this.isDetached=!0,La.detach.fire(this)),this.el},detachChild:function(t){for(var e,n,i=this._children,r=i.length;r--;)if(i[r].instance===t){e=i[n=r];break}if(!e||t.parent!==this)throw new Error("Instance "+t._guid+" is not attached to this instance.");var s=pa.start();e.anchor&&e.anchor.removeChild(e),t.isolated||t.viewmodel.detached(),i.splice(n,1),e.target&&(this.splice("@this.children.byName."+e.target,i.byName[e.target].indexOf(e),1),ke(this,e.target));var o=t.viewmodel.getRactiveModel();return o.joinKey("parent",{lastLink:!1}).unlink(),o.joinKey("root",{lastLink:!1}).link(o),(t.root=t).parent=null,t.component=null,La.detachchild.fire(t),pa.end(),s.ractive=t,s.then(function(){return t})},find:function(t,e){if(void 0===e&&(e={}),!this.rendered)throw new Error("Cannot call ractive.find('"+t+"') unless instance is rendered to the DOM");var n=this.fragment.find(t,e);if(n)return n;if(e.remote)for(var i=0;i<this._children.length;i++)if(this._children[i].instance.fragment.rendered&&(n=this._children[i].instance.find(t,e)))return n},findAll:function(e,n){if(void 0===n&&(n={}),!this.rendered)throw new Error("Cannot call ractive.findAll('"+e+"', ...) unless instance is rendered to the DOM");return tr(n.result)||(n.result=[]),this.fragment.findAll(e,n),n.remote&&this._children.forEach(function(t){!t.target&&t.instance.fragment&&t.instance.fragment.rendered&&t.instance.findAll(e,n)}),n.result},findAllComponents:function(e,n){return!n&&y(e)&&(n=e,e=""),tr((n=n||{}).result)||(n.result=[]),this.fragment.findAllComponents(e,n),n.remote&&this._children.forEach(function(t){!t.target&&t.instance.fragment&&t.instance.fragment.rendered&&(e&&t.name!==e||n.result.push(t.instance),t.instance.findAllComponents(e,n))}),n.result},findComponent:function(t,e){void 0===e&&(e={}),y(t)&&(e=t,t="");var n=this.fragment.findComponent(t,e);if(n)return n;if(e.remote){if(!t&&this._children.length)return this._children[0].instance;for(var i=0;i<this._children.length;i++)if(!this._children[i].target){if(this._children[i].name===t)return this._children[i].instance;if(n=this._children[i].instance.findComponent(t,e))return n}}},findContainer:function(t){return this.container?this.container.component&&this.container.component.name===t?this.container:this.container.findContainer(t):null},findParent:function(t){return this.parent?this.parent.component&&this.parent.component.name===t?this.parent:this.parent.findParent(t):null},fire:function(t){for(var e,n,i=[],r=arguments.length-1;0<r--;)i[r]=arguments[r+1];return i[0]instanceof Da?(e=i.shift(),n=Gi(e),Wi(n,e)):n=!y(i[0])||null!==i[0]&&i[0].constructor!==Object?Da.forRactive(this):Da.forRactive(this,i.shift()),ye(this,t,n,i)},get:function(t,e){if(!A(t))return this.viewmodel.get(!0,t);var n=S(t),t=n[0];return this.viewmodel.has(t)||this.component&&!this.isolated&&ne(this.fragment||new Aa(this),t),this.viewmodel.joinAll(n).get(!0,e)},getLocalContext:function(){return Ga.f?Ga.f.getContext():void 0},getContext:function(t,e){return t?Pe(t=A(t)?this.find(t,e):t):oe(this)},insert:function(t,e){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(t=Re(t),e=Re(e)||null,!t)throw new Error("You must specify a valid target to insert into");t.insertBefore(this.detach(),e),((this.el=t).__ractive_instances__||(t.__ractive_instances__=[])).push(this),this.isDetached=!1,function e(t){La.insert.fire(t),t.findAllComponents("*").forEach(function(t){e(t.instance)})}(this)},link:function(t,e,n){var i,r=n&&(n.ractive||n.instance)||this,s=S(t),r=(i=!r.viewmodel.has(s[0])&&r.component?(i=ne(r.component.up,s[0])).joinAll(s.slice(1)):i)||r.viewmodel.joinAll(s),s=this.viewmodel.joinAll(S(e),{lastLink:!1});if(De(r,s)||De(s,r))throw new Error("A keypath cannot be linked to itself.");return e=pa.start(),s.link(r,n&&n.keypath||t),pa.end(),e},observe:function(t,e,n){var i,r=this,s=[],o=b(t)?(i=t,e||{}):w(t)?(i={"":t},e||{}):((i={})[t]=e,n||{}),a=!1;return Ji(i).forEach(function(t){function e(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return a?void 0:n.apply(this,t)}var n=i[t],t=t.split(" ");(t=1<t.length?t.filter(function(t){return t}):t).forEach(function(t){o.keypath=t;t=function(t,e,n,i){var r,s=S(e),o=s.indexOf("*");if(~o||(o=s.indexOf("**")),i.fragment=i.fragment||t.fragment,i.fragment?~s[0].indexOf(".*")?(r=i.fragment.findContext(),s[o=0]=s[0].slice(1)):r=0===o?i.fragment.findContext():ne(i.fragment,s[0]):r=t.viewmodel.joinKey(s[0]),r=r||t.viewmodel.joinKey(s[0]),~o){e=s.indexOf("**");return~e&&(e+1!==s.length||~s.indexOf("*"))?void _("Recursive observers may only specify a single '**' at the end of the path."):(r=r.joinAll(s.slice(1,o)),new gh(t,r,s.slice(o),n,i))}return r=r.joinAll(s.slice(1)),new(i.array?yh:fh)(t,r,n,i)}(r,t,e,o);t&&s.push(t)})}),this._observers.push.apply(this._observers,s),{cancel:function(){return s.forEach(function(t){return t.cancel()})},isSilenced:function(){return a},silence:function(){return a=!0},resume:function(){return a=!1}}},observeOnce:function(t,e,n){return b(t)||w(t)?(n=Wi(e||{},kh),this.observe(t,n)):(n=Wi(n||{},kh),this.observe(t,e,n))},off:function(t,i){var r=this;return t?t.split(" ").map(bh).filter(wh).forEach(function(t){var e,n=r._subs[t];n&&i?(e=n.find(function(t){return t.callback===i}))&&(j(n,e),e.off=!0,t.indexOf(".")&&r._nsSubs--):n&&(t.indexOf(".")&&(r._nsSubs-=n.length),n.length=0)}):this._subs={},this},on:function(t,e){var i=this,r=y(t)?t:{};A(t)&&(r[t]=e);var n,s=!1,o=[];for(n in r)!function(t){var n=r[t],e={callback:n,handler:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return s?void 0:n.apply(this,t)}};v(r,t)&&t.split(" ").map(bh).filter(wh).forEach(function(t){(i._subs[t]||(i._subs[t]=[])).push(e),t.indexOf(".")&&i._nsSubs++,o.push([t,e])})}(n);return{cancel:function(){return o.forEach(function(t){return i.off(t[0],t[1].callback)})},isSilenced:function(){return s},silence:function(){return s=!0},resume:function(){return s=!1}}},once:function(t,e){var n=this.on(t,function(){e.apply(this,arguments),n.cancel()});return n},pop:Ir,push:ca,readLink:function(t,e){if(void 0===e&&(e={}),t=S(t),this.viewmodel.has(t[0])){var n=this.viewmodel.joinAll(t);if(n.isLink){for(;(n=n.target)&&!1!==e.canonical&&n.isLink;);return n?{ractive:n.root.ractive,keypath:n.getKeypath()}:void 0}}},render:function(t,e){if(this.torndown)return k("ractive.render() was called on a Ractive instance that was already torn down"),Promise.resolve();var n;t=Re(t)||this.el,!this.append&&t&&((n=t.__ractive_instances__)&&n.forEach(J),this.enhance||(t.innerHTML=""));var i=this.enhance?V(t.childNodes):null,e=Ii(this,t,e,i);if(i)for(;i.length;)t.removeChild(i.pop());return e},reset:function(t){if(!y(t=t||{}))throw new Error("The reset method takes either no arguments, or an object containing new data");t=Uh.init(this.constructor,this,{data:t});var e=pa.start(),n=this.viewmodel.wrapper;n&&n.reset&&!1!==n.reset(t)||this.viewmodel.set(t);for(var i,r=Wh.reset(this),s=r.length;s--;)if(-1<Pl.indexOf(r[s])){i=!0;break}return i&&(La.unrender.fire(this),this.fragment.resetTemplate(this.template),La.render.fire(this),La.complete.fire(this)),pa.end(),La.reset.fire(this,t),e},resetPartial:function(t,e){var n=[];!function e(t,n,i,r){t.forEach(function(t){if(t.type===Jr&&(t.refName===n||t.name===n))return t.inAttribute=i,void r.push(t);if(t.fragment)e(t.fragment.iterations||t.fragment.items,n,i,r);else if(tr(t.items))e(t.items,n,i,r);else if(t.type===rs&&t.instance){if(t.instance.partials[n])return;e(t.instance.fragment.items,n,i,r)}t.type===Yr&&tr(t.attributes)&&e(t.attributes,n,!0,r)})}(this.fragment.items,t,!1,n);var i=pa.start();return this.partials[t]=e,n.forEach(H),pa.end(),i},resetTemplate:function(t){$h.init(null,this,{template:t});var e=this.transitionsEnabled;this.transitionsEnabled=!1;var n=this.component;n&&(n.shouldDestroy=!0),this.unrender(),n&&(n.shouldDestroy=!1);var i=pa.start();return this.fragment.unbind().unrender(!0),this.fragment=new Vl({template:this.template,root:this,owner:this}),t=Ie(),this.fragment.bind(this.viewmodel).render(t),n&&!n.external?this.fragment.findParentNode().insertBefore(t,n.findNextNode()):this.el.insertBefore(t,this.anchor),pa.end(),this.transitionsEnabled=e,i},reverse:Oe("reverse").path,set:function(t,e,n){return n=y(t)?e:n,ue(ce(this,t,e,n&&n.isolated),n)},shift:Oe("shift").path,sort:Oe("sort").path,splice:Oe("splice").path,subtract:function(t,e,n){return de(this,t,l(e)?-e:-1,y(e)?e:n)},teardown:function(){var t=this;return this.torndown?(k("ractive.teardown() was called on a Ractive instance that was already torn down"),Promise.resolve()):(this.shouldDestroy=!0,Bn(this,function(){return t.fragment.rendered?t.unrender():Promise.resolve()}))},toggle:function(t,e){if(!A(t))throw new TypeError("Bad arguments");return ue(le(this,t,null,e&&e.isolated).map(function(t){return[t,!t.get()]}),e)},toCSS:Ri,toCss:Ri,toHTML:Bi,toHtml:Bi,toText:function(){return this.fragment.toString(!1)},transition:function(t,e,n){e instanceof HTMLElement||b(e)&&(n=e),(e=e||this.event.node)&&e._ractive||c("No node was supplied for transition "+t);var e=e._ractive.proxy,i=new cl({owner:e,up:e.up,name:t,params:n=n||{}});return i.bind(),n=pa.start(),pa.registerTransition(i),pa.end(),n.then(function(){return i.unbind()}),n},unlink:function(t){var e=pa.start();return this.viewmodel.joinAll(S(t),{lastLink:!1}).unlink(),pa.end(),e},unrender:function(){if(!this.fragment.rendered)return k("ractive.unrender() was called on a Ractive instance that was not rendered"),Promise.resolve();this.unrendering=!0;var t=pa.start();La.unrendering.fire(this);var e=!this.component||(this.component.anchor||{}).shouldDestroy||this.component.shouldDestroy||this.shouldDestroy;return this.fragment.unrender(e),e&&(this.destroyed=!0),j(this.el.__ractive_instances__,this),La.unrender.fire(this),pa.end(),this.unrendering=!1,t},unshift:Oe("unshift").path,update:function(t,e){var n,t=A(t)?(n=S(t),e):t;return Ne(this,n?this.viewmodel.joinAll(n):this.viewmodel,t)},updateModel:function(t,e){var n=pa.start();return t?this.viewmodel.joinAll(S(t)).updateFromBindings(!1!==e):this.viewmodel.updateFromBindings(!0),pa.end(),n},use:function(){for(var e=this,t=[],n=arguments.length;n--;)t[n]=arguments[n];return t.forEach(function(t){t({proto:e,Ractive:e.constructor.Ractive,instance:e})}),this}},Il=[],Rl=/super\s*\(|\.call\s*\(\s*this/;return Yi(qi,{sharedGet:{value:function(t,e){return _a.joinAll(S(t)).get(!0,e)}},sharedSet:{value:function(t,e,n){return n=y(t)?e:n,ue(ce({viewmodel:_a},t,e,!0),n)}},styleGet:{configurable:!0,value:Li.bind(qi)},styleSet:{configurable:!0,value:en.bind(qi)},addCSS:{configurable:!1,value:function(e,t){if(Il.find(function(t){return t.id===e}))throw new Error("Extra styles with the id '"+e+"' have already been added.");Il.push({id:e,css:t}),this.css||Object.defineProperty(this,"css",{configurable:!1,writable:!1,value:Di}),this._cssDef||(Object.defineProperty(this,"_cssDef",{configurable:!0,writable:!1,value:{transform:!1,id:"Ractive.addStyle"}}),He(this._cssDef)),rn(this),Ze(!0)}.bind(qi)},hasCSS:{configurable:!1,value:function(e){return!!Il.find(function(t){return t.id===e})}.bind(qi)}}),ur&&!ur.Ractive?(Ir="",~(Ir=(ca=document.currentScript||document.querySelector("script[data-ractive-options]"))?ca.getAttribute("data-ractive-options")||"":Ir).indexOf("ForceGlobal")&&(ur.Ractive=qi)):ur&&t("Ractive already appears to be loaded while loading 1.4.0-edge."),Wi(qi.prototype,Ml,wr),Jo.defaults=(qi.prototype.constructor=qi).defaults=qi.prototype,Jo.Ractive=qi,Yi(qi,{DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:zi},extendWith:{value:Ui},escapeKey:{value:p},evalObjectString:{value:di},findPlugin:{value:function(t,e,n){return d(e,n,t)}},getContext:{value:Pe},getCSS:{value:We},isInstance:{value:Ki},joinKeys:{value:ze},macro:{value:function(t,e){if(!w(t))throw new Error("The macro must be a function");return Wi(t,e),Yi(t,{extensions:{value:[]},_cssIds:{value:[]},cssData:{value:Wi(Gi(this.cssData),t.cssData||{})},styleGet:{value:Li.bind(t)},styleSet:{value:en.bind(t)}}),Qi(t,"_cssModel",{value:new Dh(t)}),t.css&&on(t,t,t),this.extensions.push(t),t}},normaliseKeypath:{value:m},parse:{value:Zt},splitKeypath:{value:function(t){return S(t).map(g)}},unescapeKey:{value:g},use:{value:Fi},enhance:{writable:!0,value:!1},svg:{value:pr},tick:{get:function(){return fa&&fa.promise}},VERSION:{value:"1.4.0-edge"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:xr},events:{writable:!0,value:{}},extensions:{value:[]},helpers:{writable:!0,value:wr.helpers},interpolators:{writable:!0,value:Sr},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}},cssData:{configurable:!0,value:{}},perComponentStyleElements:{get:qe,set:qe},sharedData:{value:xa},Ractive:{value:qi},Context:{value:Sa.Context.prototype}}),Qi(qi,"_cssModel",{configurable:!0,value:new Dh(qi)}),Qi(qi.prototype,"rendered",{get:function(){return this.fragment&&this.fragment.rendered}}),qi});