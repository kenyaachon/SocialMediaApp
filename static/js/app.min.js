var currentPage,body,Router=require("./lib/Router"),Home=require("./controllers/Home"),Register=require("./controllers/Register"),Login=require("./controllers/Login"),UserModel=require("./models/User"),Profile=require("./controllers/Profile"),FindFriends=require("./controllers/FindFriends");const User=require("./models/User");console.log("some new routing code");var showPage=function(e){currentPage&&currentPage.teardown(),currentPage=e,body.innerHTML="Who bitches",currentPage.render(body),currentPage.on("navigation.goto",function(e,o){Router.navigate(o)}),window.currentPage=currentPage},renderProfile=function(e){e.isLogged()?(e=new Profile,showPage(e)):Router.navigate("login")},findFriends=function(e){e.isLogged()?(e=new FindFriends,showPage(e)):Router.navigate("login")},logoutUser=function(e){e.logout(function(e,o){console.log(e),window.location.href="/"})};window.onload=function(){var n=new UserModel;n.fetch(function(e,o){Router.add("home",function(){var e=new Home;showPage(e)}).add("register",function(){var e=new Register;showPage(e)}).add("login",function(){var e=new Login;showPage(e)}).add("find-friends",function(){findFriends(n)}).add("logout",function(){logoutUser.call(this,n)}).add("profile",function(){renderProfile(n)}).add(function(){Router.navigate("home")}).listen().check()})};